<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>在python中调用matlab</title>
      <link href="/2019/03/04/python-matlab/"/>
      <url>/2019/03/04/python-matlab/</url>
      
        <content type="html"><![CDATA[<p>本文介绍如何在python中调用matlab的函数。</p><h1 id="安装matlab"><a href="#安装matlab" class="headerlink" title="安装matlab"></a>安装matlab</h1><p>首先需要安装matlab，如果已经安装可以跳过这一节。<br>本文使用的matlab版本是R2016b，安装在远程的服务器上。<br>由于是远程安装，所以需要在安装matlab的时候使用静默模式。</p><ul><li><p>首先修改安装目录下的installer_input.txt文件，选择需要安装的组件，修改文件中的相应状态。<br>cd到matlab安装文件所在目录，执行<br><code>./install -inputFile /xxx/xxx/xxx/installer_input.txt</code><br>这里建议写全文件所在的绝对路径。</p></li><li><p>激活matlab。matlab安装后需要激活，cd到matlab安装路径下，这个路径在installer_input.txt文件中进行过设置。<br>执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd bin</span><br><span class="line">./activate_matlab.sh -propertiesFile /xxx/xxx/xxx/activate.ini</span><br></pre></td></tr></table></figure></li></ul><p>安装成功后可以执行<code>bin/matlab</code>来启动matlab<br>为了便于使用，可以将matlab的启动路径作为别名添加到bashrc文件中。</p><h1 id="python安装matlab-engine"><a href="#python安装matlab-engine" class="headerlink" title="python安装matlab engine"></a>python安装matlab engine</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $matlab_root/extern/python</span><br><span class="line">python set.py install</span><br></pre></td></tr></table></figure><p>注意不同版本的matlab支持的python版本也不尽相同。<br>这样就安装成功了，可以运行一段代码测试一下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matlab.engine</span><br><span class="line">eng = matlab.engine.start_matlab()</span><br><span class="line">tf = eng.isprime(<span class="number">37</span>)</span><br><span class="line">print(tf)</span><br></pre></td></tr></table></figure></p><p>更多用法可以参考<a href="https://www.mathworks.com/help/matlab/matlab_external/call-matlab-functions-from-python.html" target="_blank" rel="noopener">这个页面</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在latex中添加notes</title>
      <link href="/2019/03/01/latex-add-notes/"/>
      <url>/2019/03/01/latex-add-notes/</url>
      
        <content type="html"><![CDATA[<p>有时候对于一个未完成的tex文件，为了方便与他人交流，或者为了给自己提个醒，我们希望能够在生成的pdf文件中加入醒目的注释。<br>使用<code>todonotes</code>和<code>marginnote</code>都可以实现这样的功能。</p><h1 id="在页面两侧空白处添加notes"><a href="#在页面两侧空白处添加notes" class="headerlink" title="在页面两侧空白处添加notes"></a>在页面两侧空白处添加notes</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p><script src="https://gist.github.com/sparkydogX/b065fea8c48bf65293450b53f4876c65.js"></script><br>其中最后四行是为了保持原来排版不变的情况下增加边距。<br>因为默认的边距往往较小，显示出来的效果比较糟糕，所以往往需要增加边距，以容纳注释文本。<br>在最终版本中应该将这四行删除。</p><h2 id="在文章中使用"><a href="#在文章中使用" class="headerlink" title="在文章中使用"></a>在文章中使用</h2><ul><li><p>使用todonotes</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\todo&#123;Don&apos;t forget to put an introduction here.&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用marginnote</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\marginnote&#123;This is a margin note&#125;[3cm]</span><br></pre></td></tr></table></figure></li></ul><p>这里的3cm定义了这个注释显示在页面中的高度。<br>关于使用marginnote的更详细用法可以参考<a href="https://www.overleaf.com/learn/latex/Margin_notes" target="_blank" rel="noopener">https://www.overleaf.com/learn/latex/Margin_notes</a></p><h1 id="使用todonotes实现inline-notes"><a href="#使用todonotes实现inline-notes" class="headerlink" title="使用todonotes实现inline notes"></a>使用todonotes实现inline notes</h1><p>行内的notes会占据正文的空间，这种方法的好处是不用考虑额外的边距问题，也更加方便阅读。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\usepackage[textsize=small]&#123;todonotes&#125;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">\todo[inline,caption=&#123;&#125;]&#123;</span><br><span class="line">  \begin&#123;itemize&#125;</span><br><span class="line">    \item Bla bla bla</span><br><span class="line">  \end&#123;itemize&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获得当前git提交版本的hash</title>
      <link href="/2019/02/27/get-current-commit-version/"/>
      <url>/2019/02/27/get-current-commit-version/</url>
      
        <content type="html"><![CDATA[<p>想知道当前代码在git仓库中的版本，最直接的方法是使用<code>git log</code>直接进行查看。<br>此外也可以通过在terminal中执行以下指令直接获得：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --pretty=format:<span class="string">"%h"</span> -n 1</span><br></pre></td></tr></table></figure></p><p>将”%h”换成”%H”可以获得long形式的Hash</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在python的tqdm中加入前缀和后缀</title>
      <link href="/2019/02/18/tqdm-with-description/"/>
      <url>/2019/02/18/tqdm-with-description/</url>
      
        <content type="html"><![CDATA[<p>tqdm是python中非常好用的模块，可以用来指示循环的运行情况，最简单的方法是在for循环中直接加入tqdm，如<code>for i in tqdm(range(100))</code>。<br>但是如果想要在循环中指示更多信息，则需要修改一些代码：</p><script src="https://gist.github.com/sparkydogX/f9acb7c76aeefffdcebfa782bfb1e4c9.js"></script><p>这样可以在tqdm读条的前后显示需要的信息，<code>set_description()</code>设定的是前缀，<code>set_postfix()</code>设定的是后缀。<br>如果需要更加细致全面美观的功能，可以使用<a href="https://github.com/verigak/progress/" target="_blank" rel="noopener">progress</a>模块。使用tqdm主要就是图个方便省事。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> tqdm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过Github私有仓库同步代码</title>
      <link href="/2019/02/03/sync-code-via-github/"/>
      <url>/2019/02/03/sync-code-via-github/</url>
      
        <content type="html"><![CDATA[<p>前一阵Github向个人用户免费开放了私有仓库的功能。通过私有仓库同步代码相当方便。<br>本文不考虑对master分支进行合并操作，仅介绍dev分支的同步。</p><h1 id="本地dev分支"><a href="#本地dev分支" class="headerlink" title="本地dev分支"></a>本地dev分支</h1><ul><li>若dev分支不存在，创建dev分支： <code>git checkout -b dev master</code></li><li>修改代码后提交： <code>git add</code>,   <code>git commit</code></li><li>上传代码到Github： <code>git push origin dev</code></li></ul><h1 id="远程机器"><a href="#远程机器" class="headerlink" title="远程机器"></a>远程机器</h1><ul><li>若dev分支不存在，创建并切换到dev分支：<code>git checkout -b origin/dev</code></li><li>同步Github仓库中的代码：<code>git pull</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
            <tag> push </tag>
            
            <tag> pull </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在SimpleHTTPServer中加入上传功能</title>
      <link href="/2019/02/03/python-simplehttpserverwithupload/"/>
      <url>/2019/02/03/python-simplehttpserverwithupload/</url>
      
        <content type="html"><![CDATA[<p>感谢以下两篇博客给出的详细实现思路：</p><ul><li><a href="http://buptguo.com/2015/11/07/simplehttpserver-with-upload-file/" target="_blank" rel="noopener">http://buptguo.com/2015/11/07/simplehttpserver-with-upload-file/</a></li><li><a href="https://jjayyyyyyy.github.io/2016/10/07/reWrite_SimpleHTTPServerWithUpload_with_python3.html" target="_blank" rel="noopener">https://jjayyyyyyy.github.io/2016/10/07/reWrite_SimpleHTTPServerWithUpload_with_python3.html</a></li></ul><p>分别实现了python2和python3的版本。<br>在中文环境下建议使用python3的版本，在测试中我使用python2版本上传中文文件时会出现乱码。（亘古不变的编码大坑=_=!）<br>代码如下：</p><script src="https://gist.github.com/sparkydogX/0e4ce448bc22d86bdef8c2ff9da24c7e.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> SimpleHTTPServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过脚本在终端中打开多个ssh session</title>
      <link href="/2019/01/22/create-ssh-terminial/"/>
      <url>/2019/01/22/create-ssh-terminial/</url>
      
        <content type="html"><![CDATA[<p>在日常工作中，我尝尝需要使用ssh连接很多个服务器。而最经常连接的也就那么几个，一个一个手动输入指令实在麻烦，因此写了一个脚本来自动化地执行这些指令。</p><h1 id="免密登录服务器"><a href="#免密登录服务器" class="headerlink" title="免密登录服务器"></a>免密登录服务器</h1><p><code>ssh-keygen</code>创建一个新的密钥对<br>将公钥复制到服务器<br><code>ssh-copy-id user@my.server.com</code><br>从现在起，服务器应该识别你的密钥，而不再要求输入密码。</p><h1 id="编写脚本"><a href="#编写脚本" class="headerlink" title="编写脚本"></a>编写脚本</h1><p>我的脚本如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">cmd=<span class="string">'watch -n 1 nvidia-smi'</span></span><br><span class="line"> gnome-terminal \</span><br><span class="line"> --window  -e <span class="string">"ssh  node0 "</span> \</span><br><span class="line"> --tab  -e <span class="string">"ssh -t node0 <span class="variable">$cmd</span>"</span> \</span><br><span class="line"> --tab  -e <span class="string">"ssh -t node1"</span> \</span><br><span class="line"> --tab  -e <span class="string">"ssh -t node1 <span class="variable">$cmd</span>"</span> \</span><br></pre></td></tr></table></figure></p><p>这里的node0是我在ssh的设置里面设置的别名，如果没有别名，使用<a href="mailto:`user@my.server.com" target="_blank" rel="noopener">`user@my.server.com</a>`替代即可。<br>这样就可以新建一个terminal window，并且在其中打开4个tab，分别连接到node0和node1，每个node有2个tab，一个用于操作，一个用于实时查看服务器GPU使用情况。  </p>]]></content>
      
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> ssh </tag>
            
            <tag> gnome-terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>部署供Telegram使用的MTProxy服务</title>
      <link href="/2019/01/17/mtproxy-telegram/"/>
      <url>/2019/01/17/mtproxy-telegram/</url>
      
        <content type="html"><![CDATA[<p>更新后的telegram在iOS上使用系统代理无效，可以选择使用telegram内置的socks5和mtproxy来进行代理。socks5代理搞得我一头雾水，到最后也没找到iOS上我vpn程序的本地端口在哪。只能使用mtproxy。<br>好在mtproxy服务器的配置也很简单。<br>以我的服务器为例，操作系统是centos6。</p><h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br><span class="line">yum install openssl-devel zlib-devel git wget vim</span><br><span class="line">yum groupinstall <span class="string">"Development Tools"</span></span><br></pre></td></tr></table></figure><h1 id="安装C-11"><a href="#安装C-11" class="headerlink" title="安装C++11"></a>安装C++11</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line">wget http://linuxsoft.cern.ch/cern/scl/slc6-scl.repo</span><br><span class="line">yum -y --nogpgcheck install devtoolset-3-gcc devtoolset-3-gcc-c++</span><br><span class="line">scl <span class="built_in">enable</span> devtoolset-3 bash</span><br></pre></td></tr></table></figure><h1 id="编译源代码"><a href="#编译源代码" class="headerlink" title="编译源代码"></a>编译源代码</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/TelegramMessenger/MTProxy</span><br><span class="line"><span class="built_in">cd</span> MTProxy</span><br><span class="line">make</span><br></pre></td></tr></table></figure><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> objs/bin</span><br><span class="line"><span class="comment"># 获取 AES 密钥用于连接 Telegram 服务器</span></span><br><span class="line">curl -s https://core.telegram.org/getProxySecret -o proxy-secret</span><br><span class="line"><span class="comment"># 获取 Telegram 服务器列表及配置，建议定时更新</span></span><br><span class="line">curl -s https://core.telegram.org/getProxyConfig -o proxy-multi.conf</span><br><span class="line">head -c 16 /dev/urandom | xxd -ps</span><br></pre></td></tr></table></figure><p>添加用户：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser mtproxy</span><br><span class="line">passwd mtproxy</span><br></pre></td></tr></table></figure></p><p>记住到这一步生成的密钥。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x mtproto-proxy</span><br><span class="line">./mtproto-proxy -u mtproxy -p 8888 -H 445 -S &lt;secret&gt; --aes-pwd proxy-secret proxy-multi.conf -M 0 &amp;</span><br></pre></td></tr></table></figure></p><p>更改防火墙设置，允许对应的 TCP 端口通过：<br><code>sudo iptables -A INPUT -p tcp --dport 445 -j ACCEPT</code></p><h1 id="添加开机启动"><a href="#添加开机启动" class="headerlink" title="添加开机启动"></a>添加开机启动</h1><p><code>cd /home/MTProxy/objs/bin &amp;&amp; ./mtproto-proxy -u mtproxy -p 8888 -H 445 -S &lt;secret&gt; --aes-pwd proxy-secret proxy-multi.conf -M 0 &amp;</code></p><h1 id="停止MTProxy"><a href="#停止MTProxy" class="headerlink" title="停止MTProxy"></a>停止MTProxy</h1><p><code>pkill -u mtproxy</code></p><blockquote><p>参考来源：</p><ul><li><a href="https://github.com/iimarks/MTProxy" target="_blank" rel="noopener">https://github.com/iimarks/MTProxy</a></li><li><a href="https://blog.lancitou.net/mtproxy-setup/" target="_blank" rel="noopener">Telegram 专用代理服务器 MTProxy 搭建</a></li><li><a href="https://segmentfault.com/a/1190000015837579" target="_blank" rel="noopener">Telegram MTproxy代理搭建完全指南</a></li></ul></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> telegram </tag>
            
            <tag> MTProxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu中设置网络唤醒</title>
      <link href="/2019/01/16/ubuntu-wake-on-lan/"/>
      <url>/2019/01/16/ubuntu-wake-on-lan/</url>
      
        <content type="html"><![CDATA[<p>网络唤醒，实际上就是远程开机了，首先需要主板支持wake on lan（大部分2000年后生产的主板都支持wol），此外机器需要连接到电源。</p><h1 id="设置BIOS"><a href="#设置BIOS" class="headerlink" title="设置BIOS"></a>设置BIOS</h1><p>在BIOS设置中打开wol功能，通常到制造商的网站上可以找到具体操作步骤，我用的是华硕主板，设置步骤在这里:<a href="https://www.asus.com.cn/support/FAQ/1001663/" target="_blank" rel="noopener">BIOS中如何开启&amp;关闭网络唤醒</a></p><h1 id="在Ubuntu系统中进行设置"><a href="#在Ubuntu系统中进行设置" class="headerlink" title="在Ubuntu系统中进行设置"></a>在Ubuntu系统中进行设置</h1><ol><li>安装 ethtool<br><code>sudo apt-get install ethtool</code></li><li>启动ethtool<br><code>sudo ethtool -s eth0 wol g</code><br>这里的eth0应该根据具体的网卡名称修改。可以使用<code>ifconfig</code>查看当前机器的网卡。</li><li><p>设置开机启动ethtool<br><code>vim /etc/rc.local</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sleep 5</span><br><span class="line">ethtool -s eth0 wol g</span><br></pre></td></tr></table></figure></li><li><p><code>sudo vim/etc/init.d/halt</code><br>设置<code>NETDOWN = no</code></p></li><li><p>记录Ubuntu机器的Mac地址</p></li></ol><h1 id="远程启动"><a href="#远程启动" class="headerlink" title="远程启动"></a>远程启动</h1><ul><li>For Ubuntu:<code>sudo apt-get install wakeonlan</code></li><li>For Mac: <code>brew install wakeonlan</code></li><li>For Windows: <a href="https://www.solarwinds.com/free-tools/wake-on-lan" target="_blank" rel="noopener">Wake on Lan</a><br>以Ubuntu和Mac为例，在命令行中执行<code>wakeonlan xx:xx:xx:xx:xx:xx</code> （输入Ubuntu机器对应的mac地址）就可以唤醒机器了。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> wake on lan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将gitignore中的更新同步到git仓库</title>
      <link href="/2019/01/09/apply-gitignore/"/>
      <url>/2019/01/09/apply-gitignore/</url>
      
        <content type="html"><![CDATA[<p>有时候我们gitignore文件中写错了一些条目，知道commit的时候才发现。有时修改gitignore发现没有作用。<br>需要运行以下代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rm all files</span></span><br><span class="line">git rm -r --cached .</span><br><span class="line"><span class="comment"># add all files as per new .gitignore</span></span><br><span class="line">git add .</span><br><span class="line"><span class="comment"># now, commit for new .gitignore to apply</span></span><br><span class="line">git commit -m <span class="string">".gitignore is now working"</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> gitignore </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在openwrt系统中设置开机自启服务</title>
      <link href="/2019/01/09/openwrt-service-startup/"/>
      <url>/2019/01/09/openwrt-service-startup/</url>
      
        <content type="html"><![CDATA[<p>/etc/init.d目录下面就是系统加载的开机配置，文件夹中的每个文件都代表一个service。<br>每个配置可以设置START优先级，数字越大启动越靠后，如果有很多需要依赖网络或者USB之类的启动程序最好设置靠后一些，等其他程序启动了再启动。<br>系统读取etc/init.d/下的启动配置文件后，系统会根据start优先级，按照顺序执行每个文件的start()函数中的命令。</p><p>下面为myapp添加开启启动，假定myapp的路径是<code>/opt/myapp</code></p><p>编辑<code>/etc/init.d/mystart</code></p><p>输入以下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/sh /etc/rc.common</span></span><br><span class="line">START=99</span><br><span class="line"><span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">        /opt/myapp</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">        <span class="comment"># kill your pid</span></span><br><span class="line">        <span class="built_in">kill</span> -9 `ps | grep <span class="string">'/opt/myapp'</span> | grep -v <span class="string">'grep'</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">restart</span></span>()&#123;</span><br><span class="line">        <span class="built_in">kill</span> -9 `ps | grep <span class="string">'/opt/myapp'</span> | grep -v <span class="string">'grep'</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</span><br><span class="line">        /opt/myapp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>然后保存，退出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/init.d/mystart <span class="comment">#设置可执行权限</span></span><br><span class="line">/etc/init.d/mystart <span class="built_in">enable</span></span><br><span class="line">/etc/init.d/mystart start</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> openwrt </tag>
            
            <tag> service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在git中使用worktree同时开发多个branch</title>
      <link href="/2019/01/08/git-worktree/"/>
      <url>/2019/01/08/git-worktree/</url>
      
        <content type="html"><![CDATA[<p>在运行程序的过程中，我喜欢用git来管理代码版本。有时候需要尝试加入新的功能，直接新建一个branch，然后在branch中开发，不会影响到master，十分方便。但是新的问题也随之产生了：我的程序常常运行一遍需要好几天，在此期间我显然不应当对当前目录下的代码进行修改，这时候worktree就派上用场了。<br>worktree是git 2.6之后推出的功能。版本过低可以通过源码进行编译安装来升级。</p><h1 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h1><p>worktree的使用如下：<br><code>git worktree add &lt;path&gt; &lt;branch&gt;</code>：关联一个branch到指定的路径<br><code>git worktree add -b &lt;new_branch&gt; &lt;path&gt; &lt;branch&gt;</code>：基于指定branch新建一个branch到指定路径<br><strong>注意worktree的路径不能与原来的工作目录重叠</strong><br>在worktree建立完成后，原来branch的代码相当于被clone一份到了指定目录里，可以在主代码仓库像往常一样管理各个branch，但是此时新建branch的工作目录已经是在之前指定的文件夹了。<br>使用<code>git worktree list</code>可以查看当前的worktree情况。</p><h1 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h1><p>删除branch所在工作目录，然后在主仓库所在文件夹执行<code>git worktree prune</code>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> worktree </tag>
            
            <tag> branch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pandas dataframe数据与python内置字典的相互转换</title>
      <link href="/2019/01/02/pandas-dict/"/>
      <url>/2019/01/02/pandas-dict/</url>
      
        <content type="html"><![CDATA[<p>Pandas是一个相当流行的数据处理模块，常用的数据结构被称为DataFrame。DataFrame与Python内置的字典类型可以方便地相互转化。<br>代码如下：</p><script src="https://gist.github.com/sparkydogX/ffd9a3128a88a203ab0f1cd1304d67ef.js"></script><p>输出如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Name  Value</span><br><span class="line">0  string1    2.0</span><br><span class="line">1  string2    1.0</span><br><span class="line">2  string1    3.0</span><br><span class="line">3  string2    3.0</span><br><span class="line">4  string3    3.5</span><br><span class="line">5  string1    4.0</span><br><span class="line">6  string2    4.5</span><br><span class="line">&#123;<span class="string">'string1'</span>: 9.0, <span class="string">'string2'</span>: 8.5, <span class="string">'string3'</span>: 3.5&#125;</span><br><span class="line">Name  Sum</span><br><span class="line">0  string1  9.0</span><br><span class="line">1  string2  8.5</span><br><span class="line">2  string3  3.5</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> dict </tag>
            
            <tag> pandas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python标准库中的logging</title>
      <link href="/2018/12/29/py-bulit-in-logging/"/>
      <url>/2018/12/29/py-bulit-in-logging/</url>
      
        <content type="html"><![CDATA[<p>Python自带logging模块，可以让我们很方便地在程序运行时输出日志。代码如下：</p><script src="https://gist.github.com/sparkydogX/08613192821ab9df16d4ae1ccdd83e80.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> logging </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu中设置开机启动项</title>
      <link href="/2018/12/28/script-on-startup/"/>
      <url>/2018/12/28/script-on-startup/</url>
      
        <content type="html"><![CDATA[<p>Ubuntu提供了一个叫做Startup Applications的工具，在这个工具中可以很方便的设置各种开机启动的程序或者脚本。这种方法操作简便，基本一看就会，这里不多介绍。但是这种方法有个缺陷：不能以root用户的身份来执行程序。<br>为了能够以root身份运行，在ubuntu中大体上有三种方法：</p><ol><li>在<code>/etc/systemd/system</code>文件夹下面建立service文件。不仅可以开机启动，而且能够方便的对程序进行管理。</li><li>使用crontab或者在cron文件夹下建立新的文件，以<code>@reboot</code>开头。</li><li>编辑<code>/etc/rc.local</code>文件</li></ol><p>关于linux中的service我们以后再说，这里就只讲最为简单直接的第3种方法。<br>首先运行<code>sudo vim /etc/rc.local</code>编辑文件，只需在<code>exit 0</code>上面加入一句话即可：<br><code>sleep 10s &amp;&amp; sudo nohup /home/sparkydog/onstartup.sh &amp;  &gt; /tmp/rc.local.log</code><br>注意这里先运行了<code>sleep 10s</code>是为了等待系统的各个进程都正常地加载完毕。尤其是当script文件中启动GUI界面程序的时候。<br><code>/etc/rc.local</code>文件中的最后一句话必须是<code>exit 0</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> startup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Numpy中控制不同的变量拥有不同的随机数种子</title>
      <link href="/2018/12/27/numpy-random-seed/"/>
      <url>/2018/12/27/numpy-random-seed/</url>
      
        <content type="html"><![CDATA[<p>在numpy中，我们知道可以通常设置随机数种子来控制随机数的生成情况，在相同随机数种子的情况下，无论何时运行程序，生成的随机数序列都是相同的。这也从一个方面印证了自带的随机是伪随机。<br>在使用随机数种子的时候，最简单的方法是：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.seed(seed=<span class="number">1234</span>)</span><br></pre></td></tr></table></figure></p><p>但是这样做设置的随机种子作用域是整个文件，也就是说当你在这个文件中使用numpy随机数的时候，都会使用这个语句所设置的随机数种子。<br>现在我有两个随机变量，我希望其中一个在每次程序运行的时候都保持不变，另一个则要发生变化。代码如下：</p><script src="https://gist.github.com/sparkydogX/08fd2a7f21775cb913c26216f6c5a869.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> numpy </tag>
            
            <tag> random seed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python修改文件的修改时间和访问时间</title>
      <link href="/2018/12/25/python-osutime/"/>
      <url>/2018/12/25/python-osutime/</url>
      
        <content type="html"><![CDATA[<p>事情起源于我一个很简单的需求：将文件夹中显示的文件按照自定义的规则排序。我有一堆文件夹，文件夹的名称最后一个字符是我想要的排序关键字。<br>我用的是Ubuntu系统，找了一圈也没发现系统提供这个功能。最后只好自己实现。<br>思路很简单：</p><ol><li>先用python中的<code>os.listdir()</code>方法将文件名读进列表</li><li>然后以我想要的方式对列表进行排序。</li><li>排序完成之后挨个修改文件的修改时间。</li><li>最后在文件夹中按照修改时间排序就可以了。</li></ol><p>代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">stinfo = os.stat(<span class="string">'path'</span>) <span class="comment">#stinfo可以当作具有十个元素的列表使用</span></span><br><span class="line">print(stinfo)</span><br><span class="line">atime,mtime = stinfo[<span class="number">-3</span>], stinfo[<span class="number">-2</span>]</span><br><span class="line">os.utime(<span class="string">'path'</span>,(atime,mtime))</span><br></pre></td></tr></table></figure></p><p>其中atime是access time，mtime是modified time。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> sort </tag>
            
            <tag> utime </tag>
            
            <tag> stat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用ssh反向代理进行内网穿透</title>
      <link href="/2018/12/20/ss-fCNR/"/>
      <url>/2018/12/20/ss-fCNR/</url>
      
        <content type="html"><![CDATA[<p>之前我们介绍过使用ngrok和n2n这样的工具来进行内网穿透。这样的工具自己用当然是很棒，但是很多时候亲朋好友会遇到一些问题需要你用ssh连上帮忙解决的时候，以上两个工具配置起来还是太麻烦了。用ssh的好处是几乎每个现代的计算机上都会自带ssh工具，省去了配置的麻烦。</p><h1 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h1><p><code>ssh -fCNL *:6789:localhost:9876:localhost</code><br>将6789端口的ssh请求转发到9876端口上面，<code>*</code>表示接受来自所有ip的请求。</p><h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><p><code>ssh -fCNR 9876:localhost:22 server_user@server.domain -p 22</code><br>建立本地22端口到服务器9876端口的ssh反向代理。在被操作的机器上面执行这句命令，随后会要求输入密码，输入服务器上对应用户的密码即可。</p><h1 id="登录ssh"><a href="#登录ssh" class="headerlink" title="登录ssh"></a>登录ssh</h1><p>这时候配置已经完成，随便找一台电脑输入<code>ssh client_user@erver.domain -p 6789</code>即可登录到客户机的ssh。</p><p><strong>这种方法的缺陷在于一段时间不用之后ssh反向代理会自动断开，因此不适合长久的部署。但是胜在操作简单，应个急还是很不错的</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用n2n搭建虚拟局域网</title>
      <link href="/2018/12/20/n2n/"/>
      <url>/2018/12/20/n2n/</url>
      
        <content type="html"><![CDATA[<p>n2n是一个P2P（peer to peer）的网络工具。与我们之前介绍过的ngrok不同，n2n不是简单的将端口暴露到具有公有ip的服务器上，而是存在一个supernode，supernode的作用是帮助client完成点到点的连接，完成连接之后客户机相当于处在同一个局域网内。<br>n2n项目页面：<a href="https://github.com/ntop/n2n" target="_blank" rel="noopener">https://github.com/ntop/n2n</a></p><h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><p>这里以Ubuntu客户端为例<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install subversion build-essential libssl-dev autoconf</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ntop/n2n.git</span><br><span class="line"><span class="built_in">cd</span> n2n</span><br><span class="line">./autogen</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><p><strong>运行服务端程序</strong><br><code>supernode -l 5000 -v</code><br>这句命令表示监听5000端口，<code>-v</code>用于输出日志，便于调试。</p><h1 id="客户端安装"><a href="#客户端安装" class="headerlink" title="客户端安装"></a>客户端安装</h1><h2 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h2><p><code>brew install autoconf</code><br><code>brew install automake</code><br><code>brew cask install tuntap</code>  这一步需要管理员权限，安装完成后需要在<code>System Preferences → Security &amp; Privacy → General</code>中允许程序运行。参考这个页面：<a href="https://github.com/ntop/n2n/blob/master/doc/n2n_on_MacOS.txt" target="_blank" rel="noopener">https://github.com/ntop/n2n/blob/master/doc/n2n_on_MacOS.txt</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/include</span><br><span class="line">$ ln -s ../opt/openssl/include/openssl .</span><br></pre></td></tr></table></figure><p>然后同样的，进入n2n文件夹，执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./autogen</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><p><strong>运行客户端程序</strong><br><code>sudo /usr/local/sbin/edge -d edge0 -a 10.0.0.10 -c mynetwork -u 1000 -g 1000 -k passwd -l server-ip:5000 -m ae:e0:4f:e7:47:5b</code><br>参数说明：</p><blockquote><p>“-a &lt;IP地址&gt;”选项（静态地）指定了分配给 TAP 接口的 VPN 的 IP 地址。如果你想要使用 DHCP，你需要在其中一台边缘节点上配置一台 DHCP 服务器，然后使用“-a dhcp:0.0.0.0”选项来代替。<br>  “-c &lt;组名&gt;”选项指定了 VPN 组的名字（最大长度为 16 个字节）。这个选项可以被用来在同样一组节点中创建多个 VPN。<br>  “-u”和“-g”选项被用来在创建一个 TAP 接口后降权放弃 root 权限。edge 守护进程将会作为指定的用户/组 ID 运行。<br>  “-k &lt;密钥&gt;”选项指定了一个由 twofish 加密的密钥来使用。如果你想要将密钥从命令行中隐藏，你可以使用 N2N_KEY 环境变量。<br>  “-l &lt;IP地址:端口&gt;”选项指定了超级节点的监听 IP 地址和端口号。为了冗余，你可以指定最多两个不同的超级节点（比如 -l &lt;超级节点 A&gt; -l &lt;超级节点 B&gt;）。<br>  “-m ”给 TAP 接口分配了一个静态的 MAC 地址。不使用这个参数的话，edge 命令将会随机生成一个 MAC 地址。事实上，为一个 VPN 接口强制指定一个静态的 MAC 地址是被强烈推荐的做法。否则，比如当你在一个节点上重启了 edge 守护程序的时候，其它节点的 ARP 缓存将会由于新生成的 MAC 地址而遭到污染，它们将不能向这个节点发送数据，直到被污染的 ARP 记录被消除。</p></blockquote><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>Ubuntu客户机下的安装与服务器是一样的。</p><p><strong>运行客户端程序</strong><br><code>sudo /usr/sbin/edge -d edge0 -a 10.0.0.11 -c mynetwork -u 1000 -g 1000 -k  passwd -l sparkydog.top:2333 -m ae:e0:4f:e7:47:5c</code></p><p><strong>测试连接</strong><br>在客户机A中ping客户机B的虚拟ip地址，如10.0.0.10 ，如果ping通，说明配置成功。<br>edge是一个后台常驻进程，如果想要停止edge，需要找到对应pid手动kill。<br>使用命令<code>ps aux | grep edge</code>或者<code>sudo lsof -t -i:5644</code>可以得到edge进程的pid</p><h2 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h2><p>openwrt路由器直接运行<code>opkg install n2n</code>就可以。我的路由器是小米的R2D，不能直接使用opkg的源。<br>我使用了一个针对小米路由器的第三方的工具箱，项目页面： <a href="https://github.com/monlor/Monlor-Tools" target="_blank" rel="noopener">https://github.com/monlor/Monlor-Tools</a><br>通过工具箱可以安装Entware。Entware有自己的仓库，同样使用opkg进行包管理，比原生的仓库具有更好的兼容性。<br>安装Entware后运行<code>source /etc/profile</code>。<br>然后就可以通过opkg安装n2n了。</p><p>这样，我们所有的主机设备和路由器都进入了一个虚拟的局域网内，机器之间可以方便的互相访问。</p><h1 id="管理vlan中的节点"><a href="#管理vlan中的节点" class="headerlink" title="管理vlan中的节点"></a>管理vlan中的节点</h1><p>很多时候我们需要查询当前vlan中的节点ip，使用<code>sudo nmap -sP 10.0.0.0-255</code>进行查看。</p>]]></content>
      
      
      
        <tags>
            
            <tag> n2n </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>提升编程效率的玄学方法</title>
      <link href="/2018/12/18/interesting-comment/"/>
      <url>/2018/12/18/interesting-comment/</url>
      
        <content type="html"><![CDATA[<p>众所周知， 天气、季节、坐姿、朝向、饱食度、疲劳度等诸多因素会对程序员的编程效率产生影响。其中心情也是影响编程效率的一个重要因素。<br>在输出或者注释中加入一些神奇的ascii图案，能够显著的提高心情。<br><a href="https://www.text-image.com/convert/ascii.html" target="_blank" rel="noopener">https://www.text-image.com/convert/ascii.html</a> 这个网站可以从图像中生成对应的ascii图案。<br><a href="http://patorjk.com/software/taag/" target="_blank" rel="noopener">http://patorjk.com/software/taag/</a> 这个网站可以输入文字，生成巨大的ascii标语图案。<br>我收集了一些ascii图案，整理成一个python的类以便使用。</p><script src="https://gist.github.com/sparkydogX/bca7590fd51c9cffd38824d65f69b5c8.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> comments </tag>
            
            <tag> interesting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用metapost作图</title>
      <link href="/2018/12/18/metapost/"/>
      <url>/2018/12/18/metapost/</url>
      
        <content type="html"><![CDATA[<p>metapost是一个历史悠久的作图工具，生成的是postscript矢量图，在一些领域有比较多的使用。<br>本文讲述如何在Ubuntu下安装使用metapost。<br>metapost的作者是大名鼎鼎的Donald Knuth，也是tex的主要作者。<br>在Ubuntu中想使用metapost首先要安装tex。<br><code>sudo apt-get install texlive</code><br><code>sudo apt-get install texlive-metapost</code><br>安装完成后输入命令：<br><code>mpost myfigure.mp</code><br>即可从描述文件myfigure.mp生成ps矢量图。<br>metapost有个扩展metafun，常常会一起使用。<br><code>sudo apt-get install context</code><br>使用时的指令为：<br><code>mpost --mem=metafun myfigure.mp</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> metapost </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Jupyter Notebook中更新图像</title>
      <link href="/2018/12/14/jupyter-udate-image-in-single-cell/"/>
      <url>/2018/12/14/jupyter-udate-image-in-single-cell/</url>
      
        <content type="html"><![CDATA[<p>Jupyter Notebook是一个非常好用的工具。使用pyplot在Jupyter Notebook中作图可以直接展示在Cell中，有时候我们需要刷新图像的内容，或者希望能产生动图。为了这一效果，我们需要用到display以及一些控件。</p><p><script src="https://gist.github.com/sparkydogX/41b92905e67b8f0214515df92e94c86f.js"></script><br>这段代码产生一个显示区域和一个button，每次点击button就会刷新图像。<br>如果需要播放视频，根据需要的帧率运行sleep命令即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> jupyter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用pyplot在一张图上绘制多个直方图</title>
      <link href="/2018/12/13/multi-hist-pyplot/"/>
      <url>/2018/12/13/multi-hist-pyplot/</url>
      
        <content type="html"><![CDATA[<p>在一张图上绘制多个直方图的关键在于透明度alpha的设置，代码如下：</p><p><script src="https://gist.github.com/sparkydogX/1cfdc865d84d531b1da9a9524f846cde.js"></script><br>效果如下：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/2018-12-13.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
            <tag> pyplot </tag>
            
            <tag> histogram </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在本地部署SciNote</title>
      <link href="/2018/12/13/scinote-deploy/"/>
      <url>/2018/12/13/scinote-deploy/</url>
      
        <content type="html"><![CDATA[<p>SciNote是一个开源的ELN（Electronic Lab Notebook）, Github页面:<a href="https://github.com/biosistemika/scinote-web" target="_blank" rel="noopener">https://github.com/biosistemika/scinote-web</a><br>有一个在线服务<a href="https://www.scinote.net" target="_blank" rel="noopener">SciNote</a>, 但是国内网速很慢, 难以使用.<br>由于scinote开源，因此可以在本地部署。</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ol><li><p>获取源代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/biosistemika/scinote-web.git</span><br></pre></td></tr></table></figure></li><li><p>创建文件<code>config/application.yml</code><br> <a href="https://github.com/biosistemika/scinote-web/wiki/Environmental-variables" target="_blank" rel="noopener">对应变量说明</a></p></li><li>环境要求:</li></ol><ul><li><code>make</code>,</li><li><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a>,</li><li><a href="https://github.com/docker/compose" target="_blank" rel="noopener">docker-compose</a>,</li><li>3000端口</li></ul><ol start="5"><li>确认安装权限<br> 如果在Ubuntu下, 运行<code>sudo -i</code>获取sudo权限</li></ol><h1 id="开发者环境"><a href="#开发者环境" class="headerlink" title="开发者环境"></a>开发者环境</h1><ol start="6"><li>依次执行以下命令:<br> <code>make docker</code><br> <code>make run</code><br> 等待执行完毕可以看到服务已经运行在3000端口,     然后在命令行中<code>Ctrl + C</code>停止服务.<br> <a href="https://github.com/biosistemika/scinote-web/wiki/Build-&amp;-run" target="_blank" rel="noopener">参考页面</a></li><li><p>执行<code>make cli</code>进入docker container, 依次执行以下语句:  </p><ul><li><code>rails db:drop</code></li><li><code>rails db:create</code></li><li><code>rails db:migrate</code></li><li><code>rails db:seed</code></li><li><code>exit</code></li></ul></li><li><p>到这里已经可以在<a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 看到有服务在运行了, 但是我运行到这一步的时候, 显示的是错误页面. 我检查之后发现container下面的public文件夹几乎是空的. 这个项目使用的是前端webpacker + 后端rails. 我推测是没有编译webpacker导致的问题, 但是我对于这两个工具都相当不熟悉, 没能找到编译的方法. 如果是对于这两个工具比较熟悉的朋友, 应该编译一下就能用了. 尝试编译的朋友请在评论区留个言~<br>我没办法只能转向生产环境</p></li></ol><h1 id="生产环境"><a href="#生产环境" class="headerlink" title="生产环境"></a>生产环境</h1><ol start="9"><li>依次执行以下语句:<br> <code>make config-production</code><br> <code>make docker-production</code><br> <code>make database-production</code></li><li>启动服务:<br><code>docker-compose -f ./docker-compose.production.yml up</code><br>如果想在后台运行, 使用<code>docker-compose -f ./docker-compose.production.yml up -d</code></li><li>此时在<a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 已经可以正常使用了.<br><a href="https://github.com/biosistemika/scinote-web/wiki/Production-mode#updating-scinote-installation-running-in-production-mode" target="_blank" rel="noopener">参考页面</a></li></ol><h1 id="备份数据"><a href="#备份数据" class="headerlink" title="备份数据"></a>备份数据</h1><p>需要备份的数据有postgres数据库中的数据和系统文件, 以及<code>config/application.yml</code>和<code>production.env</code>文件.</p><h2 id="备份postgresql数据库"><a href="#备份postgresql数据库" class="headerlink" title="备份postgresql数据库"></a>备份postgresql数据库</h2><p><code>docker exec scinote_db_production pg_dump -h localhost -p 5432 -U postgres -d scinote_production -c -b -f /home/db.bak</code><br><code>docker cp scinote_db_production:/home/db.bak  /your/bakup/path/</code></p><h2 id="备份文件系统中的数据"><a href="#备份文件系统中的数据" class="headerlink" title="备份文件系统中的数据"></a>备份文件系统中的数据</h2><p><code>docker cp scinote_web_production:/usr/src/app/public/system /your/bakup/path/</code></p><h2 id="定期执行备份"><a href="#定期执行备份" class="headerlink" title="定期执行备份"></a>定期执行备份</h2><p>将上述命令编写成脚本, 使用crontab定期执行备份.<br>这里也可以结合以前提到过的bypy工具包, 定期备份到百度云.<br>我的备份脚本：</p><script src="https://gist.github.com/sparkydogX/38eb045791bfd9f4697612f21850acd2.js"></script><h1 id="恢复数据"><a href="#恢复数据" class="headerlink" title="恢复数据"></a>恢复数据</h1><p>如果是在另外一台主机上恢复数据, 需要将备份的<code>config/application.yml</code>和<code>production.env</code>文件拷贝到对应位置.</p><h2 id="恢复postgresql数据库"><a href="#恢复postgresql数据库" class="headerlink" title="恢复postgresql数据库"></a>恢复postgresql数据库</h2><ul><li>拷贝数据到container:<br><code>docker cp db.bak scinote_db_production:/home/db.bak</code></li><li>进入scinote_db_production的container,执行<br><code>psql -h localhost -p 5432 -U postgres -d scinote_production  -f /home/db.bak</code><br><code>docker cp ~/Documents/sciweb-data-bak/system/. scinote_web_production:/usr/src/app/public/system/</code><br><code>make docker-production</code></li></ul><h2 id="恢复文件系统中的数据"><a href="#恢复文件系统中的数据" class="headerlink" title="恢复文件系统中的数据"></a>恢复文件系统中的数据</h2><ul><li>拷贝数据到container:<br><code>docker cp /your/bakup/path/ scinote_web_production:/usr/src/app/public/system</code></li></ul><h2 id="更新源文件"><a href="#更新源文件" class="headerlink" title="更新源文件"></a>更新源文件</h2><ol><li>重建docker镜像: <code>make docker-production</code></li><li>迁移数据:<ul><li><code>make cli-production</code></li><li><code>rails db:migrate</code></li></ul></li><li>重启docker container<br> <code>docker-compose -f ./docker-compose.production.yml up -d</code></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> scinote </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在PC和服务器上部署elabfw</title>
      <link href="/2018/12/11/elabfw/"/>
      <url>/2018/12/11/elabfw/</url>
      
        <content type="html"><![CDATA[<p>elabfw是一个开源的实验记录工具. 可以自由的部署在个人PC或者服务器上.<br>官方安装文档:<a href="https://doc.elabftw.net/install.html" target="_blank" rel="noopener">https://doc.elabftw.net/install.html</a></p><h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><p>首先要安装docker, 如果网络环境允许, 可以跟随<a href="https://docs.docker.com/compose/install/这个页面上的指示" target="_blank" rel="noopener">https://docs.docker.com/compose/install/这个页面上的指示</a>. 但是我安装的时候网速相当慢, 后来使用国内的镜像代替.<br>我的安装步骤如下:</p><ol><li><p>安装docker的依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure></li><li><p>下载deb文件<br>我下载的是中科大的镜像网站上的文件.链接: <a href="http://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/dists/xenial/pool/stable/amd64/docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/dists/xenial/pool/stable/amd64/docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb</a>   </p></li><li><p>安装deb文件<br><code>sudo deb -i docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb</code>  </p></li><li><p>安装<code>Docker Compose</code><br>我的安装参考这个页面:<a href="https://docs.docker.com/compose/install/#master-builds" target="_blank" rel="noopener">https://docs.docker.com/compose/install/#master-builds</a><br><code>sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.23.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</code><br><code>sudo chmod +x /usr/local/bin/docker-compose</code><br>测试是否安装成功: <code>docker-compose --version</code>  </p></li><li><p>安装dialog<br><code>sudo apt-get install dialog</code></p></li></ol><h1 id="安装eLabFTW"><a href="#安装eLabFTW" class="headerlink" title="安装eLabFTW"></a>安装eLabFTW</h1><ol><li><p>安装elabctl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get the program (a bash script)</span></span><br><span class="line">curl -sL https://get.elabftw.net -o elabctl &amp;&amp; chmod +x elabctl</span><br><span class="line"><span class="comment"># add it to a directory in your $PATH</span></span><br><span class="line">sudo mv elabctl /usr/<span class="built_in">local</span>/bin/</span><br></pre></td></tr></table></figure></li><li><p>配置elabctl<br><code>elabctl install</code></p></li><li><p>(可选)编辑配置文件<br>配置文件位置:<code>/etc/elabftw.yml</code></p></li><li><p>启动eLabFTW<br><code>sudo elabctl start</code></p></li></ol><h1 id="使用eLabFTW"><a href="#使用eLabFTW" class="headerlink" title="使用eLabFTW"></a>使用eLabFTW</h1><p>eLabFTW默认运行在443端口, 因此访问https://&lt;your-elabftw-site.org&gt; (或者 https://<ip address>)<br>注册的第一个账户会成为管理员账户.<br>之后应当在设置界面配置一个SMTP账户, 确保在忘记密码的时候可以发送邮件到注册的邮箱, 否则忘记密码之后是无法找回的, 切记!  </ip></p><h2 id="备份数据"><a href="#备份数据" class="headerlink" title="备份数据"></a>备份数据</h2><p><code>sudo elabctl backup</code><br>对应script: <a href="https://gist.github.com/NicolasCARPi/5d9e2599857a148a54b0" target="_blank" rel="noopener">https://gist.github.com/NicolasCARPi/5d9e2599857a148a54b0</a><br>script中的SQL user/password可以在docker container中的/elabftw/config.php找到.<br>相关页面:<a href="https://doc.elabftw.net/backup.html#backup" target="_blank" rel="noopener">https://doc.elabftw.net/backup.html#backup</a></p><h2 id="恢复备份"><a href="#恢复备份" class="headerlink" title="恢复备份"></a>恢复备份</h2><p>恢复页面恢复数据库(elabftw):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">unzip uploaded_files-YYYY-MM-DD.zip</span><br><span class="line">mv var/elabftw/web/* /var/elabftw/web</span><br><span class="line">mv etc/elabftw.yml /etc/elabftw.yml</span><br><span class="line"># now fix the permissions</span><br><span class="line">chown -R 100:101 /var/elabftw/web</span><br><span class="line">chmod 600 /etc/elabftw.yml</span><br></pre></td></tr></table></figure></p><p>恢复数据库(在mysql的container中操作):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gunzip mysql_dump-YYYY-MM-DD.sql.gz # uncompress the file</span><br><span class="line">docker cp mysql_dump-YYYY-MM-DD.sql mysql:/ # copy it inside the mysql container</span><br><span class="line">docker exec -it mysql bash # spawn a shell in the mysql container</span><br><span class="line">mysql -uroot -p # login to mysql prompt</span><br><span class="line"># here you type the password you put in MYSQL_ROOT_PASSWORD in the /etc/elabftw.yml file</span><br><span class="line">Mysql&gt; drop database elabftw; # delete the brand new database</span><br><span class="line">Mysql&gt; create database elabftw; # create a new one</span><br><span class="line">Mysql&gt; use elabftw; # select it</span><br><span class="line">Mysql&gt; source mysql_dump-YYYY-MM-DD.sql; # import the backup</span><br><span class="line">Mysql&gt; exit;</span><br></pre></td></tr></table></figure></p><p>目前存在的问题是在目录页面显示中文的时候会乱码, 这是目前对中文的支持不完善导致的. 解决方案是在mysql的docker container中设置lang为UTF-8。使用<code>locale -a</code>可以看到当前可用的语言。</p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> elabfw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python读写excel文件</title>
      <link href="/2018/12/09/excel-python/"/>
      <url>/2018/12/09/excel-python/</url>
      
        <content type="html"><![CDATA[<p>使用Python可以处理Excel文件。<br>读取数据：<a href="https://github.com/python-excel/xlrd" target="_blank" rel="noopener">https://github.com/python-excel/xlrd</a><br>写数据：<a href="https://github.com/python-excel/xlwt" target="_blank" rel="noopener">https://github.com/python-excel/xlwt</a><br>写数据使用示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">style0 = xlwt.easyxf(<span class="string">'font: name Times New Roman, color-index red, bold on'</span>,</span><br><span class="line">    num_format_str=<span class="string">'#,##0.00'</span>)</span><br><span class="line">style1 = xlwt.easyxf(num_format_str=<span class="string">'D-MMM-YY'</span>)</span><br><span class="line"></span><br><span class="line">wb = xlwt.Workbook()</span><br><span class="line">ws = wb.add_sheet(<span class="string">'A Test Sheet'</span>)</span><br><span class="line"></span><br><span class="line">ws.write(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1234.56</span>, style0)</span><br><span class="line">ws.write(<span class="number">1</span>, <span class="number">0</span>, datetime.now(), style1)</span><br><span class="line">ws.write(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">ws.write(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ws.write(<span class="number">2</span>, <span class="number">2</span>, xlwt.Formula(<span class="string">"A3+B3"</span>))</span><br><span class="line"></span><br><span class="line">wb.save(<span class="string">'example.xls'</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>防止ssh的暴力破解</title>
      <link href="/2018/12/09/block-ssh-connection/"/>
      <url>/2018/12/09/block-ssh-connection/</url>
      
        <content type="html"><![CDATA[<p>最近登陆服务器的时候，发现有很多未知的ssh登录尝试。CentOS系统中ssh登录的日志文件在<code>/var/log/secure</code>。使用<code>cat /var/log/secure | grep Failed | tail -50</code>可以查看最近的50条记录。我查看这个文件的时候发现有一个ip尝试了7000次登录，并且在我登录期间仍然在不停进行尝试，真是丧心病狂，令人发指。必须要采取措施限制这些奇怪的行为。</p><h1 id="修改SSH默认端口"><a href="#修改SSH默认端口" class="headerlink" title="修改SSH默认端口"></a>修改SSH默认端口</h1><p>ssh的默认端口是22，修改端口会增加被破解的障碍。</p><ol><li>首先选一个你喜欢的端口，只要没被占用就可以。然后在防火墙中打开这一端口。</li><li>sshd的配置文件位于<code>/etc/ssh/sshd_config</code>，修改端口设置之后重启sshd服务。<br>大多数情况下到这一步端口已经修改好了。但是有些主机商（比如linode）会要求使用semanger声明修改。</li><li>(Option) 安装 policycoreutils-python：<code>yum install policycoreutils-python</code>,执行<code>semanage port -a -t ssh_port_t -p tcp $PORT</code>。</li><li>运行<code>ss -tnlp | grep ssh</code>查看端口是否正确。<h1 id="自动封禁多次登录失败的IP"><a href="#自动封禁多次登录失败的IP" class="headerlink" title="自动封禁多次登录失败的IP"></a>自动封禁多次登录失败的IP</h1>将多次登录失败的IP添加到<code>/etc/hosts.deny</code>文件。<br>创建一个脚本：<code>/usr/local/bin/autodeny.sh</code>  <script src="https://gist.github.com/sparkydogX/1837a6e1a2286df9b2d03e9aa798f360.js"></script></li></ol><p>在命令行中运行<code>crontab -e</code>，添加一行：<code>*/10 * * * * sh /usr/local/bin/autodeny.sh</code>，每十分钟自动执行一次。当登录失败超过10次之后IP会被加入黑名单。记得同时将你常用的IP添加到<code>/etc/hosts.allow</code>文件中，以免出现乌龙。</p>]]></content>
      
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查看正在运行的jupyter notebook的token</title>
      <link href="/2018/12/07/passwd-of-running-jupyter/"/>
      <url>/2018/12/07/passwd-of-running-jupyter/</url>
      
        <content type="html"><![CDATA[<p>在服务器上开一个jupyter notebook，本地通过浏览器访问，是很方便的一件事。但是过了很久访问的时候，有时会忘记jupyter notebook的token。<br>在服务器上执行<code>jupyter notebool list</code>可以看到正在运行的jupyter以及对应的token。</p>]]></content>
      
      
      
        <tags>
            
            <tag> jupyter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查看命令行命令的时间</title>
      <link href="/2018/12/07/terminal-history-time/"/>
      <url>/2018/12/07/terminal-history-time/</url>
      
        <content type="html"><![CDATA[<p>在Linux命令行中，输入<code>history</code>可以看到历史指令。<br>但是这个指令默认不带时间信息，输入<code>HISTTIMEFORMAT=&quot;%d/%m/%y %T &quot;</code>，然后执行<code>history</code>，可以得到含有时间信息的历史指令。<br>将这一语句加入<code>~/.bashrc</code>文件中可以在bash启动时自动加载这一语句。</p>]]></content>
      
      
      
        <tags>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在python中调用shell命令并获得返回值</title>
      <link href="/2018/12/07/python-terminal/"/>
      <url>/2018/12/07/python-terminal/</url>
      
        <content type="html"><![CDATA[<script src="https://gist.github.com/sparkydogX/e88b95586c843398f057bc28ce602277.js"></script><p>代码中的cmd变量是bash中获得当前git repo的branch名字的命令。<br>测试算法的时候我习惯创建多个branch来探索各个因素的影响，结合返回的变量可以方便的将不同branch的结果保存到统一的并且gitignore的log文件夹下。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用个人服务器接收邮件</title>
      <link href="/2018/12/05/receive-mail-on-server-lbox/"/>
      <url>/2018/12/05/receive-mail-on-server-lbox/</url>
      
        <content type="html"><![CDATA[<p>首先需要说明的是，搭建完整的个人邮箱服务器不是一个好主意，部署复杂是一方面，部署之后它仍然需要你大量的时间和精力去维持垃圾邮件过滤和反病毒文件的工作。<br>但是能够使用个人服务器——意味着用户名和域名都属于你自己的——来接收各种无关紧要的邮件，仍然是一件有趣的事情，你可以随心所欲的变换用户名，并且不需要手机验证。<br>这篇文章我会讲述最简单的部署方法，本文使用的是阿里云服务器，搭载Ubuntu系统。</p><h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><p>首先到你的域名商那里，设置域名解析</p><ol><li>MX记录<br>添加一条MX记录，主机记录为<code>@</code>，记录值为’mail.example.org’</li><li>A记录<br>添加一条A记录，主机记录为‘mail’，记录值为邮箱服务器的ip</li></ol><h1 id="配置PTR记录"><a href="#配置PTR记录" class="headerlink" title="配置PTR记录"></a>配置PTR记录</h1><p>PTR记录用于反向地址解析，到主机商处将PTR记录设置成邮箱服务器域名。</p><h1 id="设置Hostname"><a href="#设置Hostname" class="headerlink" title="设置Hostname"></a>设置Hostname</h1><p>使用<code>hostname -f</code>查看hostname与域名是否一致。<br>如果不一致，需要改成一致。</p><h1 id="安装postfix"><a href="#安装postfix" class="headerlink" title="安装postfix"></a>安装postfix</h1><p><code>sudo apt-get install postfix</code><br>安装时选择第二个选项，Internet连接。</p><h1 id="安装mailutils"><a href="#安装mailutils" class="headerlink" title="安装mailutils"></a>安装mailutils</h1><p><code>sudo apt-get install mailutils</code></p><h1 id="发送邮件"><a href="#发送邮件" class="headerlink" title="发送邮件"></a>发送邮件</h1><p><code>echo &quot;hello&quot; | mail -s &quot;test&quot; example@example.org</code><br>很大的可能你会发现这一步失败了，这时查看日志文件<code>/var/log/mail.log</code>如果看到连接超时的错误，说明很有可能你的主机商禁用了25端口。<br>可以使用<code>traceroute</code>工具尝试连接目标邮箱服务器:<code>traceroute -T -p 25 xxx.xxx</code>，如果看到一排<code>***</code>，说明无法使用25端口。<br>主机商为了防止垃圾邮件禁用了25端口，阿里云可以申请解禁25端口，但是仍然不允许假设私人邮箱服务器向外发送邮件。可以通过更换邮件协议与端口的方法解决这个问题，但是这已经超出了本文的范围。在我的试验中，阿里云中的邮箱服务器虽然不能向外发送邮件，但是接收邮件是没有问题的。<br>当然，你也可以选择更换主机商，Linode是没有这一限制的。</p><h1 id="接收邮件"><a href="#接收邮件" class="headerlink" title="接收邮件"></a>接收邮件</h1><p>首先用你的其余的邮箱发送一封邮件，收件人是<a href="mailto:`user@example.org" target="_blank" rel="noopener">`user@example.org</a><code>。其中user是你设置服务器时的用户，域名是你的邮箱域名，如果是作为root用户设置的，user就是root。如果没有问题，在服务器中使用</code>mail`命令可以看到有一封新的邮件。<br>如果有附件，使用write命令可以保存。</p><p>参考网页：<a href="https://www.linuxdashen.com/ubuntu%E6%90%AD%E5%BB%BA%E7%AE%80%E6%98%93postfix%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">https://www.linuxdashen.com/ubuntu%E6%90%AD%E5%BB%BA%E7%AE%80%E6%98%93postfix%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1%E5%99%A8</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> server </tag>
            
            <tag> mail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python建立HTTP文件服务器</title>
      <link href="/2018/12/05/simple-http-server-with-python/"/>
      <url>/2018/12/05/simple-http-server-with-python/</url>
      
        <content type="html"><![CDATA[<p>很多时候我们需要快速地查看服务器上的文件，或者将文件分享给别人。<br>在Linux服务器上，这个需求用一行指令即可实现，首先cd到需要分享的文件夹，然后执行：</p><ul><li><strong>Python 2:</strong> <code>python -m SimpleHTTPServer 8080</code>  </li><li><strong>Python 3:</strong> <code>python -m http.server 8080</code><br>这里指定的端口是8080，在浏览器中使用<a href="http://yoursite:8080即可访问。" target="_blank" rel="noopener">http://yoursite:8080即可访问。</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过linux终端发送邮件</title>
      <link href="/2018/12/04/email-linux-terminal/"/>
      <url>/2018/12/04/email-linux-terminal/</url>
      
        <content type="html"><![CDATA[<p>很多时候我们会希望程序在执行完毕或者遇到问题的时候给我们发个邮件，最好附带日志文件，这样即便人不在电脑旁边也能及时的获知程序运行情况。<br>mailutils工具很好的解决了这一个问题。<br>mailutils在大部分系统中可以通过包管理器安装，在Ubuntu下使用<code>sudo apt-get install mailutils</code> ，在MacOS中通过brew使用<code>brew install mailutils</code>安装。</p><h1 id="发送邮件"><a href="#发送邮件" class="headerlink" title="发送邮件"></a>发送邮件</h1><p><code>echo -e &quot;hello,\nworld.&quot; | mail -s &quot;example&quot; example@example.org</code><br>其中‘echo -e’为发送的内容，-e表明允许转义符，-s后面跟的是邮件主题，<a href="mailto:example@example.org" target="_blank" rel="noopener">example@example.org</a>是目标邮箱地址。</p><h1 id="发送附件"><a href="#发送附件" class="headerlink" title="发送附件"></a>发送附件</h1><p><code>echo -e &quot;hello,\nworld.&quot; | mail -s &quot;example&quot; example@example.org -A log.txt</code><br>使用-A指令指定附件</p><h1 id="配置mailutils"><a href="#配置mailutils" class="headerlink" title="配置mailutils"></a>配置mailutils</h1><p>配置文件位置是’/etc/mailutils.rc’，如果没有的话需要手动创建。</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> email </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在python中自动实现嵌套的字典</title>
      <link href="/2018/12/03/nested-dict-python/"/>
      <url>/2018/12/03/nested-dict-python/</url>
      
        <content type="html"><![CDATA[<p>在python中，我们常常会用到嵌套字典，当使用到嵌套字典的时候，必须显式地指明字典变量，否额就会报错。<br>为了解决这一问题，我们可以构建一个Dict的子类：</p><p><script src="https://gist.github.com/sparkydogX/9a5cf522ea672b760350de89c3896aa9.js"></script><br>在这个类别中，使用<code>__missing__</code>方法来定义键值缺失时的行为，<code>walk</code>方法提供对字典中所有元素的遍历</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> dict </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在命令行中使用gnuplot快速查看数据</title>
      <link href="/2018/12/03/gnuplot-pipe/"/>
      <url>/2018/12/03/gnuplot-pipe/</url>
      
        <content type="html"><![CDATA[<p>很多时候在处理log文件的时候，我们希望能够绘制数值随时间变化曲线。<br>gnuplot是一个命令行作图工具，具有很强大的交互式作图能力。而结合管道功能也可以很方便地满足我的需求。<br>我的log文件如下：</p><blockquote><p>Epoch    LR    Train Loss    Val Loss    Train Acc    Val Acc<br>  1.000000    0.000250    0.006155    0.006397    0.210200    0.371615<br>  2.000000    0.000250    0.004988    0.062103    0.405610    0.490865<br>  3.000000    0.000250    0.004645    0.011359    0.513939    0.563074<br>  4.000000    0.000250    0.004415    0.004224    0.573226    0.632654<br>  5.000000    0.000250    0.004252    0.004261    0.611022    0.667559        </p></blockquote><p>首先进行一些文本处理：去除第一行标题，然后选择第1列作为横坐标，第6列作为纵坐标，最后将数据送进gnuplot里作图即可。<br>命令行如下：<br><code>cat ./log.txt | sed &#39;1d&#39; | awk &#39;{print $1&quot;\t&quot;$6}&#39; | gnuplot -p  -e  &quot;plot &#39;&lt;cat&#39;&quot;</code><br>sed指令的作用是删除第一行，awk指令提取指定列，gnuplot命令中-p用来使图像暂停，不会在程序运行完成后直接消失。<br>效果如图：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/loggnuplot.png" alt="img"></p><p>如果是在远程服务器上，可以在gnuplot中设置<code>set terminal dumb</code>，图像会输出在终端窗口中。<br>命令：<br><code>cat ./log.txt | sed &#39;1d&#39; | awk &#39;{print $1&quot;\t&quot;$6}&#39; | gnuplot -p  -e  &quot;set terminal dumb;plot &#39;/dev/stdin&#39;&quot;</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> gnuplot </tag>
            
            <tag> pipe </tag>
            
            <tag> 作图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux系统性能分析笔记</title>
      <link href="/2018/11/30/system-performance-notebook/"/>
      <url>/2018/11/30/system-performance-notebook/</url>
      
        <content type="html"><![CDATA[<h1 id="查看CPU数量"><a href="#查看CPU数量" class="headerlink" title="查看CPU数量"></a>查看CPU数量</h1><p><strong>总核数 = 物理CPU个数 X 每颗物理CPU的核数</strong><br><strong>总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数</strong></p><ol><li><p>查看物理CPU个数<br><code>cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</code></p></li><li><p>查看每个物理CPU中core的个数(即核数)<br><code>cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq</code></p></li><li><p>查看逻辑CPU的个数<br><code>cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</code></p></li></ol><h1 id="平均负载"><a href="#平均负载" class="headerlink" title="平均负载"></a>平均负载</h1><ol><li><p><code>uptime</code><br>输出<code>17:06:20 up 2 days, 17:39,  1 user,  load average: 1.75, 1.59, 1.31</code><br>分别表示<code>当前时间,系统运行时间,正在登录用户数,过去 1 分钟,5 分钟,15 分钟的平均负载</code><br>运行<code>man uptime</code>可以得到平均负载的定义:</p><blockquote><p>System load averages is the average number of processes that are either in a runnable or uninterruptable state.  A process in a runnable state is either using  the  CPU  or waiting  to  use  the  CPU.   A process in uninterruptable state is waiting for some I/O access, eg waiting for disk.  The averages are taken over the three time intervals.<br>Load averages are not normalized for the number of CPUs in a system, so a load average of 1 means a single CPU system is loaded all the time while on  a  4  CPU  system  it means it was idle 75% of the time.</p></blockquote><p>除了正在运行的进程,还有不可中断进程.不可中断状态的进程是正处于内核态关键流程中的进程，并且这些流程是不可打断的，最常见的是等待硬件设备的 I/O 响应，也就是我们在 ps 命令中看到的 D 状态（Uninterruptible Sleep，也称为 Disk Sleep）的进程。<br>当平均负载大于CPU数量时表示出现了过载.</p></li><li><p>压力测试工具<code>stress</code><br>需要通过包管理器进行安装.<br>使用指令<code>stress --cpu 1 --timeout 600</code>可以施加1个CPU的负载,持续600秒.<br>使用指令<code>stress -i 1 --timeout 600</code>模拟io负载.<br>使用指令<code>stress -c 8 --timeout 600</code>模拟8个进程.  </p><p>使用<code>uptime</code>和<code>mpstat -P ALL</code>可以对CPU的状态进行实时的查看.</p></li><li><p>使用<code>pidstat</code>查看当前进程占用CPU的情况<br>使用<code>pidstat -u 5 2</code>命令可以每5s统计一次当前CPU使用情况, 共显示两次.<br>使用<code>pidstat -d</code>可以查看当前进程的IO情况</p></li></ol><h1 id="CPU上下文切换"><a href="#CPU上下文切换" class="headerlink" title="CPU上下文切换"></a>CPU上下文切换</h1><p>系统中的上下文切换可以分为:<strong>系统权限模式切换</strong>,<strong>进程上下文切换</strong>,<strong>线程上下文切换</strong>,<strong>中断上下文切换</strong><br>线程是调度的基本单位，而进程则是资源拥有的基本单位. 同进程内的线程切换，要比多进程间的切换消耗更少的资源.</p><ol><li><p>使用<code>vmstat</code>查看系统整体CPU切换情况<br>运行<code>vmstat 5</code>可以得到如下的结果:</p><blockquote><p>procs ———–memory———- —swap– —–io—- -system– ——cpu—–<br>r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st<br>0  0      0 699912 1015920 6586312    0    0     5    19    3   14  4  7 88  0  0<br>0  0      0 685852 1015920 6586344    0    0     0   171  671 1588  2  1 97  0  0<br>0  0      0 686720 1015924 6586340    0    0     0    42  551 1473  1  1 98  0  0<br>0  0      0 698912 1015924 6586368    0    0     0     7  816 3540  8  2 90  0  0  </p></blockquote><p>以下是<code>man vmstat</code>中对于输出参数的说明.</p><blockquote><p><strong>FIELD DESCRIPTION FOR VM MODE</strong><br>Procs</p><pre><code>r: The number of runnable processes (running or waiting for run time).  b: The number of processes in uninterruptible sleep.  </code></pre><p>Memory  </p><pre><code>swpd: the amount of virtual memory used.  free: the amount of idle memory.  buff: the amount of memory used as buffers.  cache: the amount of memory used as cache.  inact: the amount of inactive memory.  (-a option)  active: the amount of active memory.  (-a option)  </code></pre><p>Swap  </p><pre><code>si: Amount of memory swapped in from disk (/s).  so: Amount of memory swapped to disk (/s).  </code></pre><p>IO  </p><pre><code>bi: Blocks received from a block device (blocks/s).  bo: Blocks sent to a block device (blocks/s).  </code></pre><p>System  </p><pre><code>in: The number of interrupts per second, including the clock.  cs: The number of context switches per second.  </code></pre><p>CPU  </p><pre><code>These are percentages of total CPU time.  us: Time spent running non-kernel code.  (user time, including nice time)  sy: Time spent running kernel code.  (system time)  id: Time spent idle.  Prior to Linux 2.5.41, this includes IO-wait time.  wa: Time spent waiting for IO.  Prior to Linux 2.5.41, included in idle.  st: Time stolen from a virtual machine.  Prior to Linux 2.6.11, unknown.  </code></pre></blockquote></li></ol><ul><li>cs（context switch）是每秒上下文切换的次数。   </li><li>in（interrupt）则是每秒中断的次数。</li><li>r（Running or Runnable）是就绪队列的长度，也就是正在运行和等待 CPU 的进程数。  </li><li>b（Blocked）则是处于不可中断睡眠状态的进程数.</li></ul><ol start="2"><li><p>使用<code>pidstat -w 5</code>查看每个进程的CPU切换情况<br>主要输出中有cswch/s和nvcswch/s两列<br>cswch/s 表示每秒任务所做的自愿上下文切换的总数。当任务阻塞时会发生自愿上下文切换，因为它需要的资源不可用。<br>nvcswch/s 每秒任务所做的非自愿上下文切换的总数。 当任务执行一段时间时，会发生非自愿的上下文切换,因为系统会给每个进程分配时间片段,时间片段到达限定之后就会跳转到别的进程, 作为系统实现多任务的一种方式.<br><code>pidstat -w</code>只显示进程之间的切换次数,<code>pidstat -wt</code>可以将线程之间的切换次数也计算入内.<br>在终端对其排序可使用<code>pidstat -w | sort -k4 -g</code>,表示对第4行排正序  </p></li><li><p>使用<code>sysbench</code>模拟系统多进程调度<br><code>sysbench --num-threads=64 --max-time=60 --max-requests=100000 --test=threads  run</code>指令可以模拟多线程压力测试.</p></li><li><p>查看中断切换情况<br><code>watch -d cat /proc/interrupts</code>查看中断信息. <code>/proc</code>是linux系统提供的虚拟空间, 用于用户空间和内核空间的通信.  </p></li><li><p>查看proc中的文件<br><code>/proc/stat</code> CPU整体活动信息<br><code>/proc/&lt;pid&gt;/stat</code> 进程活动信息<br><code>/proc/&lt;pid&gt;/task/&lt;tid&gt;/stat</code>  线程活动信息  </p></li></ol><h1 id="CPU使用率"><a href="#CPU使用率" class="headerlink" title="CPU使用率"></a>CPU使用率</h1><ol><li><p>查看系统节拍率<br>时钟节拍是特定的周期性中断,时钟节拍率越快,系统的额外开销就越大。越慢则系统响应速度越慢.<br><code>cat /boot/config-$(uname -r) | grep CONFIG_HZ=</code> 可以查看节拍率, 数值表示每秒钟CPU时间中断次数.<br><code>cat /proc/timer_list |grep jiffies</code> 可以查看jiffies的值, 表示启动以来触发的时间中断次数.  </p></li><li><p>使用<code>cat /proc/stat |grep ^cpu</code>  查看CPU情况<br>得到如下结果:</p><blockquote><p>cpu  5126936 5712 7710142 117664694 595706 0 64856 0 0 0<br>cpu0 1469407 1059 2327228 28911946 68524 0 22051 0 0 0<br>cpu1 1504594 1668 2536510 28675459 53180 0 22960 0 0 0<br>cpu2 698222 1269 468605 31543635 49917 0 14812 0 0 0<br>cpu3 1454710 1714 2377798 28533652 424084 0 5031 0 0 0  </p></blockquote><p>使用<code>man proc</code>可以得到每一列参数的说明:  </p><blockquote><pre><code>user   (1) Time spent in user mode.  nice   (2) Time spent in user mode with low priority (nice).  system (3) Time spent in system mode.  idle   (4) Time spent in the idle task.  This value should be USER_HZ times the second entry in the /proc/uptime   pseudo-file.  iowait (since Linux 2.5.41)         (5) Time waiting for I/O to complete.  irq (since Linux 2.6.0-test4)         (6) Time servicing interrupts.   softirq (since Linux 2.6.0-test4)         (7) Time servicing softirqs.  steal (since Linux 2.6.11)         (8) Stolen time, which is the time spent in other operating systems when running in a virtualized environment  guest (since Linux 2.6.24)         (9) Time spent running a virtual CPU for guest operating systems under the control of the Linux kernel.guest_nice (since Linux 2.6.33)         (10) Time spent running a niced guest (virtual CPU for guest operating systems under the control of the Linux kernel).  </code></pre></blockquote><p>CPU使用率的计算去除idle的那一部分即可.<br>但是直接针对这个文件进行计算得到的是开机以来的CPU使用率, 需要查看当前CPU使用率的时候,可以取一段时间, 然后根据这段时间内数据的变化来计算出平均的CPU使用率.<br>在使用<code>top</code>指令进行查看的时候, 计算的是3s内的CPU平均使用率.  </p><h1 id="查看占用CPU最多的函数"><a href="#查看占用CPU最多的函数" class="headerlink" title="查看占用CPU最多的函数"></a>查看占用CPU最多的函数</h1><ol><li>使用<code>perf</code>指令<br>安装perf的时候需要注意, perf与内核的关联十分紧密, 通常会需要<code>sudo apt-get install linux-tools-$(uname -r)</code><br>如果包管理器中找不到对应内核的perf,可以从linux源码中的linux/tools/perf文件夹编译运行.<br>运行<code>perf top</code>会列出使用资源最高的函数, 最后一列会列出函数名, 函数名未知的列出内存地址.<br>执行<code>perf record ls -g</code>可以记录执行ls语句时候的系统调用情况, 结束后使用<code>perf report</code>可以看到结果<br><code>perf top -g -p 1302</code>可以看到pid为1302的进程函数调用情况  </li><li><a href="https://github.com/brendangregg/perf-tools/blob/master/execsnoop" target="_blank" rel="noopener">exescoop</a>工具<br>exescoop是用于检查进程外部exec调用的工具. 有时候系统CPU占用很高, 但是单个进程查不出来, 这时候就有可能是进程在不断的调用比较小的外部进程, 或者是程序在不断的崩溃重启.</li><li><code>pstree</code>可以用于查看进程树</li></ol></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> system performance </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在office中使用latex公式</title>
      <link href="/2018/11/28/latex-equation-in-office/"/>
      <url>/2018/11/28/latex-equation-in-office/</url>
      
        <content type="html"><![CDATA[<p>用过Latex的都知道，Tex语法下的公式编辑与使用word编辑公式的体验简直是天壤之别，幸而目前有一些开源的工具，可以在Word和PowerPoint中使用latex语法编辑公式。<br><em>注：这两款工具只支持Windows平台</em></p><h1 id="texsword"><a href="#texsword" class="headerlink" title="texsword"></a>texsword</h1><p>texsword是一款开源的工具，可以在word中插入latex公式。将<code>texsword.dotm</code>文件放入word的启动文件夹即可使用。下载页面：<a href="https://sourceforge.net/projects/texsword/" target="_blank" rel="noopener">https://sourceforge.net/projects/texsword/</a></p><h1 id="IguanaTex"><a href="#IguanaTex" class="headerlink" title="IguanaTex"></a>IguanaTex</h1><p>IguanaTex同样是一款开源的工具，用于在PowerPoint中插入Latex公式。下载页面：<a href="http://www.jonathanleroux.org/software/iguanatex/" target="_blank" rel="noopener">http://www.jonathanleroux.org/software/iguanatex/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> latex </tag>
            
            <tag> powerpoint </tag>
            
            <tag> word </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在cnetos中添加开机启动的任务</title>
      <link href="/2018/11/22/centos-service-onstart/"/>
      <url>/2018/11/22/centos-service-onstart/</url>
      
        <content type="html"><![CDATA[<h1 id="使用chkconfig"><a href="#使用chkconfig" class="headerlink" title="使用chkconfig"></a>使用chkconfig</h1><p>使用<code>chkconfig --list</code>可以查看当前chkconfig列表中的服务。<br>使用<code>chkconfig yourservice off</code>可以关闭对应服务。<br>使用<code>chkconfig yourservice on</code>可以关闭对应服务。<br>如果想要的服务不在列表中，需要使用<code>chkconfig --add yourservice</code>添加。</p><h1 id="修改-etc-rc-d-rc-local文件"><a href="#修改-etc-rc-d-rc-local文件" class="headerlink" title="修改/etc/rc.d/rc/local文件"></a>修改/etc/rc.d/rc/local文件</h1><p><code>/etc/rc.d/rc.local</code>文件中可以写入需要开启的服务</p><h1 id="设置定时重启"><a href="#设置定时重启" class="headerlink" title="设置定时重启"></a>设置定时重启</h1><p>我的个人服务器常常被折腾的不堪重负，需要定期重启。<br>使用crontab完成这一功能。<br>crontab的作用是设置定时任务。<br><code>crontab -e</code>进入配置文件<br>写入<code>0 0 * * * /sbin/shutdown -r now</code>表示每天零点重启。</p>]]></content>
      
      
      
        <tags>
            
            <tag> chkconfig </tag>
            
            <tag> crontab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matplot绘制饼状图</title>
      <link href="/2018/11/22/patch-plot-matplot/"/>
      <url>/2018/11/22/patch-plot-matplot/</url>
      
        <content type="html"><![CDATA[<p>代码：</p><p><script src="https://gist.github.com/sparkydogX/26e5b475f9aa382525bb660fdf8cb75f.js"></script><br>效果：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/bingzhuangtu.png" alt="img2"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 饼状图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matplot绘制混淆矩阵</title>
      <link href="/2018/11/22/confusion-matrix-matplot/"/>
      <url>/2018/11/22/confusion-matrix-matplot/</url>
      
        <content type="html"><![CDATA[<p>混淆矩阵在对分类任务的结果进行分析的时候是一个非常有用的工具。使用matplotlib可以将混淆矩阵可视化。<br>效果如图：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/confusionmatrix.png" alt="img1"></p><p>代码如下：</p><script src="https://gist.github.com/sparkydogX/5ca591bd3e8198211a11838fa36336dd.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> 混淆矩阵 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Tinyproxy搭建透明代理</title>
      <link href="/2018/11/20/tinyproxy/"/>
      <url>/2018/11/20/tinyproxy/</url>
      
        <content type="html"><![CDATA[<p><a href="https://tinyproxy.github.io/" target="_blank" rel="noopener">Tinyproxy</a>是一款轻量级的http(s)代理工具。<a href="https://github.com/tinyproxy/tinyproxy" target="_blank" rel="noopener">Github页面</a><br><strong>注意：这只是一个透明代理，本身不具备任何传输安全性。</strong></p><h1 id="安装Tinyproxy"><a href="#安装Tinyproxy" class="headerlink" title="安装Tinyproxy"></a>安装Tinyproxy</h1><p>以Ubuntu为例，在服务器上执行<code>sudo apt-get install tinyproxy</code></p><h1 id="配置Tinyproxy"><a href="#配置Tinyproxy" class="headerlink" title="配置Tinyproxy"></a>配置Tinyproxy</h1><p><code>sudo vim /etc/tinyproxy.conf</code><br>修改下面两个部分：<br><code>Port 8888</code>。 8888是默认的端口，将其更改为其他端口。<br><code>Allow 127.0.0.1</code>。设置允许连接的ip和网段，默认全都禁止，如果全注释掉，则表示允许所有连接。<br>需要根据端口相应地修改服务器防火墙的配置</p><h1 id="重启tinyproxy-service"><a href="#重启tinyproxy-service" class="headerlink" title="重启tinyproxy service"></a>重启tinyproxy service</h1><p><code>sudo service tinyproxy restart</code></p><h1 id="配置客户端"><a href="#配置客户端" class="headerlink" title="配置客户端"></a>配置客户端</h1><p>此时http代理服务器就搭建好了，在客户端设置HTTP代理即可。</p><h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><p>在无线网络配置中，选择HTTP代理-&gt;配置代理-&gt;手动，输入<code>http://代理服务器ip:port</code>。<br>配置完成，打开百度或者谷歌，输入ip，返回代理服务器的ip说明配置成功。</p><h2 id="Linux-Terminal"><a href="#Linux-Terminal" class="headerlink" title="Linux Terminal"></a>Linux Terminal</h2><p>在终端中执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://代理服务器ip:port</span><br><span class="line">export httpa_proxy=http://代理服务器ip:port</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> server </tag>
            
            <tag> tinyproxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu中使用安卓模拟器</title>
      <link href="/2018/11/19/android-x86/"/>
      <url>/2018/11/19/android-x86/</url>
      
        <content type="html"><![CDATA[<p>这篇文章介绍如何在Ubuntu中使用安卓模拟器。<br>在Ubuntu中运行android程序并非易事，因为大部分移动设备上运行的android程序都是基于Arm架构的芯片开发的，而在家用的台式机上我们通常使用的是x86的芯片。为了解决这一个问题，两种方案，一个是使用Android Studio提供的Android模拟器，选择arm架构，模拟器就能够运行arm架构下的app。但是这种方法运行的模拟器速度非常缓慢，Android Studio会提示x86架构模拟器速度会是arm的10x以上。为了解决应用兼容性的问题，Intel公司开发了houdini技术。Houdini是intel 研发的ARM binary translator，用于解决当前android部分native应用库兼容跑在x86架构上的技术，它的原理在于把ARM的二进制代码转译为X86指令集，使得可以在X86的CPU上执行。</p><h1 id="安装Genymotion"><a href="#安装Genymotion" class="headerlink" title="安装Genymotion"></a>安装Genymotion</h1><p>由于Android Studio以及那一套SDK工具用起来十分繁琐，而我没有Android开发的需求，只是想单纯的运行android程序，因此我在这里选择了<a href="https://www.genymotion.com/" target="_blank" rel="noopener">Genymotion</a>。Genymotion是一个x86的安卓模拟器软件，个人版可以注册账号免费试用。<br>安装Genymotion需要机器安装有Virtualbox，安装好之后运行Genymotion，在Genymotion中创建一个虚拟的设备，期间会下载所用到的系统镜像，等候片刻。<br>运行虚拟设备，如之前所说，此时只能安装很少量的x86 app。</p><h1 id="解决兼容性问题"><a href="#解决兼容性问题" class="headerlink" title="解决兼容性问题"></a>解决兼容性问题</h1><p>下载对应操作系统版本的Arm Translation文件，<a href="https://drive.google.com/open?id=1-8mFalkCScszpH6zAk8ZsDjdyYNYf5jU" target="_blank" rel="noopener">Android 5.1点这里</a> , <a href="https://drive.google.com/open?id=1_FkMRmo8DKaSNEXD0KtYOGpNzCwF_1Yw" target="_blank" rel="noopener">Android 6.0点这里</a>。<br>将文件直接拖进模拟器，在模拟器中会弹出对话框，点击<code>Yes</code>,<code>OK</code>之后重启虚拟机即可。</p><h1 id="安装app"><a href="#安装app" class="headerlink" title="安装app"></a>安装app</h1><p>在Genymotion的安装路径下找到tools文件夹，运行<code>tools/adb install &quot;your_apk_file_path&quot;</code>，即可完成程序的安装。</p><h1 id="模拟触屏操作"><a href="#模拟触屏操作" class="headerlink" title="模拟触屏操作"></a>模拟触屏操作</h1><p>很多软件中会用到多点触屏、滑动、甚至摇杆操作。只使用鼠标单机显然是无法完成这些操作的。<a href="https://drive.google.com/open?id=1Ezytne_Z7s8j32NuIpyiZwM4t62icki9" target="_blank" rel="noopener">Game Controller 2 Touch Pro</a>这款软件可以用于解决这样的问题。<br><a href="https://drive.google.com/file/d/0B84T8fwIQnJjME5qdmdsemk4VEk/edit" target="_blank" rel="noopener">Game Controller 2 Touch Pro操作手册</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Find Max/Min Value in Tensorboard Json</title>
      <link href="/2018/11/14/Find-Max-in-Tensorboard-Json/"/>
      <url>/2018/11/14/Find-Max-in-Tensorboard-Json/</url>
      
        <content type="html"><![CDATA[<!doctype html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0">    <meta charset="utf-8">    <title>Find Min/Max Value</title>    <meta name="description" content="The HTML5 Herald">    <meta name="author" content="sparkydog">    <!-- Reference Page: https://www.html5rocks.com/en/tutorials/file/dndfiles/#disqus_thread -->    <link rel="stylesheet" href="css/styles.css?v=1.0">    <style type="text/css" media="screen">        /* Add style rules here */        .dropzxoneborder {            padding: 10px;            border: 1px solid #ccc;            font-size: 25px;            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;            line-height: 2;            word-wrap: break-word;            width: 70%;        }        #drop_zone {            border: 2px dashed #bbb;            -moz-border-radius: 5px;            -webkit-border-radius: 5px;            border-radius: 5px;            padding: 25px;            text-align: center;            font: 20pt bold 'Vollkorn';            color: #bbb;        }    </style></head><body>    <script src="js/scripts.js"></script>    <script>        if (window.File && window.FileReader && window.FileList && window.Blob) {            // Great success! All the File APIs are supported.        } else {            alert('The File APIs are not fully supported in this browser.');        }    </script>    <h1>        <center>Find Max in Tensorboard Json</center>    </h1>    <center>        <div class="dropzxoneborder">            <div id="drop_zone">Drop files here</div>            <output id="list" style="text-align:left;font-size: 14px;line-height:1;"></output>        </div>        <div id="result_zone" style="width:70%;text-align:left;padding: 10px;font-family:Monospace,Helvetica, Arial, sans-serif;">            <hr>        </div>    </center>    <script>        function handleFileSelect(evt) {            evt.stopPropagation();            evt.preventDefault();            var files = evt.dataTransfer.files; // FileList object.            // files is a FileList of File objects. List some properties.            var output = [];            for (var i = 0, f; f = files[i]; i++) {                output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',                    f.size, ' bytes, last modified: ',                    f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',                    '</li>');                if (!f.type.match('json.*')) {                    alert('File type is not supported.');                    continue;                }                var reader = new FileReader();                // Closure to capture the file information.                reader.onload = (function (theFile) {                    return function (e) {                        var jsonText = e.target.result;                        var myarray = JSON.parse(jsonText)                        var minIdx = 0;                        var maxIdx = 0;                        var maxVal = myarray[0][2];                        var minVal = myarray[0][2];                        myarray.forEach(function (v) {                            if (maxVal < v[2]) {                                maxVal = v[2];                                maxIdx = v[1];                            };                            if (minVal < v[2]) {                                minIdx = v[2];                                minIdx = v[1];                            };                        });                        var para = document.createElement("span");                       // Create a <p> element                        // para.innerHTML = [                        //     '<b>Min</b>:' + '\xa0\xa0\xa0\xa0' + minVal.toString() + '\xa0\xa0\xa0\xa0'                        //     + '<b>Step</b>:' + '\xa0\xa0\xa0\xa0'                        //     + minIdx.toString() + '<br>'                        //     + '<b>Max</b>:' + '\xa0\xa0\xa0\xa0' + maxVal.toString() + '\xa0\xa0\xa0\xa0'                        //     + '<b>Step</b>:' + '\xa0\xa0\xa0\xa0'                        //     + maxIdx.toString() + '<br>'                        //     + '<hr>'                        //     ]                        para.innerHTML = [                            '<table><tr><td>'                            + '<b>Min</b>:' + '\xa0\xa0' + minVal.toString() + '\xa0\xa0\xa0\xa0' + '</td><td>'                            + '<b>Step</b>:' + '\xa0\xa0'                            + minIdx.toString() + '</td></tr><tr><td>'                            + '<b>Max</b>:' + '\xa0\xa0' + maxVal.toString() + '\xa0\xa0\xa0\xa0' + '</td><td>'                            + '<b>Step</b>:' + '\xa0\xa0'                            + maxIdx.toString() + '</td></tr></table>'                            + '<hr>'                        ]                        document.getElementById("result_zone").appendChild(para);                              // Append <p> to <body>                     };                })(f);                reader.readAsText(f);            }            document.getElementById('list').innerHTML = document.getElementById('list').innerHTML + '<ul>' + output.join('') + '</ul>';        }        function handleDragOver(evt) {            evt.stopPropagation();            evt.preventDefault();            evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.        }        // Setup the dnd listeners.        var dropZone = document.getElementById('drop_zone');        dropZone.addEventListener('dragover', handleDragOver, false);        dropZone.addEventListener('drop', handleFileSelect, false);        document.getElementById('files').addEventListener('change', handleFileSelect, false);    </script>    <!-- End ============== --></body></html>]]></content>
      
      
      
        <tags>
            
            <tag> json </tag>
            
            <tag> tensorboard </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在个人服务器上部署Rocket-chat</title>
      <link href="/2018/11/10/rocket-chat-deploy/"/>
      <url>/2018/11/10/rocket-chat-deploy/</url>
      
        <content type="html"><![CDATA[<p>RocketChat是一个开源的即时通讯项目。</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ol><li><p>系统环境<br>linode服务器, CentOS 7.<br>没有在CentOS 6上面进行过测试.</p></li><li><p>配置服务器防火墙端口<br>在linode中,可以使用如下命令配置端口:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-service=http --permanent</span><br><span class="line">sudo firewall-cmd --zone=public --add-service=https --permanent</span><br><span class="line"><span class="comment"># sudo firewall-cmd --zone=public --add-service=http</span></span><br><span class="line">sudo firewall-cmd --zone=public --add-port=12345/tcp --permanent</span><br><span class="line"><span class="comment"># sudo firewall-cmd --zone=public --remove-port=12345/tcp --permanent # 移除端口</span></span><br></pre></td></tr></table></figure></li></ol><p>配置完成后使用<code>sudo firewall-cmd --reload</code>使配置生效.<br>使用<code>sudo firewall-cmd --list-all-zones</code>可以查看当前的端口配置情况.</p><p>在设置防火请的时候我遇到过<code>permission to firewalld&#39;s &quot;ifcfg-eth0&quot;</code>的问题, 参照<a href="https://www.linode.com/community/questions/407/how-do-i-give-permission-to-firewallds-ifcfg-eth0-solved" target="_blank" rel="noopener">这个页面</a>解决了问题.</p><blockquote><p>参考页面: <a href="https://linode.com/docs/security/firewalls/introduction-to-firewalld-on-centos/#configuring-firewalld" target="_blank" rel="noopener">https://linode.com/docs/security/firewalls/introduction-to-firewalld-on-centos/#configuring-firewalld</a></p></blockquote><ol start="3"><li>使用<code>Let&#39;s Encrypt</code>生成SSL证书<br><a href="https://link.jianshu.com/?t=https://letsencrypt.org" target="_blank" rel="noopener">Let’s Encrypt</a>是一个用于免费获取SSL证书的在线服务.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br><span class="line">sudo yum install git</span><br><span class="line">sudo git <span class="built_in">clone</span> https://github.com/letsencrypt/letsencrypt /opt/letsencrypt</span><br><span class="line"><span class="built_in">cd</span> /opt/letsencrypt</span><br><span class="line">sudo -H ./letsencrypt-auto certonly --standalone -d example.com -d www.example.com <span class="comment"># Relpace example.com to your own site</span></span><br></pre></td></tr></table></figure></li></ol><p>运行成功后在<code>/etc/letsencrypt/live</code>可以看到当前证书<br>注意这个证书有效期为90天,所以最好定期更新证书,使用<code>sudo crontab -e</code>添加<code>0 0 1 * * /opt/letsencrypt/letsencrypt-auto renew</code>,以定期执行.</p><h1 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h1><ol><li>将nginx放到yum repro库中<br><code>[root@localhost ~]# rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</code></li><li>查看nginx信息<br><code>[root@localhost ~]# yum info nginx</code></li><li>使用yum安装ngnix<br><code>[root@localhost ~]# yum install nginx</code></li><li>启动nginx<br><code>[root@localhost ~]# systemctl start nginx</code></li><li>查看nginx版本<br><code>[root@localhost ~]# nginx -v</code></li><li>访问nginx，现在你可以通过公网ip (本地可以通过 localhost /或 127.0.0.1 ) 查看nginx 服务返回的信息。<br><code>[root@localhost ~]# curl -i localhost</code></li><li>nginx配置文件位置在/etc/nginx/<br><code>[root@localhost /]# ll /etc/nginx/</code></li><li>测试配置文件是否正常<br><code>nginx -t</code></li></ol><blockquote><p>参考页面: <a href="https://www.jianshu.com/p/96691511295f" target="_blank" rel="noopener">https://www.jianshu.com/p/96691511295f</a></p></blockquote><h1 id="安装Rocket-Chat"><a href="#安装Rocket-Chat" class="headerlink" title="安装Rocket-Chat"></a>安装Rocket-Chat</h1><p>nginx配置参考这个<a href="https://linuxize.com/post/secure-nginx-with-let-s-encrypt-on-centos-7/#disqus_thread" target="_blank" rel="noopener">页面</a><br>参考<a href="https://linuxize.com/post/how-to-deploy-rocket-chat-on-centos-7/" target="_blank" rel="noopener">这个页面</a></p><h1 id="解决502错误"><a href="#解决502错误" class="headerlink" title="解决502错误"></a>解决502错误</h1><p>查看log文件<code>logs/xxx</code><br>发现是权限问题,<code>setsebool httpd_can_network_connect on -P</code>解决</p><p>完成以上步骤之后，在Rocket-chat的客户端使用 <a href="https://example.com" target="_blank" rel="noopener">https://example.com</a> 就可以连接到配置好的服务器了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Rocket-Chat </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修复Ubuntu中的启动项</title>
      <link href="/2018/11/03/fix-boot-in-ubuntu/"/>
      <url>/2018/11/03/fix-boot-in-ubuntu/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>之前是Ubuntu和Windows双系统,Ubuntu系统装在硬盘A,Windows系统装在硬盘B,由Ubuntu的grub进行启动引导.<br>后来硬盘A出了问题,送去维修.在此期间想要使用Windows系统,于是通过lilo修改了引导记录,成功启动了Windows.麻烦的是后来Ubuntu系统所在的硬盘A回来了,硬盘A可以正常进行读写,但是读写的时候会发出非常大的噪音,于是买了一块全新的硬盘C,希望将硬盘A上的内容全部迁移到硬盘C上,因为Ubuntu上重装系统重新配置环境实在是太麻烦了,最终我找到一个解决方案,能够直接不用重新安装系统,就可以使用迁移过后的Ubuntu系统.<br>值得注意的是,此时由于使用lilo修改过引导记录的缘故,硬盘A再次安装到主机,也无法直接从硬盘A启动.</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ul><li>Ubuntu的U盘启动盘</li><li>确保已经插好网线,网络环境正常</li><li>硬盘A和硬盘C被连接到主板</li></ul><h1 id="使用Gparted进行分区"><a href="#使用Gparted进行分区" class="headerlink" title="使用Gparted进行分区"></a>使用Gparted进行分区</h1><ol><li>进入U盘启动中的live CD</li><li>使用<code>sudo fdisk -l</code>可以查看各个磁盘中的分区情况.记住磁盘A中的每个分区的名称以及在原Ubuntu系统中对应的目录,以及分区类型,例如我的根目录是在<code>/dev/sda9</code>,boot是在<code>/dev/sda8</code>.如果不能确认,可以使用<code>sudo mount /dev/sda9 /mnt</code>这样的命令挂载对应分区,然后查看其中内容来确认.<br>之后在Gparted中对硬盘C进行分区,要确保分区与硬盘A中Ubuntu系统的分区数量一致,并且每个分区的大小都不小于原来分区的大小.</li></ol><h1 id="拷贝分区"><a href="#拷贝分区" class="headerlink" title="拷贝分区"></a>拷贝分区</h1><ol><li>使用<code>dd</code>命令从硬盘A将对应的分区拷贝到硬盘C,例如<code>sudo dd if=/dev/sda1 of=/dev/sdb1</code>. 这个过程不会有输出,为了查看复制的进程,可以在另外的terminal中执行<code>watch -n 5 killall -USR1 dd</code>,这样在dd的窗口中可以看到输出. 重复这一指令直到所有的分区都拷贝完成.</li></ol><ul><li>注意:使用dd命令拷贝之后所有的新分区与原来分区具有相同的uuid.如果不希望uuid相同,可以在gparted中修改uuid,并且在文件系统对应分区的/etc/fstab中完成对应修改</li></ul><ol start="2"><li>使用gparted在硬盘C中boot对应分区添加boot标记</li><li>使用gparted新建分区,大小大于1M, file system选择unformatted.标记为<code>boot_grub</code>.</li><li>解除挂载硬盘A</li></ol><h1 id="修复grub"><a href="#修复grub" class="headerlink" title="修复grub"></a>修复grub</h1><ol><li><p>挂载系统.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mount /dev/sdX /mnt</span><br><span class="line">sudo mount /dev/sdY /mnt/boot</span><br><span class="line">sudo mount /dev /mnt/dev</span><br><span class="line">sudo mount /sys /mnt/sys</span><br><span class="line">sudo mount /proc /mnt/proc</span><br></pre></td></tr></table></figure></li><li><p>使用chroot进入虚拟系统<br><code>sudo chroot /mnt</code></p></li><li><p>修复grub<br><code>sudo grub-install --force</code></p></li></ol><h1 id="使用boot-repair"><a href="#使用boot-repair" class="headerlink" title="使用boot-repair"></a>使用boot-repair</h1><ol><li>安装boot-repair<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:yannubuntu/boot-repair</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y boot-repair &amp;&amp; boot-repair</span><br></pre></td></tr></table></figure></li></ol><p>进行正确的设置之后,等待完成,重启即可.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> grub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修复启动Windows时的‘Error：no such device’错误</title>
      <link href="/2018/10/31/repair-windows-grub-in-ubuntu/"/>
      <url>/2018/10/31/repair-windows-grub-in-ubuntu/</url>
      
        <content type="html"><![CDATA[<h1 id="问题起因"><a href="#问题起因" class="headerlink" title="问题起因"></a>问题起因</h1><p>原先的主机有一块固态硬盘和一块机械硬盘，机械硬盘上安装的是Ubuntu系统，固态硬盘上安装的是Windows10系统。平时使用的时候通过Ubuntu来引导启动。最近机械硬盘坏掉了，在BIOS将启动设备设置为固态硬盘想启动Windows系统的时候无法正常启动，报错‘Error：no such device’，然后就进入‘grub rescue’界面。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><ol><li>首先准备一个Ubuntu的U盘启动盘，然后修改BIOS启动顺序，通过U盘启动。U盘启动之后进入Live CD模式。</li><li>打开Terminal，运行<code>sudo apt-get install lilo</code></li><li>运行<code>sudo fdisk -l</code>，可以看到windows所在硬盘下有分区对应的Boot栏有<code>*</code>标记</li><li>运行<code>sudo lilo -M /dev/sdb mbr</code>，其中<code>sdb</code>应当替换为windows所在硬盘。注意这里是<code>sdb</code>而不是<code>sdb1</code>。</li><li>重新启动，调整BIOS启动顺序</li></ol><p>关于lilo和grub的区别，可以参照<a href="https://www.ibm.com/developerworks/library/l-bootload/index.html" target="_blank" rel="noopener">这个页面</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> grub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Ubuntu中没有声音的问题</title>
      <link href="/2018/10/29/fix-sound-in-ubuntu/"/>
      <url>/2018/10/29/fix-sound-in-ubuntu/</url>
      
        <content type="html"><![CDATA[<p>我在使用Ubuntu的时候，发现主机机箱上的耳机口没有声音（但是连接显卡HDMI线的显示器上的耳机口能够正常播放）。<br>在参考<a href="https://help.ubuntu.com/community/SoundTroubleshootingProcedure" target="_blank" rel="noopener">SoundTroubleshootingProcedure</a>和<a href="https://itsfoss.com/fix-sound-ubuntu-1304-quick-tip/" target="_blank" rel="noopener">How To Fix: No Sound In Ubuntu And Linux Mint</a>这两个页面的方法之后，成功的使得Ubuntu正常播放声音。</p><h1 id="alsa与pulseaudio"><a href="#alsa与pulseaudio" class="headerlink" title="alsa与pulseaudio"></a>alsa与pulseaudio</h1><p>ALSA全称是Advanced Linux Sound Architecture，是和硬件打交道的，pulseaudio则是基于alsa的一套软件，主要用于向其他软件提供统一的接口，以及额外的功能。</p><h1 id="alsamixer"><a href="#alsamixer" class="headerlink" title="alsamixer"></a>alsamixer</h1><p>alasmixer与windows中的音量控制器类似。<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/Screenshot%20from%202018-10-29%2010-25-12.png" alt="img"><br>在Terminal中输入<code>alsamixer</code>，看到界面如图。如果显示MM，那么表明对应项处于静音状态，按M进行切换，上下键进行音量调整。<br>这里‘Headphone’表示的就是我需要的前置耳机孔。<br>这个方法有时候能够解决问题，但是我设置之后没有起到作用。</p><h1 id="初始化-重启大法"><a href="#初始化-重启大法" class="headerlink" title="初始化-重启大法"></a>初始化-重启大法</h1><p>在计算机领域，有句话叫“遇事不决先重启”。因为重启之后很多软硬件的设置会恢复成初始状态，很多问题就直接消失了。<br>在声音这个问题上，初始化的方法是非常有效果的，最终解决了我的问题。<br>依次执行以下命令，每条指令执行之前都需要等待上一条完成。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alsactl init</span><br><span class="line">sudo killall pulseaudio; rm -r ~/.config/pulse/* ; rm -r ~/.pulse*</span><br><span class="line">killall pulseaudio; rm -r ~/.config/pulse/* ; rm -r ~/.pulse*</span><br><span class="line">pulseaudio -k</span><br><span class="line">sudo alsa force-reload</span><br></pre></td></tr></table></figure></p><p>然后使用<code>alsamixer</code>调整音量设置即可。</p><h1 id="保存设置"><a href="#保存设置" class="headerlink" title="保存设置"></a>保存设置</h1><p>需要注意的是，即使当前调整完成，当下次重启系统之后仍然没有声音。对于这个问题我的解决方案是将需要的指令写进一个脚本，每次开机运行脚本即可。</p><h2 id="保存alsamixer配置"><a href="#保存alsamixer配置" class="headerlink" title="保存alsamixer配置"></a>保存alsamixer配置</h2><p>首先调整好alsamixer设置，然后运行<code>sudo alsactl --file ~/.config/asound.state restore</code>将配置文件保存到~/.config/asound.state。</p><p>最后建立一个脚本，在其中添加如下内容：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sound</span></span><br><span class="line">alsactl init</span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">sleep 3s</span><br><span class="line">sudo killall pulseaudio; rm -r ~/.config/pulse/* ; rm -r ~/.pulse*</span><br><span class="line">killall pulseaudio; rm -r ~/.config/pulse/* ; rm -r ~/.pulse*</span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">sleep 3s</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'killall pulseaudio have finished'</span></span><br><span class="line">pulseaudio -k</span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">sleep 1s</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'pulseaudio -k have finished'</span></span><br><span class="line">sudo alsa force-reload</span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">sleep 3s</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'alsa force-reload  have finished'</span></span><br><span class="line">sudo alsactl --file ~/.config/asound.state restore</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> sound </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在命令行中使用词典</title>
      <link href="/2018/10/26/dict-in-command-line/"/>
      <url>/2018/10/26/dict-in-command-line/</url>
      
        <content type="html"><![CDATA[<p>在Github看到一个有趣的工作，<a href="https://github.com/ChestnutHeng/Wudao-dict" target="_blank" rel="noopener">无道词典</a>。<br>这个词典使用的是有道词典的api，用python3来发送请求，没有GUI，一切在命令行中完成。这个项目简洁实用，深得我心。我Fork了这个Repo，根据词典中的生词本增加了默写的功能。这样这个程序不仅可以用来查单词，而且可以用来背单词。<a href="https://github.com/sparkydogX/Wudao-dict/tree/master" target="_blank" rel="noopener">我的Repo在这里</a></p><h1 id="安装说明"><a href="#安装说明" class="headerlink" title="安装说明"></a>安装说明</h1><h2 id="Ubuntu-CentOS-Debian"><a href="#Ubuntu-CentOS-Debian" class="headerlink" title="Ubuntu/CentOS/Debian"></a>Ubuntu/CentOS/Debian</h2><p><a href="https://github.com/sparkydogX/Wudao-dict/blob/master/README.md" target="_blank" rel="noopener">ReadMe</a></p><h3 id="安装环境-需要python3和bs4-lxml-在线搜索用"><a href="#安装环境-需要python3和bs4-lxml-在线搜索用" class="headerlink" title="安装环境: 需要python3和bs4, lxml(在线搜索用)"></a>安装环境: 需要python3和bs4, lxml(在线搜索用)</h3><h4 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian/Ubuntu"></a>Debian/Ubuntu</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3</span><br><span class="line">sudo apt-get install python3-pip</span><br><span class="line">sudo pip3 install bs4</span><br><span class="line">sudo pip3 install lxml</span><br></pre></td></tr></table></figure><h4 id="OpenSUSE"><a href="#OpenSUSE" class="headerlink" title="OpenSUSE"></a>OpenSUSE</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install python3-pip</span><br><span class="line">sudo pip3 install bs4</span><br><span class="line">sudo pip3 install lxml</span><br></pre></td></tr></table></figure><h4 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install python34</span><br><span class="line">sudo yum install python34-pip</span><br><span class="line">sudo pip3 install bs4</span><br><span class="line">sudo pip3 install lxml</span><br></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/sparkydogX/Wudao-dict.git</span><br><span class="line"><span class="built_in">cd</span> ./wudao-dict/wudao-dict</span><br><span class="line">sudo bash setup.sh <span class="comment">#或者sudo ./setup.sh</span></span><br></pre></td></tr></table></figure><p>  看到出现<code>Setup Finished!</code>表明安装成功。如果发生由于移动安装文件不能使用的情况，只需再次运行该脚本即可。</p><p>无法clone的，可以在<a href="https://github.com/sparkydogX/Wudao-dict/tree/master" target="_blank" rel="noopener">项目页面</a>下载zip文件 ,然后解压安装使用。</p><p><strong>Note: 注意python的版本，只支持python3</strong></p><h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><p><a href="https://github.com/sparkydogX/Wudao-dict/blob/macOS_v2.1.1/README.md" target="_blank" rel="noopener">ReadMe</a></p><h3 id="安装环境-需要python3和bs4-lxml-在线搜索用-1"><a href="#安装环境-需要python3和bs4-lxml-在线搜索用-1" class="headerlink" title="安装环境: 需要python3和bs4, lxml(在线搜索用)"></a>安装环境: 需要python3和bs4, lxml(在线搜索用)</h3><pre><code>#### MacOS需要安装有`brew`和`python3`<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install bs4</span><br><span class="line">sudo pip3 install lxml</span><br></pre></td></tr></table></figure></code></pre><h3 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h3><pre><code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/sparkydogX/Wudao-dict.git</span><br><span class="line">git checkout macOS_v2.1.1</span><br><span class="line"><span class="built_in">cd</span> ./wudao-dict/wudao-dict</span><br><span class="line">sudo bash setup.sh <span class="comment">#或者sudo ./setup.sh</span></span><br></pre></td></tr></table></figure>看到出现`Setup Finished!`表明安装成功。如果发生由于移动安装文件不能使用的情况，只需再次运行该脚本即可。</code></pre><p>无法clone的，可以<a href="https://github.com/sparkydogX/Wudao-dict/tree/macOS_v2.1.1" target="_blank" rel="noopener">从github页面</a>下载zip文件 ,然后解压安装使用。</p><p><strong>Note: 注意python的版本，只支持python3</strong></p><h3 id="英文发音（可选）"><a href="#英文发音（可选）" class="headerlink" title="英文发音（可选）"></a>英文发音（可选）</h3><pre><code>#### 需要ffplay通过brew安装ffplay。这里有个trick。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install wget</span><br><span class="line">brew install sdl --use-gcc</span><br><span class="line">brew uninstall ffmpeg</span><br><span class="line">brew install ffmpeg --use-gcc</span><br></pre></td></tr></table></figure>#### 修改 ./Wudao-dict/wudao-dict/wdd文件按照文件注释中的说明修改。#### 新建mp3文件夹在 wudao-dict/usr 文件夹下新建 mp3 文件夹，用于保存单词发音的音频文件。</code></pre><blockquote><p>Ubuntu环境下也可以实现朗读单词的功能，但是由于我的Ubuntu机器音频接口无法使用，因此在master中没有实现这个功能。mac的branch中是实现了这一个功能的。在Ubuntu中使用只需将wdd文件按要求修改即可。</p></blockquote><h2 id="Windows10"><a href="#Windows10" class="headerlink" title="Windows10"></a>Windows10</h2><p>理论上来讲在Windows10中通过应用商店安装Linux子系统之后，按照Linux版本的环境要求配置环境。接下来安装与使用步骤与Linux下的操作相同。<br>但是这个我没有尝试过，有兴趣尝试的小伙伴可以告诉我结果，遇到问题也可以联系我或者创建Issue。</p><h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>运行<code>wd -h</code>查看使用说明。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ wd -h</span><br><span class="line">Usage: wd [OPTION]... [WORD]</span><br><span class="line">Youdao is wudao, a powerful dict.</span><br><span class="line">-k, --kill             kill the server process    (退出服务进程)</span><br><span class="line">-h, --help             display this help and exit (查看帮助)</span><br><span class="line">-s, --short-desc       do not show sentence       (只看释义)</span><br><span class="line">-n, --not-save         query and save to notebook (不存入生词本)</span><br><span class="line">-d, --dictation        spell words in notebook (默写生词本中的单词)</span><br><span class="line">生词本文件: ... some path .../notebook.txt</span><br><span class="line">查询次数: ... some path .../usr_word.json</span><br></pre></td></tr></table></figure><p>查词时可以直接使用<code>wd 词语</code>查汉英词典，或<code>wd word</code>查英汉词典(可以自动检测)。</p><h1 id="关于默写模式"><a href="#关于默写模式" class="headerlink" title="关于默写模式"></a>关于默写模式</h1><p><code>wd -d</code> 进入默写模式。<br>默写模式中的单词来自单词本。当使用<code>wd xxx</code>命令查询单词的时候，单词会自动被记入单词本。<br>使用<code>wd -n xxx</code>不存入单词本。<br>进入默写模式，会有提示如何进行操作。</p><blockquote><p>默写模式的help暂时未完成。关于这一点如果有要求的话请告知我。</p></blockquote><p>默写模式下会自动统计错误次数，在默写模式下按’i’可以显示单词的错误情况。<br>对于已经掌握的单词，默写模式下按’d’将其从单词本删除。</p><h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ol start="0"><li>./wd_monofile 是本词典的在线查询的单文件版本, 可以复制到<code>/usr/bin</code>下直接使用.(需要安装bs4)</li><li>如果您不想看到例句, 请在<code>/usr/bin/wd</code>中的<code>./wdd</code>后面加上-s参数.</li><li>有的用户反馈字体颜色看不清的问题, 你可以找到./wudao-dict/wudao-dict/src/CommandDraw.py, 可以看到释义,读音等采用的颜色, 直接修改即可.</li><li>查询词组直接键入类似<code>wd take off</code>即可.</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> dictionary </tag>
            
            <tag> 词典 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Linux操作系统下Terminal中光标消失的问题</title>
      <link href="/2018/10/19/linux-terminal-cursor-disappear/"/>
      <url>/2018/10/19/linux-terminal-cursor-disappear/</url>
      
        <content type="html"><![CDATA[<p>使用Terminal时会偶尔遇到光标消失的问题。</p><p><code>echo -e &quot;\033[?25h&quot;</code>  显示光标<br><code>echo -e &quot;\033[?25l&quot;</code>  隐藏光标</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python读取命令行参数并使用字典表示</title>
      <link href="/2018/10/18/args-from-command-line-to-dict/"/>
      <url>/2018/10/18/args-from-command-line-to-dict/</url>
      
        <content type="html"><![CDATA[<p>用argparse可以很方便的在python中读取命令行参数，但是argparse无法接受任意的参数名。<br>在python中可以使用sys标准库中的args模块进行处理。<br>代码如下：</p><script src="https://gist.github.com/sparkydogX/7aec89d105f9c90bdadcfed005542f07.js"></script><p>注意以这种形式读取的参数，值全都是字符串类型。cursor</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在命令行中使用find命令查找文件</title>
      <link href="/2018/10/16/find-file-in-terminal/"/>
      <url>/2018/10/16/find-file-in-terminal/</url>
      
        <content type="html"><![CDATA[<p><code>find . -name &quot;*.sh&quot;</code><br>可以查找当前文件夹以及子文件夹中文件名中包含“.sh”的文件。</p>]]></content>
      
      
      
        <tags>
            
            <tag> find </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Github托管js和css文件</title>
      <link href="/2018/10/12/use-github-js-css/"/>
      <url>/2018/10/12/use-github-js-css/</url>
      
        <content type="html"><![CDATA[<p>Github本身托管的js和css文件是不能直接被调用的，<a href="https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/compatibility/gg622941(v=vs.85" target="_blank" rel="noopener">这个页面</a>对这个问题有所说明。<br>幸好有一些第三方服务来解决这个问题。<br>网络上搜索一下，名气最大的是 <a href="http://rawgit.com/" target="_blank" rel="noopener">http://rawgit.com/</a> ， 但是rawgit在2018年10月停止了服务。<br>rawgit推荐的替代服务有jsDelivr、GitHub Pages、CodeSandbox、unpkg 。<br>这篇文章以jsDelivr为例，介绍如何使用jsDelivr。</p><h1 id="Release-Github-Repo"><a href="#Release-Github-Repo" class="headerlink" title="Release Github Repo"></a>Release Github Repo</h1><p>首先将需要使用的js或者css文件上传到一个github中，然后Release对应的Repo。<br>记住对应的版本号，在后面使用jsDelivr的时候会需要。</p><h1 id="jsDelivr"><a href="#jsDelivr" class="headerlink" title="jsDelivr"></a>jsDelivr</h1><p>打开<a href="https://www.jsdelivr.com/" target="_blank" rel="noopener">jsDeliver官网</a>，可以看到使用方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// load any GitHub release or commit</span><br><span class="line"></span><br><span class="line">// note: we recommend using npm for projects that support it</span><br><span class="line"></span><br><span class="line">https://cdn.jsdelivr.net/gh/user/repo@version/file</span><br></pre></td></tr></table></figure></p><h1 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h1><p>在浏览器中打开 <a href="https://cdn.jsdelivr.net/gh/sparkydogX/pictures@0.1/2018/corevalue/style/index.css" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/sparkydogX/pictures@0.1/2018/corevalue/style/index.css</a> 可以看到对应的css文件，此时这个连接已经可以直接用在网页里面了</p>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> css </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Core Value Encoder/Decoder</title>
      <link href="/2018/10/12/corevalue/"/>
      <url>/2018/10/12/corevalue/</url>
      
        <content type="html"><![CDATA[<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0">    <meta charset="utf-8">    <title>Core Values Decoder</title>    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/sparkydogX/pictures@0.1/2018/corevalue/style/index.css">    <link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">    <link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"></head><body>    <header>        <h2>Core Values Encoder</h2>    </header>    <div class="content" style="flex-direction:column;justify-content:space-around;margin:auto;align-items:center;width: 100%;height:70%;">        <textarea id="decoded-area" placeholder="Decoded Text Here" style="width:90%;height:45%;justify-content:center;"></textarea>        <div class="buttons" style="flex-direction:row;justify-content:space-around;margin:auto;width:60%;">                <button id="encode-btn">Encode &darr;</button>                <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->                <button id="decode-btn">&uarr; Decode</button>        </div>        <textarea id="encoded-area" placeholder="Encoded Text Here" style="width: 90%; height:45%;justify-content:center;"></textarea>    </div>    <footer>        <p><b>Celebrate 19 big, 2017</b></p>        <hr style="width:100%">        <br><br>    </footer>    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/sparkydogX/pictures@0.1/2018/corevalue/dist/bundle.js"></script>    <div class="comments" id="comments" style="width:70%;margin:auto;">        <div id="disqus_thread">          <noscript>            Please enable JavaScript to view the            <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a>          </noscript>        </div>    </div>        <script id="dsq-count-scr" src="https://sparkydogX.disqus.com/count.js" async></script>        <script type="text/javascript">          var disqus_config = function () {            this.page.url = 'http://sparkydogX.github.io/2018/10/12/corevalue/';            this.page.identifier = '2018/10/12/corevalue/';            this.page.title = 'Core Value Encoder/Decoder';          };          var d = document, s = d.createElement('script');          s.src = 'https://sparkydogX.disqus.com/embed.js';          s.setAttribute('data-timestamp', '' + +new Date());          (d.head || d.body).appendChild(s);      </script>      <footer id="footer" class="footer" style="justify-content:center;width:100%;">            <div class="footer-inner" style="opacity:0.65;justify-content:center;text-align:center">        &copy;2018        <span class="with-love">          <i class="fa fa-heart"></i>        </span>   sparkydogX        </div>      </footer></body></html>]]></content>
      
      
      
        <tags>
            
            <tag> core-value </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站推荐</title>
      <link href="/2018/09/27/recommend-websites/"/>
      <url>/2018/09/27/recommend-websites/</url>
      
        <content type="html"><![CDATA[<h1 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h1><p><a href="https://mail.protonmail.com" target="_blank" rel="noopener">https://mail.protonmail.com</a><br>注册方便，不用提供手机号</p><h1 id="接收验证码"><a href="#接收验证码" class="headerlink" title="接收验证码"></a>接收验证码</h1><p><a href="https://smsreceivefree.com/" target="_blank" rel="noopener">https://smsreceivefree.com/</a><br>提供临时的手机号，可以用于接收验证码短信</p><h1 id="Fake-Address-Generator"><a href="#Fake-Address-Generator" class="headerlink" title="Fake Address Generator"></a>Fake Address Generator</h1><p><a href="https://www.fakeaddressgenerator.com/" target="_blank" rel="noopener">https://www.fakeaddressgenerator.com/</a><br>随机生成一个像模像样的个人信息档案，甚至连银行卡号都有～ ┏ (^ω^)=</p>]]></content>
      
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> AppleID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用DSNTNN处理heatmap的使用示例</title>
      <link href="/2018/09/27/dsntnn_basic_usage/"/>
      <url>/2018/09/27/dsntnn_basic_usage/</url>
      
        <content type="html"><![CDATA[<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/x-mathjax-config">    MathJax.Hub.Config({    extensions: ["tex2jax.js"],    jax: ["input/LaTeX", "output/HTML-CSS"],    "HTML-CSS": { availableFonts: ["TeX"] }    });</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><style>@font-face {  font-family: ' Arial';  font-style: normal;  font-weight: 300;  src: local('Raleway Light'), local('Raleway-Light'), url(http://fonts.gstatic.com/s/raleway/v9/-_Ctzj9b56b8RgXW8FArifk_vArhqVIZ0nv9q090hN8.woff2) format('woff2');}@font-face {  font-family: ' Arial';  font-style: normal;  font-weight: 400;  src: local(' Arial'), url(http://fonts.gstatic.com/s/raleway/v9/0dTEPzkLWceF7z0koJaX1A.woff2) format('woff2');}@font-face {  font-family: ' Arial';  font-style: normal;  font-weight: 600;  src: local('Raleway SemiBold'), local('Raleway-SemiBold'), url(http://fonts.gstatic.com/s/raleway/v9/xkvoNo9fC8O2RDydKj12b_k_vArhqVIZ0nv9q090hN8.woff2) format('woff2');}html {  font-family: sans-serif; /* 1 */  -ms-text-size-adjust: 100%; /* 2 */  -webkit-text-size-adjust: 100%; /* 2 */}body {  margin: 0;}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary {  display: block;}audio,canvas,progress,video {  display: inline-block; /* 1 */  vertical-align: baseline; /* 2 */}audio:not([controls]) {  display: none;  height: 0;}[hidden],template {  display: none;}a:active,a:hover {  outline: 0;}abbr[title] {  border-bottom: 1px dotted;}b,strong {  font-weight: bold;}dfn {  font-style: italic;}h1 {  font-size: 2em;  margin: 0.67em 0;}mark {  background: #ff0;  color: #000;}small {  font-size: 80%;}sub,sup {  font-size: 75%;  line-height: 0;  position: relative;  vertical-align: baseline;}sup {  top: -0.5em;}sub {  bottom: -0.25em;}img {  border: 0;}svg:not(:root) {  overflow: hidden;}figure {  margin: 1em 40px;}hr {  -moz-box-sizing: content-box;  box-sizing: content-box;  height: 0;}pre {  overflow: auto;}code,kbd,pre,samp {  font-family: monospace, monospace;  font-size: 1em;}button,input,optgroup,select,textarea {  color: inherit; /* 1 */  font: inherit; /* 2 */  margin: 0; /* 3 */}button {  overflow: visible;}button,select {  text-transform: none;}button,html input[type="button"], /* 1 */input[type="reset"],input[type="submit"] {  -webkit-appearance: button; /* 2 */  cursor: pointer; /* 3 */}button[disabled],html input[disabled] {  cursor: default;}button::-moz-focus-inner,input::-moz-focus-inner {  border: 0;  padding: 0;}input {  line-height: normal;}input[type="checkbox"],input[type="radio"] {  box-sizing: border-box; /* 1 */  padding: 0; /* 2 */}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button {  height: auto;}input[type="search"] {  -webkit-appearance: textfield; /* 1 */  -moz-box-sizing: content-box;  -webkit-box-sizing: content-box; /* 2 */  box-sizing: content-box;}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration {  -webkit-appearance: none;}fieldset {  border: 1px solid #c0c0c0;  margin: 0 2px;  padding: 0.35em 0.625em 0.75em;}legend {  border: 0; /* 1 */  padding: 0; /* 2 */}textarea {  overflow: auto;}optgroup {  font-weight: bold;}table {  border-collapse: collapse;  border-spacing: 0;}td,th {  padding: 0;}/** Skeleton V2.0.4* Copyright 2014, Dave Gamache* www.getskeleton.com* Free to use under the MIT license.* http://www.opensource.org/licenses/mit-license.php* 12/29/2014*/.container {  position: relative;  width: 100%;  max-width: 960px;  margin: 0 auto;  padding: 0 20px;  box-sizing: border-box; }.column,.columns {  width: 100%;  float: left;  box-sizing: border-box; }@media (min-width: 400px) {  .container {    width: 85%;    padding: 0; }}@media (min-width: 550px) {  .container {    width: 80%; }  .column,  .columns {    margin-left: 4%; }  .column:first-child,  .columns:first-child {    margin-left: 0; }  .one.column,  .one.columns                    { width: 4.66666666667%; }  .two.columns                    { width: 13.3333333333%; }  .three.columns                  { width: 22%;            }  .four.columns                   { width: 30.6666666667%; }  .five.columns                   { width: 39.3333333333%; }  .six.columns                    { width: 48%;            }  .seven.columns                  { width: 56.6666666667%; }  .eight.columns                  { width: 65.3333333333%; }  .nine.columns                   { width: 74.0%;          }  .ten.columns                    { width: 82.6666666667%; }  .eleven.columns                 { width: 91.3333333333%; }  .twelve.columns                 { width: 100%; margin-left: 0; }  .one-third.column               { width: 30.6666666667%; }  .two-thirds.column              { width: 65.3333333333%; }  .one-half.column                { width: 48%; }  /* Offsets */  .offset-by-one.column,  .offset-by-one.columns          { margin-left: 8.66666666667%; }  .offset-by-two.column,  .offset-by-two.columns          { margin-left: 17.3333333333%; }  .offset-by-three.column,  .offset-by-three.columns        { margin-left: 26%;            }  .offset-by-four.column,  .offset-by-four.columns         { margin-left: 34.6666666667%; }  .offset-by-five.column,  .offset-by-five.columns         { margin-left: 43.3333333333%; }  .offset-by-six.column,  .offset-by-six.columns          { margin-left: 52%;            }  .offset-by-seven.column,  .offset-by-seven.columns        { margin-left: 60.6666666667%; }  .offset-by-eight.column,  .offset-by-eight.columns        { margin-left: 69.3333333333%; }  .offset-by-nine.column,  .offset-by-nine.columns         { margin-left: 78.0%;          }  .offset-by-ten.column,  .offset-by-ten.columns          { margin-left: 86.6666666667%; }  .offset-by-eleven.column,  .offset-by-eleven.columns       { margin-left: 95.3333333333%; }  .offset-by-one-third.column,  .offset-by-one-third.columns    { margin-left: 34.6666666667%; }  .offset-by-two-thirds.column,  .offset-by-two-thirds.columns   { margin-left: 69.3333333333%; }  .offset-by-one-half.column,  .offset-by-one-half.columns     { margin-left: 52%; }}html {  font-size: 62.5%; }body {  font-size: 1.5em; /* currently ems cause chrome bug misinterpreting rems on body element */  line-height: 1.6;  font-weight: 400;  font-family: "Raleway", "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, sans-serif;  color: #222; }h1, h2, h3, h4, h5, h6 {  margin-top: 0;  margin-bottom: 2rem;  font-weight: 300; }h1 { font-size: 3.6rem; line-height: 1.2;  letter-spacing: -.1rem;}h2 { font-size: 3.4rem; line-height: 1.25; letter-spacing: -.1rem; }h3 { font-size: 3.2rem; line-height: 1.3;  letter-spacing: -.1rem; }h4 { font-size: 2.8rem; line-height: 1.35; letter-spacing: -.08rem; }h5 { font-size: 2.4rem; line-height: 1.5;  letter-spacing: -.05rem; }h6 { font-size: 1.5rem; line-height: 1.6;  letter-spacing: 0; }p {  margin-top: 0; }a {  color: #1EAEDB; }a:hover {  color: #0FA0CE; }.button,button,input[type="submit"],input[type="reset"],input[type="button"] {  display: inline-block;  height: 38px;  padding: 0 30px;  color: #555;  text-align: center;  font-size: 11px;  font-weight: 600;  line-height: 38px;  letter-spacing: .1rem;  text-transform: uppercase;  text-decoration: none;  white-space: nowrap;  background-color: transparent;  border-radius: 4px;  border: 1px solid #bbb;  cursor: pointer;  box-sizing: border-box; }.button:hover,button:hover,input[type="submit"]:hover,input[type="reset"]:hover,input[type="button"]:hover,.button:focus,button:focus,input[type="submit"]:focus,input[type="reset"]:focus,input[type="button"]:focus {  color: #333;  border-color: #888;  outline: 0; }.button.button-primary,button.button-primary,input[type="submit"].button-primary,input[type="reset"].button-primary,input[type="button"].button-primary {  color: #FFF;  background-color: #33C3F0;  border-color: #33C3F0; }.button.button-primary:hover,button.button-primary:hover,input[type="submit"].button-primary:hover,input[type="reset"].button-primary:hover,input[type="button"].button-primary:hover,.button.button-primary:focus,button.button-primary:focus,input[type="submit"].button-primary:focus,input[type="reset"].button-primary:focus,input[type="button"].button-primary:focus {  color: #FFF;  background-color: #1EAEDB;  border-color: #1EAEDB; }input[type="email"],input[type="number"],input[type="search"],input[type="text"],input[type="tel"],input[type="url"],input[type="password"],textarea,select {  height: 38px;  padding: 6px 10px; /* The 6px vertically centers text on FF, ignored by Webkit */  background-color: #fff;  border: 1px solid #D1D1D1;  border-radius: 4px;  box-shadow: none;  box-sizing: border-box; }/* Removes awkward default styles on some inputs for iOS */input[type="email"],input[type="number"],input[type="search"],input[type="text"],input[type="tel"],input[type="url"],input[type="password"],textarea {  -webkit-appearance: none;     -moz-appearance: none;          appearance: none; }textarea {  min-height: 65px;  padding-top: 6px;  padding-bottom: 6px; }input[type="email"]:focus,input[type="number"]:focus,input[type="search"]:focus,input[type="text"]:focus,input[type="tel"]:focus,input[type="url"]:focus,input[type="password"]:focus,textarea:focus,select:focus {  border: 1px solid #33C3F0;  outline: 0; }label,legend {  display: block;  margin-bottom: .5rem;  font-weight: 600; }fieldset {  padding: 0;  border-width: 0; }input[type="checkbox"],input[type="radio"] {  display: inline; }label > .label-body {  display: inline-block;  margin-left: .5rem;  font-weight: normal; }ul {  list-style: circle inside; }ol {  list-style: decimal inside; }ol, ul {  padding-left: 0;  margin-top: 0; }ul ul,ul ol,ol ol,ol ul {  margin: 1.5rem 0 1.5rem 3rem;  font-size: 90%; }li {  margin-bottom: 1rem; }th,td {  padding: 12px 15px;  text-align: left;  border-bottom: 1px solid #E1E1E1; }th:first-child,td:first-child {  padding-left: 0; }th:last-child,td:last-child {  padding-right: 0; }button,.button {  margin-bottom: 1rem; }input,textarea,select,fieldset {  margin-bottom: 1.5rem; }pre,blockquote,dl,figure,table,p,ul,ol,form {  margin-bottom: 2.5rem; }.u-full-width {  width: 100%;  box-sizing: border-box; }.u-max-full-width {  max-width: 100%;  box-sizing: border-box; }.u-pull-right {  float: right; }.u-pull-left {  float: left; }hr {  margin-top: 3rem;  margin-bottom: 3.5rem;  border-width: 0;  border-top: 1px solid #E1E1E1; }.container:after,.row:after,.u-cf {  content: "";  display: table;  clear: both; }pre {  display: block;  padding: 9.5px;  margin: 0 0 10px;  font-size: 13px;  line-height: 1.42857143;  color: #333;  word-break: break-all;  word-wrap: break-word;  background-color: #f5f5f5;  border: 1px solid #ccc;  border-radius: 4px;}code,kbd,pre,samp {  font-family: Menlo, Monaco, Consolas,  monospace;}code {  padding: 2px 4px;  font-size: 90%;  color: #c7254e;  background-color: #f9f2f4;  border-radius: 4px;}@media (min-width: 400px) {}@media (min-width: 550px) {}@media (min-width: 750px) {}@media (min-width: 1000px) {}@media (min-width: 1200px) {}</style><style>.hll { background-color: #ffffcc }.c { color: #408080; font-style: italic } /* Comment */.err { border: 1px solid #FF0000 } /* Error */.k { color: #008000; font-weight: bold } /* Keyword */.o { color: #666666 } /* Operator */.ch { color: #408080; font-style: italic } /* Comment.Hashbang */.cm { color: #408080; font-style: italic } /* Comment.Multiline */.cp { color: #BC7A00 } /* Comment.Preproc */.cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */.c1 { color: #408080; font-style: italic } /* Comment.Single */.cs { color: #408080; font-style: italic } /* Comment.Special */.gd { color: #A00000 } /* Generic.Deleted */.ge { font-style: italic } /* Generic.Emph */.gr { color: #FF0000 } /* Generic.Error */.gh { color: #000080; font-weight: bold } /* Generic.Heading */.gi { color: #00A000 } /* Generic.Inserted */.go { color: #888888 } /* Generic.Output */.gp { color: #000080; font-weight: bold } /* Generic.Prompt */.gs { font-weight: bold } /* Generic.Strong */.gu { color: #800080; font-weight: bold } /* Generic.Subheading */.gt { color: #0044DD } /* Generic.Traceback */.kc { color: #008000; font-weight: bold } /* Keyword.Constant */.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */.kp { color: #008000 } /* Keyword.Pseudo */.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */.kt { color: #B00040 } /* Keyword.Type */.m { color: #666666 } /* Literal.Number */.s { color: #BA2121 } /* Literal.String */.na { color: #7D9029 } /* Name.Attribute */.nb { color: #008000 } /* Name.Builtin */.nc { color: #0000FF; font-weight: bold } /* Name.Class */.no { color: #880000 } /* Name.Constant */.nd { color: #AA22FF } /* Name.Decorator */.ni { color: #999999; font-weight: bold } /* Name.Entity */.ne { color: #D2413A; font-weight: bold } /* Name.Exception */.nf { color: #0000FF } /* Name.Function */.nl { color: #A0A000 } /* Name.Label */.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */.nt { color: #008000; font-weight: bold } /* Name.Tag */.nv { color: #19177C } /* Name.Variable */.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */.w { color: #bbbbbb } /* Text.Whitespace */.mb { color: #666666 } /* Literal.Number.Bin */.mf { color: #666666 } /* Literal.Number.Float */.mh { color: #666666 } /* Literal.Number.Hex */.mi { color: #666666 } /* Literal.Number.Integer */.mo { color: #666666 } /* Literal.Number.Oct */.sa { color: #BA2121 } /* Literal.String.Affix */.sb { color: #BA2121 } /* Literal.String.Backtick */.sc { color: #BA2121 } /* Literal.String.Char */.dl { color: #BA2121 } /* Literal.String.Delimiter */.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */.s2 { color: #BA2121 } /* Literal.String.Double */.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */.sh { color: #BA2121 } /* Literal.String.Heredoc */.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */.sx { color: #008000 } /* Literal.String.Other */.sr { color: #BB6688 } /* Literal.String.Regex */.s1 { color: #BA2121 } /* Literal.String.Single */.ss { color: #19177C } /* Literal.String.Symbol */.bp { color: #008000 } /* Name.Builtin.Pseudo */.fm { color: #0000FF } /* Name.Function.Magic */.vc { color: #19177C } /* Name.Variable.Class */.vg { color: #19177C } /* Name.Variable.Global */.vi { color: #19177C } /* Name.Variable.Instance */.vm { color: #19177C } /* Name.Variable.Magic */.il { color: #666666 } /* Literal.Number.Integer.Long */</style><style>h1.title {margin-top : 20px}img {max-width : 100%}#From nbconvert.ansi-black-fg { color: #3E424D; }.ansi-black-bg { background-color: #3E424D; }.ansi-black-intense-fg { color: #282C36; }.ansi-black-intense-bg { background-color: #282C36; }.ansi-red-fg { color: #E75C58; }.ansi-red-bg { background-color: #E75C58; }.ansi-red-intense-fg { color: #B22B31; }.ansi-red-intense-bg { background-color: #B22B31; }.ansi-green-fg { color: #00A250; }.ansi-green-bg { background-color: #00A250; }.ansi-green-intense-fg { color: #007427; }.ansi-green-intense-bg { background-color: #007427; }.ansi-yellow-fg { color: #DDB62B; }.ansi-yellow-bg { background-color: #DDB62B; }.ansi-yellow-intense-fg { color: #B27D12; }.ansi-yellow-intense-bg { background-color: #B27D12; }.ansi-blue-fg { color: #208FFB; }.ansi-blue-bg { background-color: #208FFB; }.ansi-blue-intense-fg { color: #0065CA; }.ansi-blue-intense-bg { background-color: #0065CA; }.ansi-magenta-fg { color: #D160C4; }.ansi-magenta-bg { background-color: #D160C4; }.ansi-magenta-intense-fg { color: #A03196; }.ansi-magenta-intense-bg { background-color: #A03196; }.ansi-cyan-fg { color: #60C6C8; }.ansi-cyan-bg { background-color: #60C6C8; }.ansi-cyan-intense-fg { color: #258F8F; }.ansi-cyan-intense-bg { background-color: #258F8F; }.ansi-white-fg { color: #C5C1B4; }.ansi-white-bg { background-color: #C5C1B4; }.ansi-white-intense-fg { color: #A1A6B2; }.ansi-white-intense-bg { background-color: #A1A6B2; }.ansi-bold { font-weight: bold; }</style></head><body>    <div class="container">        <div class="row">            <div class="col-md-12 twelve columns"><h1>Basic DSNT usage guide</h1><p><em>You can use <a href="http://mpastell.com/pweave/" target="_blank" rel="noopener">Pweave</a> to execute the code in thisdocument and produce a HTML report.</em></p><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torch</span><span class="n">torch</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span></pre></div><div class="highlight"><pre>&lt;torch._C.Generator at 0x7fa9bad16c10&gt;</pre></div><h2>Building a coordinate regression model</h2><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">torch</span> <span class="kn">import</span> <span class="n">nn</span><span class="kn">import</span> <span class="nn">dsntnn</span></pre></div><p>The bulk of the model can be any sort of fully convolutional network (FCN).Here we'll just use a custom network with three convolutional layers.</p><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FCN</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>            <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">BatchNorm2d</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">BatchNorm2d</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>            <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>        <span class="p">)</span>    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></pre></div><p>Using the DSNT layer, we can very simply extend any FCN to tacklecoordinate regression tasks.</p><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CoordRegressionNetwork</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_locations</span><span class="p">):</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>        <span class="bp">self</span><span class="o">.</span><span class="n">fcn</span> <span class="o">=</span> <span class="n">FCN</span><span class="p">()</span>        <span class="bp">self</span><span class="o">.</span><span class="n">hm_conv</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">n_locations</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">):</span>        <span class="c1"># 1. Run the images through our FCN</span>        <span class="n">fcn_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fcn</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>        <span class="c1"># 2. Use a 1x1 conv to get one unnormalized heatmap per location</span>        <span class="n">unnormalized_heatmaps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hm_conv</span><span class="p">(</span><span class="n">fcn_out</span><span class="p">)</span>        <span class="c1"># 3. Normalize the heatmaps</span>        <span class="n">heatmaps</span> <span class="o">=</span> <span class="n">dsntnn</span><span class="o">.</span><span class="n">flat_softmax</span><span class="p">(</span><span class="n">unnormalized_heatmaps</span><span class="p">)</span>        <span class="c1"># 4. Calculate the coordinates</span>        <span class="n">coords</span> <span class="o">=</span> <span class="n">dsntnn</span><span class="o">.</span><span class="n">dsnt</span><span class="p">(</span><span class="n">heatmaps</span><span class="p">)</span>        <span class="k">return</span> <span class="n">coords</span><span class="p">,</span> <span class="n">heatmaps</span></pre></div><h2>Training the model</h2><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">torch</span> <span class="kn">import</span> <span class="n">optim</span><span class="kn">from</span> <span class="nn">torch.autograd</span> <span class="kn">import</span> <span class="n">Variable</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span><span class="kn">import</span> <span class="nn">scipy.misc</span></pre></div><p>To demonstrate the model in action, we're going to train on an image of araccoon's eye.</p><div class="highlight"><pre><span></span><span class="n">image_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span><span class="n">raccoon_face</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">imresize</span><span class="p">(</span><span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">face</span><span class="p">()[</span><span class="mi">200</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span> <span class="mi">600</span><span class="p">:</span><span class="mi">800</span><span class="p">,</span> <span class="p">:],</span> <span class="n">image_size</span><span class="p">)</span><span class="n">eye_x</span><span class="p">,</span> <span class="n">eye_y</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">26</span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">raccoon_face</span><span class="p">)</span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">([</span><span class="n">eye_x</span><span class="p">],</span> <span class="p">[</span><span class="n">eye_y</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;X&#39;</span><span class="p">)</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div><div class="highlight"><pre>/home/maddaff/miniconda2/envs/python36/bin/pweave:2:DeprecationWarning: `imresize` is deprecated!`imresize` is deprecated in SciPy 1.0.0, and will be removed in 1.2.0.Use ``skimage.transform.resize`` instead.</pre></div><img src="data:image/png;base64,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" width="600"><p>The input and target need to be put into PyTorch tensors. Importantly,the target coordinates are normalized so that they are in the range (-1, 1).The DSNT layer always outputs coordinates in this range.</p><div class="highlight"><pre><span></span><span class="n">raccoon_face_tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">raccoon_face</span><span class="p">)</span><span class="o">.</span><span class="n">permute</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">()</span><span class="n">input_tensor</span> <span class="o">=</span> <span class="n">raccoon_face_tensor</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="n">input_var</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">input_tensor</span><span class="p">,</span> <span class="n">requires_grad</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="n">eye_coords_tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([[[</span><span class="n">eye_x</span><span class="p">,</span> <span class="n">eye_y</span><span class="p">]]])</span><span class="n">target_tensor</span> <span class="o">=</span> <span class="p">(</span><span class="n">eye_coords_tensor</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">image_size</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="n">target_var</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">target_tensor</span><span class="p">,</span> <span class="n">requires_grad</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Target: {:0.4f}, {:0.4f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">target_tensor</span><span class="o">.</span><span class="n">squeeze</span><span class="p">())))</span></pre></div><div class="highlight"><pre>Target: 0.2250, 0.3250</pre></div><p>The coordinate regression model needs to be told ahead of time how manylocations to predict coordinates for. In this case we'll intantiate amodel to output 1 location per image.</p><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">CoordRegressionNetwork</span><span class="p">(</span><span class="n">n_locations</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></pre></div><p>Doing a forward pass with the model is the same as with any PyTorch model.The results aren't very good yet since the model is completely untrained.</p><div class="highlight"><pre><span></span><span class="n">coords</span><span class="p">,</span> <span class="n">heatmaps</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">input_var</span><span class="p">)</span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Initial prediction: {:0.4f}, {:0.4f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">coords</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])))</span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">heatmaps</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">())</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div><div class="highlight"><pre>Initial prediction: -0.0002, -0.0133</pre></div><img src="data:image/png;base64,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" width="600"><p>Now we'll train the model to overfit the location of the eye. Of course,for real applications the model should be trained and evaluated usingseparate training and validation datasets!</p><div class="highlight"><pre><span></span><span class="n">optimizer</span> <span class="o">=</span> <span class="n">optim</span><span class="o">.</span><span class="n">RMSprop</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="p">(),</span> <span class="n">lr</span><span class="o">=</span><span class="mf">2.5e-4</span><span class="p">)</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">400</span><span class="p">):</span>    <span class="c1"># Forward pass</span>    <span class="n">coords</span><span class="p">,</span> <span class="n">heatmaps</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">input_var</span><span class="p">)</span>    <span class="c1"># Per-location euclidean losses</span>    <span class="n">euc_losses</span> <span class="o">=</span> <span class="n">dsntnn</span><span class="o">.</span><span class="n">euclidean_losses</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">target_var</span><span class="p">)</span>    <span class="c1"># Per-location regularization losses</span>    <span class="n">reg_losses</span> <span class="o">=</span> <span class="n">dsntnn</span><span class="o">.</span><span class="n">js_reg_losses</span><span class="p">(</span><span class="n">heatmaps</span><span class="p">,</span> <span class="n">target_var</span><span class="p">,</span> <span class="n">sigma_t</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>    <span class="c1"># Combine losses into an overall loss</span>    <span class="n">loss</span> <span class="o">=</span> <span class="n">dsntnn</span><span class="o">.</span><span class="n">average_loss</span><span class="p">(</span><span class="n">euc_losses</span> <span class="o">+</span> <span class="n">reg_losses</span><span class="p">)</span>    <span class="c1"># Calculate gradients</span>    <span class="n">optimizer</span><span class="o">.</span><span class="n">zero_grad</span><span class="p">()</span>    <span class="n">loss</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>    <span class="c1"># Update model parameters with RMSprop</span>    <span class="n">optimizer</span><span class="o">.</span><span class="n">step</span><span class="p">()</span><span class="c1"># Predictions after training</span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Predicted coords: {:0.4f}, {:0.4f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">coords</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])))</span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">heatmaps</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">())</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div><div class="highlight"><pre>Predicted coords: 0.2229, 0.3198</pre></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAr4AAAK2CAYAAACo1J8YAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAewgAAHsIBbtB1PgAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDMuMC4wLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvqOYd8AAAIABJREFUeJzt3Xu0rVV9H/zvD45cvURBpVwiCsFLahsSQoOoaJMmUXBIDUZtjCGA2rSlSoyXkZvGhlRrbfRVozEaEG005EXAoA68BPES8np0GGOjSEBUjlQRI8odOcz3j/VszuK473uvs9fa8/MZY401n+eZcz5zMR7O/u5nzzWfaq0FAAA2u902egAAALArCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABd2LLRA1ipqnpIkv+a5PgkhyS5PclVSc5N8qbW2i0TOOeeSR49bH47yfb1PgcAQOd2T/LAofyF1trt632Caq2td58TU1VPSfKuJPddoMoVSY5vrV25zuc9KsnW9ewTAIAF/XRr7TPr3enMTHWoqiOT/GVGofemJL+T5DFJfjbJnw3Vjkjy/qq6z4YMEgCAqTVLUx1en2TvJHcm+fnW2mVjx/6mqv4pyf/IKPy+KMkr1vHc354r/HSemD2z9zp2DQDA7bk1W3PJ3Oa3F6u7WjMRfKvq6CSPGzbfvlPonfPaJL+e5JFJXlBVZ7bWfrBOQ7h7Tu+e2Tt71T7r1C0AAEmSe86+ncj3qWZlqsOJY+Wz5qvQWrsryTnD5o8keeKkBwUAwOyYleD72OH95iSfXaTepWPlYyc3HAAAZs1MTHXIaPpCklzZWrtzkXqXz9NmSVV18BJVDlhuXwAATKepD75VtVeS/YfNbYvVba19t6puTrJvRmv8Ltc1qxweAAAzYhamOowvTXbTMurfPLzfewJjAQBgRk39Hd8ke42V71hG/bmnfKxkzbGl7g4fEA+wAACYabMQfG8bK++xjPp7Du+3LvcErbVFp1BU1XK7AgBgSs3CVIcbx8rLmb6w7/C+nGkRAAB0YuqDb2vttiTfGTYXXX2hqu6fHcHXF9YAALjb1AffwReH98OrarHpGY8YK39pguMBAGDGzErw/eTwvm+Sn1qk3nFj5U9NbjgAAMyaWQm+F4yVf32+ClW1W5LnDJs3JLlk0oMCAGB2zETwba19Osknhs1Tq+qYeaq9KDue1vb61toPdsngAACYCbOwnNmcF2Q0fWHvJB+qqj/K6K7u3kmemeR5Q70rkrx2Q0YIAMDUmpng21r7XFU9I8m7ktw3yR/NU+2KJMe31m6c5xgAAB2biakOc1prf53kXyX544xC7i0Zzef9TJKXJjmytXblxo0QAIBpNTN3fOe01r6W5DeHFwAALMtM3fEFAIDVEnwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuzETwraq2zNfHNnqsAABMp5kIvgAAsFZbNnoAK/TmJH+yyPGbd9VAAACYLbMWfK9rrf2fjR4EAACzx1QHAAC6IPgCANAFwRcAgC7M2hzfp1fVLyc5NMn2JN9M8rdJzm6tXbLaTqvq4CWqHLDavgEAmA6zFnwftdP24cPrOVV1QZKTW2vfW0W/16x5ZAAATLVZCb63JHlfko8muTzJTUkemOS4JP8xyX5JTkxyYVX9u9baDzZqoAAATKdZCb4HtdZumGf/h6vqDUk+mOTIjILwbyT5f1bY/yFLHD8gydYV9gkAwBSZieC7QOidO/atqjopozvB90pyelYYfFtr2xY7XlUr6Q4AgCm0KVZ1aK19JcmHh83Dq+rAjRwPAADTZ1ME38EXx8oHbdgoAACYSpsp+LaNHgAAANNrMwXf8aXOrt2wUQAAMJU2RfCtqocm+XfD5lWttW9s5HgAAJg+Ux98q+opVbXg6hNV9eAk5yXZY9j1J7tkYAAAzJRZWM7sDUnuVVXnJbksyVeT3Jpk/yRPSPL8oZwkn0zypl0/RAAApt0sBN8kOTCj9XlPX6TOeUlOa63dvmuGBADALJmF4PtrGT2R7ZgkD8vo7u59M3ps8TVJ/jbJO1prl23YCAEAmHpTH3xba5cmuXSjxwEAwGyb+i+3AQDAehB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0IWJBt+qelBVnVBVr6yqD1bV9VXVhtfZq+jvSVV1flVtq6rbh/fzq+pJExg+AACbyJYJ9/+t9eikqnZL8tYkp+506KDhdWJVvS3J81trd63HOQEA2Fx25VSHryf50CrbnpkdofdzSZ6V5Ojh/XPD/tOS/OFaBggAwOY16Tu+r0yyNcnW1tq3qurQJFevpIOqOiLJbw2bn0ny+NbarcP21qp6X5JLkxyV5MVV9eettSvXY/AAAGweE73j21p7eWvtotbaWqY8vDA7AvrpY6F37hy3JDl92NyS5Iw1nAsAgE1qqld1qKpK8tRh8/LW2t/NV2/Y/+Vh86lDOwAAuNtUB98kD01y4FC+dIm6c8cPSnLopAYEAMBsmvQc37V61Fj58iXqjh9/ZFYwl7iqDl6iygHL7QsAgOk07cF3PJBuW6LuNWPlQ1Z4nmuWrgIAwCyb9qkO9xkr37RE3ZvHyveewFgAAJhh037Hd6+x8h1L1L19rLz3Cs+z1B3iAzJalg0AgBk17cH3trHyHkvU3XOsfOuCtebRWlt0GoVFIgAAZt+0T3W4cay81PSFfcfKS02LAACgM9MefMfvxC618sL4dAVfVgMA4B6mPfh+caz8iCXqjh//0gTGAgDADJv24Ht1kmuH8nFL1H388P6NJF+d1IAAAJhNUx18W2styYXD5iOq6mfmqzfsn7vje+HQDgAA7jbVwXfwuiTbh/IbquoeS5UN228YNu8c6gMAwD1MdDmzqnpsksPHdu0/Vj68qk4er99aO3vnPlprV1TVa5K8LMlRST5VVa9OclWSw5K8NMmRQ/XXtNb+ad0+AAAAm8ak1/E9LcmvLXDs2OE17uwF6v5OkgclOSWjkPueeeq8PcnvrnyIAAD0YBamOqS1dldr7dQkx2c05/fajJ7kdu2w/eTW2mmttbs2cJgAAEyxid7xba2dnOTkdezvA0k+sF79AQDQj5m44wsAAGsl+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF2YaPCtqgdV1QlV9cqq+mBVXV9VbXidvcw+Th5rs9Tr5El+HgAAZteWCff/rQn3DwAAyzLp4Dvu60kuT/Lza+jjF5Jcu8jxbWvoGwCATWzSwfeVSbYm2dpa+1ZVHZrk6jX0d0Vr7avrMC4AADoz0eDbWnv5JPsHAIDlsqoDAABdEHwBAOjCrvxy23o4q6oenmT/JN9PcmWSjyR5c2vtG6vttKoOXqLKAavtGwCA6TBrwfcJY+X9hte/SfKiqnpha+1PV9nvNWsdGAAA021Wgu9Xkrw3yWXZEVIfluSXkpyUZK8kb6mq1lp768YMEQCAaTYLwff8JO9orbWd9m9N8pdVdUJGofheSf64qt7XWvvmCs9xyBLHDxjOBwDAjJr6L7e11r43T+gdP35RRusFJ8k+SU5dxTm2LfZKstIgDQDAlJn64LtMb00yF46P28iBAAAwnTZF8G2tXZfkO8PmQRs5FgAAptOmCL6DBadDAADApgi+VfXAjNb2TZJrN3IsAABMp00RfJM8L0kN5Us3ciAAAEynqQ6+VXVoVR25RJ0Tkvz+sHlrkrMmPjAAAGbORNfxrarHJjl8bNf+Y+XDq+rk8fqttbN36uLQJJdU1WVJ/jrJ55NcNxx7WEYPrzgpO+72/tZaHl0MAMDmNekHWJyW5NcWOHbs8Bp39gJ1jxleC7klyRme2gYAwEKm/cltn03y7IxC71FJ/kVGd423JPlukn9M8tEkbxuWNAMAgHlNNPi21k5OcvIa2t+Y5H8PLwAAWLWp/nIbAACsF8EXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXZho8K2qo6rq96vqQ1W1rapur6qbquqKqjqrqh67wv6eVFXnj/W1bdh+0qQ+AwAAm8OWSXVcVR9P8rh5Du2R5MeG18lVdU6S57bW7likr92SvDXJqTsdOmh4nVhVb0vy/NbaXesxfgAANpdJ3vE9cHi/Nsnrk5yU5OgkxyT5zSTfGI4/J8nZS/R1ZnaE3s8ledbQ17OG7SQ5LckfrsO4AQDYhKq1NpmOqy5Kck6S81pr2+c5vn+STyU5Yth1XGvt4/PUOyLJP2Z0d/ozSR7fWrt17Pg+SS5NclSSO5M8srV25Tp/loOTXJMkj82Ts1fts57dAwB077Z2Sz6ZD8xtHtJa27be55jYHd/W2gmttXPnC73D8euTvGhs10kLdPXC7JiScfp46B36uSXJ6cPmliRnrH7UAABsVhu9qsMlY+XDdj5YVZXkqcPm5a21v5uvk2H/l4fNpw7tAADgbhsdfPccK893Z/ih2TFX+NIl+po7flCSQ9c2LAAANpuJreqwTMeNlb80z/FHjZUvX6Kv8eOPTHL1cgcxzOFdzAHL7QsAgOm0YcF3WKLsZWO7zp2n2nggXWqC8zVj5UNWOJxrlq4CAMAs28ipDmdktCRZkry3tfbZeercZ6x80xL93TxWvvdaBgYAwOazIXd8q+q4JK8aNq9L8hsLVN1rrLzgAy4Gt4+V917hkJa6Q3xAkq0r7BMAgCmyy4NvVf14kvOHc9+W5OmttesWqH7bWHmPJboe/6LcrQvWmsdS68RZJAIAYPbt0qkOVfXQJB9Kcv+MVnF45nwPrRhz41h5qekL+46Vl5oWAQBAZ3ZZ8K2qA5N8JKPlyVqSU1prFy7RbPxO7FIrL4xPV/BlNQAA7mGXBN/h8cQfTvKwYdfprbVzltH0i2PlRyxRd/z4fEujAQDQsYkH36q6X5KLs2NN3pe11t60zOZXJ7l2KB+3WMUkjx/ev5HkqysZIwAAm99Eg29V7ZPk/Ul+cth1Zmvt1ctt31prSeamQzyiqn5mgfP8THbc8b1waAcAAHebWPCtqj0yWr3h2GHX61trv7uKrl6XHY8zfkNV3WOpsmH7DcPmnUN9AAC4h0kuZ/buJD8/lP8mydur6l8uUv+O1toVO+9srV1RVa/J6ClvRyX5VFW9OslVSQ5L8tIkRw7VX9Na+6f1+gAAAGwekwy+Txsr/9sk/7BE/a8lOXSBY7+T5EFJTsko5L5nnjpvT7KaO8oAAHRgIx9ZvGyttbtaa6cmOT6jOb/XZvQkt2uH7Se31k5rrd21gcMEAGCKTeyOb2tt3R931lr7QJIPrHe/AABsfjNxxxcAANZK8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRhy0YPAADuYbfdV9+23bV+41jxudvGnRtYFnd8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdGHLRg8AgE1ot91X3XTLjx606rbbH3i/Vbfd/bobVt02Se78+rY1tV+11jbmvDCD3PEFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAujDR4FtVR1XV71fVh6pqW1XdXlU3VdUVVXVWVT12GX2cXFVtma+TJ/l5AACYXVsm1XFVfTzJ4+Y5tEeSHxteJ1fVOUme21q7Y1JjAehW1eqbbrnXqtvuvv8DVt32a884eNVt937c9atue8unDll12yR5yJ/dsuq22//5htWfuG1ffVvozMSCb5IDh/drk/xVkk8k+XqS3ZMck+RFSQ5K8pwk90ryH5bR5y8M/S1k22oHCwDA5jbJ4Ht5kt9Ocl5rP/Tr6N9V1TuTfCrJEUmeVVVvaa19fIk+r2itfXX9hwoAwGY3sTm+rbUTWmvnzhN6545fn9Fd3zknTWosAACw0as6XDJWPmzDRgEAwKa30cF3z7Gy2fkAAEzMJOf4LsdxY+UvLaP+WVX18CT7J/l+kiuTfCTJm1tr31jtIKpqqa8QH7DavgEAmA4bFnyrarckLxvbde4ymj1hrLzf8Po3SV5UVS9srf3pKodzzSrbAQAwIzbyju8ZSY4eyu9trX12kbpfSfLeJJdlR0h9WJJfyuhLcXsleUtVtdbaWyc0XgAAZtiGBN+qOi7Jq4bN65L8xiLVz0/yjtZa22n/1iR/WVUnZBSK75Xkj6vqfa21b65wSEutWn7AcD4AAGbULv9yW1X9eEZhdkuS25I8vbV23UL1W2vfmyf0jh+/KMkrh819kpy60jG11rYt9kqy0iANAMCU2aXBt6oemuRDSe6f0SoOz1zGQyuW461J5sLxcYtVBACgT7ss+FbVgRmtwHBgRiH1lNbahevR93DH+DvD5kHr0ScAAJvLLgm+VbV/kg9n9IW0JDm9tXbOOp9mwekQAAAw8eBbVfdLcnGSRw27XtZae9M6n+OBGa3tmyTXrmffAABsDhMNvlW1T5L3J/nJYdeZrbVXT+BUz0tSQ/nSCfQPAMCMm9hyZlW1R0arNxw77Hp9a+13V9jHoUnu31r73CJ1Tkjy+8PmrUnOWvFgATarhRfFWdputXSdBWw/+IGrP+0x3111260/uZxnIc3vsCv/46rbJsldh6zhIZ/f+ec1nRtYnkmu4/vuJD8/lP8mydur6l8uUv+O1toVO+07NMklVXVZkr9O8vmM1v1NRvOFTxpec/86/9ZaHl0MAMDmNcng+7Sx8r9N8g9L1P9aRkF3PscMr4XckuQMT20DAGAhG/nI4uX4bJJnZxR6j0ryLzL6EtuWJN9N8o9JPprkbYs9BAMAACYWfFtrq58ctqOPG5P87+EFAACrtssfWQwAABtB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALE3tkMQCzrf3gzlW33f3r31p12y0XH7bqtg+75vmrbrvfP9Sq2ybJbldvW3Xb7a2t6dzA8rjjCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAtbNnoAAEypu7avuun2b39n1W0f/K5bV932gKpVt73r1ttW3TZJtv/gjjW1BybPHV8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABd2LLRAwBgE7pr++qb3njjOg4EYAd3fAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQhYkF36q6b1U9s6peW1WXVtWVVfW9qrqjqq6rqo9V1Uuqar9l9veYqnpXVX2tqm6rqm9W1cVV9axJfQYAADaPaq1NpuOqn0vy4WVUvT7Js1trFy/S1yuS/F4WDurvT3JSa+22lY5zOarq4CTXJMlj8+TsVftM4jQAAN26rd2ST+YDc5uHtNa2rfc5Jj3V4Zok5yR5QZKnJTkmybFJnpHkr5JsT7J/kvdV1b+er4Oqen6Slw9jvSrJqUmOTnJikkuGascn+fOJfQoAAGbeJO/47t5a275EnROTnD9snt9ae9pOxx+Q5CtJ7pfk60l+qrV2/fg5hvZPGXY9sbX2sfX5BPcYhzu+AAATNNN3fJcKvUOdC5J8edh83DxVTsso9CbJS8dD79g5/lNGd46T5MWrGy0AAJvdNKzqcOPwvtc8x04c3r+f5L3zNR5+G/jIsPmzVXWf9R0eAACbwYYG36p6eJKfGDYv3+nYHhnN5U2Sy1prdyzS1aXD+55JjlrXQQIAsCls2dUnrKp9khyU0bzcl4yN4XU7VT0iye5D+fIsbvz4I7PjS2/LHdPBS1Q5YCX9AQAwfXZJ8K2qk5OctUiVVyX5i532jYfRpSY3XzNWPmT5I5u3PQAAm9Auv+O7k79P8rzW2tZ5jo3P1b1piX5uHivfe82jAgBg09lVwfeCJJ8ZynsnOSzJLyf590neXVUvbK1dtFOb8S+7LTa/N0luHyvvvYrxLXWX+IAk84VzAABmxC4Jvq21G5LcMLZra5L3VNWvJnlHkgur6tTW2tljdcafwrbHEqfYc6x86yrGt+hUiqpaaZcAAEyZDV3VobX2zoye4LZbkjcOD6yYc+NYeanpC/uOlZeaFgEAQIemYR3fC4f3fZP84tj+8buwS626MD5VwRfVAAD4IdMQfL89Vn7IWPmK7Hgi2yOW6GP8+JfWY1AAAGwu0xB8Dxor3z1NYXhgxaeHzWOGB1os5Ljh/fbs+BIdAADcbRqC79PHyl/Y6dgFw/t9kzxtvsbDwyd+btj8aGvtxvnqAQDQt4kF36o6uar2WqLOGUmePGxeneQTO1V5W5LvDeVXVdV+O7XfPcmfZMcT3l6zpkEDALBpTXI5s1ckeW1VnZfkk0muymgqw32SPDrJryQ5dqh7R0YPstg+3kFr7Z+r6qVJ3pLR/N//r6rOzOjO8IFJXpjkiUP1d7fWPjbBzwMAwAyb9Dq+D0jy3OG1kG1JTmmtfWS+g621P62qA5P8XkYPvvjzeap9IMkpaxwrAACb2CSD7y8kOT6ju7qHJ3lwkv0yesDEdRk9rviiJOe21m5ZrKPW2sur6uIk/znJ44a+bkjy+SRntdbePakPAQDA5jCx4Nta+3KSLyf5X+vU398m+dv16AsAgP5Mw6oOAAAwcYIvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQhYkF36q6b1U9s6peW1WXVtWVVfW9qrqjqq6rqo9V1Uuqar9F+nhCVbVlvl4xqc8CAMDs2zLBvo9O8u4Fjj0wyXHD68VV9ezW2sUTHAsAAJ2bZPBNkmuSXJLks0P5/2Z0l/ngJCcleVqS/ZO8r6qObq19fpG+TkmydZHj163LiAEA2JQmGXwvaa396CLHz62qE5Ocn2SPJC/PKAgv5OrW2v9ZzwECANCPic3xba1tX0adC5J8edh83KTGAgAA07Cqw43D+14bOgoAADa1DQ2+VfXwJD8xbF6+kWMBAGBzm/SX235IVe2T5KAkT0nykrExvG6JpmdW1cFJDkjquEo3AAANx0lEQVRyS5KvJvlYkje31q5Y45gOXqLKAWvpHwCAjbdLgm9VnZzkrEWqvCrJXyzRzWPGyntkdKf4J5L816r6b0n+oLXWVjnEa1bZDgCAGbHL7/ju5O+TPK+1ttgyZf83yXuTfDLJV5LcmeRHk5yQ5DlJ7pXRihB7JPntiY4WAICZVau/SbqCk1T9SEZr9ybJ3kkOS/LLSf59kquSvLC1dtE87fZNckdr7QcL9Ht0kg8luV+SluTIJdYCXmh8y5nqsDVJHpsnZ6/aZ6WnAABgEbe1W/LJfGBu85DW2rb1PscuuePbWrshyQ1ju7YmeU9V/WqSdyS5sKpOba2dvVO7m5fo99NV9V+SvDNJJfkvSZ67ivEt+h+2qlbaJQAAU2ZDV3Vorb0zyV8N43hjVT1gFd28J8n3h/Jx6zU2AAA2l2lYx/fC4X3fJL+40sattTuTzK3qcNB6DQoAgM1lGoLvt8fKD1llH5OfqAwAwEybhuA7fpf2ppU2rqotSY4YNq9dlxEBALDpTEPwffpY+QuraP+MjFZ1SJJL1z4cAAA2o4kF36o6uar2WqLOGUmePGxeneQTY8fuX1VPWKL90UneOGy2JG9e9YABANjUJrmc2SuSvLaqzsvo4RNXZTSV4T5JHp3kV5IcO9S9I6MHWWwfa3+/JJdU1T8kuSDJZzN6mMX27HiAxa9m9OCKJPmfrbXPTvDzAAAwwya9ju8DMlpXd7G1dbclOaW19pEFjv+r4bWQ7Un+W5JXrmqEAAB0YZLB9xeSHJ/RXd3Dkzw4yX5Jbk1yXUaPK74oybmttVvmaX9tRvN/j0lydEZfgts/yV5Jvpfky0k+luRtrbWvTvBzAACwCUws+LbWvpxROP1fq2x/R5L/d3gBAMCaTMOqDgAAMHGCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALqwZaMHMCN2nyvcnluTtpFDAQDYfG7PreObuy9Uby0E3+V54Fxhay7ZyHEAAPTggUm+tt6dmuoAAEAXqjV/t19KVe2Z5NHD5reTbB87fECSrUP5p5N8cxcOjc3NtcWkuLaYFNcWa7F7dvyV/QuttdvX+wSmOizD8B/+M/Mdq6rxzW+21rbtkkGx6bm2mBTXFpPi2mIdrPv0hnGmOgAA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFzzAAgCALrjjCwBAFwRfAAC6IPgCANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4rkFVPaSqXltVl1fVzVX1z1W1tapeXFX7bPT4mC5V9aCqOqGqXllVH6yq66uqDa+zV9Hfk6rq/KraVlW3D+/nV9WTJjB8plhVHVVVv19VHxq7Hm6qqiuq6qyqeuwK+3Ntkaq6b1U9c/g5d2lVXVlV36uqO6rquqr6WFW9pKr2W2Z/j6mqd1XV16rqtqr6ZlVdXFXPmvRngTnVWtvoMcykqnpKknclue8CVa5Icnxr7cpdNyqmWVUt9j/bO1prJy+zn92SvDXJqYtUe1uS57fW7lr+CJlFVfXxJI9bRtVzkjy3tXbHIn25trhbVf1ckg8vo+r1SZ7dWrt4kb5ekeT3svANt/cnOam1dttKxwkr4Y7vKlTVkUn+MqPQe1OS30nymCQ/m+TPhmpHJHl/Vd1nQwbJtPt6kg+tsu2Z2RFMPpfkWUmOHt4/N+w/LckfrmWAzIwDh/drk7w+yUkZXQ/HJPnNJN8Yjj8nydlL9OXaYmfXZPRL0wuSPC2j6+rYJM9I8ldJtifZP8n7qupfz9dBVT0/ycszyhxXZXSNHZ3kxCSXDNWOT/LnE/sUMHDHdxXG7rDcmeTxrbXLdjr+4iT/Y9j8g9baK3btCJlGVfUHSbYm2dpa+1ZVHZrk6uHwsu74VtURSf4xyZYkn8no+rt17Pg+SS5NclRG1+cj/dVhc6uqizIKJue11rbPc3z/JJ/K6JfxJDmutfbxeeq5triHqtp9vmtqpzonJjl/2Dy/tfa0nY4/IMlXktwvo1/4f6q1dv34OYb2Txl2PbG19rH1+QTww9zxXaGqOjo7/qz49p1D7+C1Sb40lF9QVffaJYNjqrXWXt5au6i19q01dPPCjIJJkpw+HkyGc9yS5PRhc0uSM9ZwLmZAa+2E1tq5CwWUIWS8aGzXSQt05driHpYKvUOdC5J8edicb8rNaRmF3iR56XjoHTvHf8roznGSvHh1o4XlEXxX7sSx8lnzVRjmvp0zbP5IkidOelBsflVVSZ46bF7eWvu7+eoN++d+ED11aEffLhkrH7bzQdcWa3Tj8L7XPMfmfmZ+P8l752vcWtuW5CPD5s+aIsgkCb4rN/ft6JuTfHaRepeOlY+d3HDoyEOzYz7npYtVHDt+UJJDJzUgZsaeY+X57uK5tliVqnp4kp8YNi/f6dgeGc3lTZLLFvtiZXZcV3tmNJ0GJkLwXblHDu9XttbuXKTe+D8Aj1ywFizfo8bKly9Y64ePu/44bqz8pXmOu7ZYtqrap6p+rKp+M6PAOjdF5nU7VT0iye5D2XXFVNiydBXmVNVeGX17NUm2LVa3tfbdqro5yb5JDpn02OjCwWPlRa+/jL6JPcf117FhibKXje06d55qri0WVVUnZ4HpfYNXJfmLnfa5rpg6gu/KjM87umkZ9eeC770nMxw6s5Lr7+axsuuvb2dkx5+b39tam2+KlmuL1fr7JM9rrW2d55jriqljqsPKjE/cX2yu0pzbh/e9JzAW+rOS6+/2sbLrr1NVdVxGd+KS5Lokv7FAVdcWS7kgyaOH19zazudnNL/33VV1wjxtXFdMHXd8V2b8iTJ7LKP+3BdKbl20FizPSq6/8S8zuf46VFU/nlEw2ZLRtfP01tp1C1R3bbGo1toNSW4Y27U1yXuq6leTvCPJhVV1amvt7LE6riumjju+K3PjWHk5f4rZd3hfzrQIWMpKrr99x8quv85U1UMzejLg/TNaxeGZ8z20Yoxri1Vprb0zoye47ZbkjcMDK+a4rpg6gu8KDM8Q/86wefBidavq/tnxP/I1i9WFZRr/csii11/u+eUQ119HqurAjNZEPTBJS3JKa+3CJZq5tliLuetr3yS/OLbfdcXUEXxX7ovD++FVtdhUkUeMledbPghW6otj5UcsWOuHj7v+OjE8nvjDSR427Dq9tXbOIk3muLZYi2+PlR8yVr4iO9aNdl0xFQTflfvk8L5vkp9apN74upmfmtxw6MjVSa4dysctVjHJ44f3byT56qQGxPSoqvsluTg71uR9WWvtTcts7tpiLQ4aK989TWF4YMWnh81jhgdaLGTuurs9yWfWd3iwg+C7cheMlX99vgrDupnPGTZvyD0fFwqr0lpr2fEnxUdU1c/MV2/YP3f35MKhHZtYVe2T5P1JfnLYdWZr7dXLbe/aYo2ePlb+wk7H5n5m3jfJ0+ZrXFUHJ/m5YfOjrbUb56sH60HwXaHW2qeTfGLYPLWqjpmn2ouy48kzr2+t/WCXDI4evC47/nT4hqq6x7I/w/Ybhs0788NPUmKTGe6inZ8dj0Z/fWvtd1fRlWuLe6iqk4cHNy1W54wkTx42r86On49z3pbke0P5VVW1307td0/yJ9nxhLfXrGnQsITyC/vKVdWRGU1f2DujP+v8UUZ3dfdO8swkzxuqXpHkKL+9kiRV9dgkh4/t2j87/pH/VEY/IO6207JA4/389+x4Etfnkrw6yVVJDkvy0iRHDsf+e2vtt9dj7EyvqjovO+6k/U2SF2b0pbaF3NFau2KBvlxb3K2qvprRQyjOy2ia31UZ/cy7T0br+f5KdvzCdUeS41trH5mnn+cnecuweVWSMzO6M3xgRtfrE4dj726t/YdJfBaYI/iuUlU9Jcm7MvrzzXyuyOgfgSt33aiYZlV1dpJfW2791lot0M9uSf4sySmLNH97Rk9TumslY2T2VNVK/xH/Wmvt0AX6cm1xtyH4PmSpehmt3nBKa+3Di/T1B0l+L8m8/64l+UCSXxpWT4KJEXzXoKoekuQFSY7PaKmWO5JcmdGahm9srd2ygcNjyqxX8B3r78kZ/XXhpzO6e3x9RovK/2lr7YOrHymzZD2D71ifri1SVQ/P6OfbsRn9terBSfbL6AET12X0uOKLkpy7nJ93VfWYJP85yeOGvm5I8vkkZ7XW3j2JzwA7E3wBAOiCL7cBANAFwRcAgC4IvgAAdEHwBQCgC4IvAABdEHwBAOiC4AsAQBcEXwAAuiD4AgDQBcEXAIAuCL4AAHRB8AUAoAuCLwAAXRB8AQDoguALAEAXBF8AALog+AIA0AXBFwCALgi+AAB0QfAFAKALgi8AAF0QfAEA6ILgCwBAFwRfAAC68P8DEhJjEHBxoiMAAAAASUVORK5CYII=" width="600">    <hr>    <div class="footer">      <p>Published from <a href="basic_usage.md">basic_usage.md</a>    using <a href="http://mpastell.com/pweave" target="_blank" rel="noopener">Pweave</a> 0.30.3    on 26-09-2018.</p><p></p></div>            </div>        </div>    </div>  </body></html>]]></content>
      
      
      
        <tags>
            
            <tag> dsntnn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorch在加载模型参数时指定设备</title>
      <link href="/2018/09/26/pytorch-state-dict-gpu-to-cpu/"/>
      <url>/2018/09/26/pytorch-state-dict-gpu-to-cpu/</url>
      
        <content type="html"><![CDATA[<h1 id="将参数加载到CPU"><a href="#将参数加载到CPU" class="headerlink" title="将参数加载到CPU"></a>将参数加载到CPU</h1><p>在使用<code>torch.load()</code>方法加载函数的时候，会遇到CUDA OUT OF MEMORY的问题，这是由于训练的时候是在GPU上进行训练，因此在加载的时候默认也是加载到GPU上。<br>根据<a href="https://pytorch.org/docs/stable/torch.html" target="_blank" rel="noopener">torch.load</a>的官方文档<br><code>torch.load(&#39;my_file.pt&#39;, map_location=lambda storage, loc: storage)</code>语句可以将参数保存到CPU上。</p><h1 id="更多操作"><a href="#更多操作" class="headerlink" title="更多操作"></a>更多操作</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(<span class="string">'tensors.pt'</span>)</span><br><span class="line"><span class="comment"># Load all tensors onto the CPU</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(<span class="string">'tensors.pt'</span>, map_location=torch.device(<span class="string">'cpu'</span>))</span><br><span class="line"><span class="comment"># Load all tensors onto the CPU, using a function</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(<span class="string">'tensors.pt'</span>, map_location=<span class="keyword">lambda</span> storage, loc: storage)</span><br><span class="line"><span class="comment"># Load all tensors onto GPU 1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(<span class="string">'tensors.pt'</span>, map_location=<span class="keyword">lambda</span> storage, loc: storage.cuda(<span class="number">1</span>))</span><br><span class="line"><span class="comment"># Map tensors from GPU 1 to GPU 0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(<span class="string">'tensors.pt'</span>, map_location=&#123;<span class="string">'cuda:1'</span>:<span class="string">'cuda:0'</span>&#125;)</span><br><span class="line"><span class="comment"># Load tensor from io.BytesIO object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'tensor.pt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        buffer = io.BytesIO(f.read())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.load(buffer)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用rsync进行选择性复制</title>
      <link href="/2018/09/21/rsync-exculde-dir/"/>
      <url>/2018/09/21/rsync-exculde-dir/</url>
      
        <content type="html"><![CDATA[<p>有时候复制文件夹希望不全部复制，而是有选择的进行。<br>这时候就可以使用rsync。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -av --exclude cache/ src_folder/ target_folder/</span><br></pre></td></tr></table></figure></p><p>其中exclude参数可以多次使用。<br>在命令中使用<code>-n</code>可以干运行</p>]]></content>
      
      
      
        <tags>
            
            <tag> rsync </tag>
            
            <tag> copy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用privoxy为局域网中的移动设备使用代理</title>
      <link href="/2018/09/20/privoxy-for-ios/"/>
      <url>/2018/09/20/privoxy-for-ios/</url>
      
        <content type="html"><![CDATA[<p>Privoxy是一款实用的端口转发工具，当主机使用代理的时候，可以使用privoxy为同一个局域网内的移动设备使用主机上的代理。</p><h1 id="配置privoxy"><a href="#配置privoxy" class="headerlink" title="配置privoxy"></a>配置privoxy</h1><p><code>vim /etc/privoxy/config</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen-address 0.0.0.0:6666      #这一行可以选择任意未使用端口</span><br><span class="line">forward-socks5 / 127.0.0.1:1080 .  #不要漏掉这里的点</span><br></pre></td></tr></table></figure><h1 id="启动privoxy"><a href="#启动privoxy" class="headerlink" title="启动privoxy"></a>启动privoxy</h1><p><code>service privoxy start</code></p><h1 id="配置移动设备"><a href="#配置移动设备" class="headerlink" title="配置移动设备"></a>配置移动设备</h1><p>这里以iOS为例<br>选择同一局域网下的Wifi，进行配置。<br>HTTP代理设置为“手动”，服务器在主机在局域网内的ip地址，端口填写之前设置的端口。<br>即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> privoxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CCF CSP考前复习-python</title>
      <link href="/2018/09/15/review-before-ccf-csp/"/>
      <url>/2018/09/15/review-before-ccf-csp/</url>
      
        <content type="html"><![CDATA[<h2 id="1-跳一跳"><a href="#1-跳一跳" class="headerlink" title="1. 跳一跳"></a>1. 跳一跳</h2><tr><td class="probref">问题描述：</td><td><div class="pdsec">　　近来，跳一跳这款小游戏风靡全国，受到不少玩家的喜爱。<br>　　简化后的跳一跳规则如下：玩家每次从当前方块跳到下一个方块，如果没有跳到下一个方块上则游戏结束。<br>　　如果跳到了方块上，但没有跳到方块的中心则获得1分；跳到方块中心时，若上一次的得分为1分或这是本局游戏的第一次跳跃则此次得分为2分，否则此次得分比上一次得分多两分（即连续跳到方块中心时，总得分将+2，+4，+6，+8…）。<br>　　现在给出一个人跳一跳的全过程，请你求出他本局游戏的得分（按照题目描述的规则）。</div><div class="pdsec">输入格式</div><div class="pdcont">　　输入包含多个数字，用空格分隔，每个数字都是1，2，0之一，1表示此次跳跃跳到了方块上但是没有跳到中心，2表示此次跳跃跳到了方块上并且跳到了方块中心，0表示此次跳跃没有跳到方块上（此时游戏结束）。</div><div class="pdsec">输出格式</div><div class="pdcont">　　输出一个整数，为本局游戏的得分（在本题的规则下）。</div><div class="pdsec">样例输入</div><div class="pddata">1 1 2 2 2 1 1 2 2 0</div><div class="pdsec">样例输出</div><div class="pddata">22</div><div class="pdsec">数据规模和约定</div><div class="pdcont">　　对于所有评测用例，输入的数字不超过30个，保证0正好出现一次且为最后一个数字。</div><br><br>    </td></tr><script src="https://gist.github.com/sparkydogX/fcb4a0bfa1e2e28d266bd8087bd31678.js"></script><h2 id="2-碰撞的小球"><a href="#2-碰撞的小球" class="headerlink" title="2. 碰撞的小球"></a>2. 碰撞的小球</h2><td><div class="pdsec">问题描述</div><div class="pdcont">　　数轴上有一条长度为L（L为偶数)的线段，左端点在原点，右端点在坐标L处。有n个不计体积的小球在线段上，开始时所有的小球都处在偶数坐标上，速度方向向右，速度大小为1单位长度每秒。<br>　　当小球到达线段的端点（左端点或右端点）的时候，会立即向相反的方向移动，速度大小仍然为原来大小。<br>　　当两个小球撞到一起的时候，两个小球会分别向与自己原来移动的方向相反的方向，以原来的速度大小继续移动。<br>　　现在，告诉你线段的长度L，小球数量n，以及n个小球的初始位置，请你计算t秒之后，各个小球的位置。</div><div class="pdsec">提示</div><div class="pdcont">　　因为所有小球的初始位置都为偶数，而且线段的长度为偶数，可以证明，不会有三个小球同时相撞，小球到达线段端点以及小球之间的碰撞时刻均为整数。<br>　　同时也可以证明两个小球发生碰撞的位置一定是整数（但不一定是偶数）。</div><div class="pdsec">输入格式</div><div class="pdcont">　　输入的第一行包含三个整数n, L, t，用空格分隔，分别表示小球的个数、线段长度和你需要计算t秒之后小球的位置。<br>　　第二行包含n个整数a1, a2, …, an，用空格分隔，表示初始时刻n个小球的位置。</div><div class="pdsec">输出格式</div><div class="pdcont">　　输出一行包含n个整数，用空格分隔，第i个整数代表初始时刻位于ai的小球，在t秒之后的位置。</div><div class="pdsec">样例输入</div><div class="pddata">3 10 5<br>4 6 8</div><div class="pdsec">样例输出</div><div class="pddata">7 9 9</div><div class="pdsec">样例说明</div><div class="pdcont">　　初始时，三个小球的位置分别为4, 6, 8。<br>　　一秒后，三个小球的位置分别为5, 7, 9。<br>　　两秒后，第三个小球碰到墙壁，速度反向，三个小球位置分别为6, 8, 10。<br>　　三秒后，第二个小球与第三个小球在位置9发生碰撞，速度反向（注意碰撞位置不一定为偶数），三个小球位置分别为7, 9, 9。<br>　　四秒后，第一个小球与第二个小球在位置8发生碰撞，速度反向，第三个小球碰到墙壁，速度反向，三个小球位置分别为8, 8, 10。<br>　　五秒后，三个小球的位置分别为7, 9, 9。<br></div><div class="pdsec">样例输入</div><div class="pddata">10 22 30<br>14 12 16 6 10 2 8 20 18 4</div><div class="pdsec">样例输出</div><div class="pddata">6 6 8 2 4 0 4 12 10 2</div><div class="pdsec">数据规模和约定</div><div class="pdcont">　　对于所有评测用例，1 ≤ n ≤ 100，1 ≤ t ≤ 100，2 ≤ L ≤ 1000，0 &lt; ai &lt; L。L为偶数。<br>　　保证所有小球的初始位置互不相同且均为偶数。</div><br><br>    </td><script src="https://gist.github.com/sparkydogX/7564105094bf8b6faa08cfcb039f6edc.js"></script><h2 id="3-URL-映射"><a href="#3-URL-映射" class="headerlink" title="3. URL 映射"></a>3. URL 映射</h2><td><div class="pdsec">问题描述</div><div class="pdcont">　　URL 映射是诸如 Django、Ruby on Rails 等网页框架 (web frameworks) 的一个重要组件。对于从浏览器发来的 HTTP 请求，URL 映射模块会解析请求中的 URL 地址，并将其分派给相应的处理代码。现在，请你来实现一个简单的 URL 映射功能。<br>　　本题中 URL 映射功能的配置由若干条 URL 映射规则组成。当一个请求到达时，URL 映射功能会将请求中的 URL 地址按照配置的先后顺序逐一与这些规则进行匹配。当遇到第一条完全匹配的规则时，匹配成功，得到匹配的规则以及匹配的参数。若不能匹配任何一条规则，则匹配失败。<br>　　本题输入的 URL 地址是以斜杠 / 作为分隔符的路径，保证以斜杠开头。其他合法字符还包括大小写英文字母、阿拉伯数字、减号 -、下划线 _ 和小数点 .。例如，/person/123/ 是一个合法的 URL 地址，而 /person/123? 则不合法（存在不合法的字符问号 ?）。另外，英文字母区分大小写，因此 /case/ 和 /CAse/ 是不同的 URL 地址。<br>　　对于 URL 映射规则，同样是以斜杠开始。除了可以是正常的 URL 地址外，还可以包含参数，有以下 3 种：<br>　　字符串 &lt;str&gt;：用于匹配一段字符串，注意字符串里不能包含斜杠。例如，abcde0123。<br>　　整数 &lt;int&gt;：用于匹配一个不带符号的整数，全部由阿拉伯数字组成。例如，01234。<br>　　路径 &lt;path&gt;：用于匹配一段字符串，字符串可以包含斜杠。例如，abcd/0123/。<br>　　以上 3 种参数都必须匹配非空的字符串。简便起见，题目规定规则中 &lt;str&gt; 和 &lt;int&gt; 前面一定是斜杠，后面要么是斜杠，要么是规则的结束（也就是该参数是规则的最后一部分）。而 &lt;path&gt; 的前面一定是斜杠，后面一定是规则的结束。无论是 URL 地址还是规则，都不会出现连续的斜杠。</div><div class="pdsec">输入格式</div><div class="pdcont">　　输入第一行是两个正整数 <i>n</i> 和 <i>m</i>，分别表示 URL 映射的规则条数和待处理的 URL 地址个数，中间用一个空格字符分隔。<br>　　第 2 行至第 <i>n</i>+1 行按匹配的先后顺序描述 URL 映射规则的配置信息。第 <i>i</i>+1 行包含两个字符串 <i>p<sub>i</sub></i> 和 <i>r<sub>i</sub></i>，其中 <i>p<sub>i</sub></i> 表示 URL 匹配的规则，<i>r<sub>i</sub></i> 表示这条 URL 匹配的名字。两个字符串都非空，且不包含空格字符，两者中间用一个空格字符分隔。<br>　　第 <i>n</i>+2 行至第 <i>n</i>+<i>m</i>+1 行描述待处理的 URL 地址。第 <i>n</i>+1+<i>i</i> 行包含一个字符串 <i>q<sub>i</sub></i>，表示待处理的 URL 地址，字符串中不包含空格字符。</div><div class="pdsec">输出格式</div><div class="pdcont">　　输入共 <i>m</i> 行，第 <i>i</i> 行表示 <i>q<sub>i</sub></i> 的匹配结果。如果匹配成功，设匹配了规则 <i>p<sub>j</sub></i> ，则输出对应的 <i>r<sub>j</sub></i>。同时，如果规则中有参数，则在同一行内依次输出匹配后的参数。注意整数参数输出时要把前导零去掉。相邻两项之间用一个空格字符分隔。如果匹配失败，则输出 404。</div><div class="pdsec">样例输入</div><div class="pddata">5 4<br>/articles/2003/ special_case_2003<br>/articles/&lt;int&gt;/ year_archive<br>/articles/&lt;int&gt;/&lt;int&gt;/ month_archive<br>/articles/&lt;int&gt;/&lt;int&gt;/&lt;str&gt;/ article_detail<br>/static/&lt;path&gt; static_serve<br>/articles/2004/<br>/articles/1985/09/aloha/<br>/articles/hello/<br>/static/js/jquery.js</div><div class="pdsec">样例输出</div><div class="pddata">year_archive 2004<br>article_detail 1985 9 aloha<br>404<br>static_serve js/jquery.js</div><div class="pdsec">样例说明</div><div class="pdcont">　　对于第 1 个地址 /articles/2004/，无法匹配第 1 条规则，可以匹配第 2 条规则，参数为 2004。<br>　　对于第 2 个地址 /articles/1985/09/aloha/，只能匹配第 4 条规则，参数依次为 1985、9（已经去掉前导零）和 aloha。<br>　　对于第 3 个地址 /articles/hello/，无法匹配任何一条规则。<br>　　对于第 4 个地址 /static/js/jquery.js，可以匹配最后一条规则，参数为 js/jquery.js。</div><div class="pdsec">数据规模和约定</div><div class="pdcont">　　1 ≤ <i>n</i> ≤ 100，1 ≤ <i>m</i> ≤ 100。<br>　　所有输入行的长度不超过 100 个字符（不包含换行符）。<br>　　保证输入的规则都是合法的。</div><br><br>    </td>  <script src="https://gist.github.com/sparkydogX/4aa113cd357541bdbce6a37323c5a746.js"></script><h2 id="4-最小差值"><a href="#4-最小差值" class="headerlink" title="4. 最小差值"></a>4. 最小差值</h2><td><div class="pdsec">问题描述</div><div class="pdcont">　　给定<i>n</i>个数，请找出其中相差（差的绝对值）最小的两个数，输出它们的差值的绝对值。</div><div class="pdsec">输入格式</div><div class="pdcont">　　输入第一行包含一个整数<i>n</i>。<br>　　第二行包含<i>n</i>个正整数，相邻整数之间使用一个空格分隔。</div><div class="pdsec">输出格式</div><div class="pdcont">　　输出一个整数，表示答案。</div><div class="pdsec">样例输入</div><div class="pddata">5<br>1 5 4 8 20</div><div class="pdsec">样例输出</div><div class="pddata">1</div><div class="pdsec">样例说明</div><div class="pdcont">　　相差最小的两个数是5和4，它们之间的差值是1。</div><div class="pdsec">样例输入</div><div class="pddata">5<br>9 3 6 1 3</div><div class="pdsec">样例输出</div><div class="pddata">0</div><div class="pdsec">样例说明</div><div class="pdcont">　　有两个相同的数3，它们之间的差值是0.</div><div class="pdsec">数据规模和约定</div><div class="pdcont">　　对于所有评测用例，2 ≤ <i>n</i> ≤ 1000，每个给定的整数都是不超过10000的正整数。</div><br><br>    </td><br><script src="https://gist.github.com/sparkydogX/aaf9b0005af8bdc4f1efd36d5a992c08.js"></script><br><br>## 5. JSON<br><td><div class="pdsec">问题描述</div><div class="pdcont">　　JSON (JavaScript Object Notation) 是一种轻量级的数据交换格式，可以用来描述半结构化的数据。JSON 格式中的基本单元是值 (value)，出于简化的目的本题只涉及 2 种类型的值：<br>　　<em> 字符串 (string)：字符串是由双引号 “ 括起来的一组字符（可以为空）。如果字符串的内容中出现双引号 “，在双引号前面加反斜杠，也就是用 \” 表示；如果出现反斜杠 \，则用两个反斜杠 \ 表示。反斜杠后面不能出现 “ 和 \ 以外的字符。例如：””、”hello”、”\”\“。　　</em> 对象 (object)：对象是一组键值对的无序集合（可以为空）。键值对表示对象的属性，键是属性名，值是属性的内容。对象以左花括号 { 开始，右花括号 } 结束，键值对之间以逗号 , 分隔。一个键值对的键和值之间以冒号 : 分隔。键必须是字符串，同一个对象所有键值对的键必须两两都不相同；值可以是字符串，也可以是另一个对象。例如：{}、{“foo”: “bar”}、{“Mon”: “weekday”, “Tue”: “weekday”, “Sun”: “weekend”}。<br>　　除了字符串内部的位置，其他位置都可以插入一个或多个空格使得 JSON 的呈现更加美观，也可以在一些地方换行，不会影响所表示的数据内容。例如，上面举例的最后一个 JSON 数据也可以写成如下形式。<br>　　{<br>　　“Mon”: “weekday”,<br>　　“Tue”: “weekday”,<br>　　“Sun”: “weekend”<br>　　}<br>　　给出一个 JSON 格式描述的数据，以及若干查询，编程返回这些查询的结果。</div><div class="pdsec">输入格式</div><div class="pdcont">　　第一行是两个正整数 <i>n</i> 和 <i>m</i>，分别表示 JSON 数据的行数和查询的个数。<br>　　接下来 <i>n</i> 行，描述一个 JSON 数据，保证输入是一个合法的 JSON 对象。<br>　　接下来 <i>m</i> 行，每行描述一个查询。给出要查询的属性名，要求返回对应属性的内容。需要支持多层查询，各层的属性名之间用小数点 . 连接。保证查询的格式都是合法的。</div><div class="pdsec">输出格式</div><div class="pdcont">　　对于输入的每一个查询，按顺序输出查询结果，每个结果占一行。<br>　　如果查询结果是一个字符串，则输出 STRING &lt;string&gt;，其中 &lt;string&gt; 是字符串的值，中间用一个空格分隔。<br>　　如果查询结果是一个对象，则输出 OBJECT，不需要输出对象的内容。<br>　　如果查询结果不存在，则输出 NOTEXIST。</div><div class="pdsec">样例输入</div><div class="pddata">10 5<br>{<br>“firstName”: “John”,<br>“lastName”: “Smith”,<br>“address”: {<br>“streetAddress”: “2ndStreet”,<br>“city”: “NewYork”,<br>“state”: “NY”<br>},<br>“esc\aped”: “\”hello\””<br>}<br>firstName<br>address<br>address.city<br>address.postal<br>esc\aped</div><div class="pdsec">样例输出</div><div class="pddata">STRING John<br>OBJECT<br>STRING NewYork<br>NOTEXIST<br>STRING “hello”</div><div class="pdsec">评测用例规模与约定</div><div class="pdcont">　　<i>n</i> ≤ 100，每行不超过 80 个字符。<br>　　<i>m</i> ≤ 100，每个查询的长度不超过 80 个字符。<br>　　字符串中的字符均为 ASCII 码 33-126 的可打印字符，不会出现空格。所有字符串都不是空串。<br>　　所有作为键的字符串不会包含小数点 .。查询时键的大小写敏感。<br>　　50%的评测用例输入的对象只有 1 层结构，80%的评测用例输入的对象结构层数不超过 2 层。举例来说，{“a”: “b”} 是一层结构的对象，{“a”: {“b”: “c”}} 是二层结构的对象，以此类推。</div><br><br>    </td><p><code>这道题直接调用了python的json包，只有90分</code><br>  <script src="https://gist.github.com/sparkydogX/ea66dd8a42ce475f604a1c3f56d146b5.js"></script></p><h2 id="6-排序"><a href="#6-排序" class="headerlink" title="6. 排序"></a>6. 排序</h2><script src="https://gist.github.com/sparkydogX/e7a97431be225fca99547ce67314d1c2.js"></script><h2 id="7-日期"><a href="#7-日期" class="headerlink" title="7. 日期"></a>7. 日期</h2><script src="https://gist.github.com/sparkydogX/2a1abaa88c58ebd681442252f3be1fc6.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> ccfcsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ss+provixy在Ubuntu命令行中翻越长城</title>
      <link href="/2018/09/12/ss-provixy-ubuntu/"/>
      <url>/2018/09/12/ss-provixy-ubuntu/</url>
      
        <content type="html"><![CDATA[<script src="https://gist.github.com/sparkydogX/9bc787625ebcdbff7b4bd303c2cf6542.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> ss </tag>
            
            <tag> provixy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python解压中文编码的zip文件</title>
      <link href="/2018/09/04/unzip-with-python/"/>
      <url>/2018/09/04/unzip-with-python/</url>
      
        <content type="html"><![CDATA[<p>在Ubuntu下，有时遇到中文编码的zip文件，会发现解压乱码。这时候可以使用python来解决。</p><script src="https://gist.github.com/sparkydogX/016393f17e30b5a36ad2bb1757a41ccf.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> unzip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python对2D坐标点进行仿射变换</title>
      <link href="/2018/09/03/affine-with-python/"/>
      <url>/2018/09/03/affine-with-python/</url>
      
        <content type="html"><![CDATA[<p>仿射变换是一种常用的变换。使用矩阵操作可以很方便的对2D点进行仿射变换，逆变换的时候只需要求解逆矩阵即可。<br>如下图所示：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/affine.jpg" alt="img"></p><p>Python代码示例：<br>仅实现了常用的平移、旋转、翻折变换：</p><script src="https://gist.github.com/sparkydogX/7f4e02a0f8a9114b3f32c2fb044e1af1.js"></script>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> affine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在pycharm中使用gist</title>
      <link href="/2018/08/31/pycharm-github/"/>
      <url>/2018/08/31/pycharm-github/</url>
      
        <content type="html"><![CDATA[<h1 id="Gist"><a href="#Gist" class="headerlink" title="Gist"></a>Gist</h1><p>Gist是github提供的便捷分享代码的工具，效果就是一个网页，网页下面有评论区域。<br>Gist分为secret和public两种，public可以被搜索到，secret也不是私有的，而是指需要通过链接才能访问，并且无法被搜索。官方给出的建议是写ToDoList或者与朋友分享代码的时候选择secret。</p><h1 id="在Pycharm中进行设置"><a href="#在Pycharm中进行设置" class="headerlink" title="在Pycharm中进行设置"></a>在Pycharm中进行设置</h1><p>打开pycharm中的设置，搜索Github，输入账号密码即可。<br>然后选中需要分享的代码，右击‘Create Gist’，之后按照提示输入标题和描述，即可。</p><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><p>下面是以一段使用bcrypt在python中进行文本加密的代码，在pycharm中通过gist分享，随后在gist页面获得嵌入地址，可以放入Blog中，十分方便。<br><!-- Get UTF-8 Size (ANSI C) --><br><!-- Begin --></p><p><script src="https://gist.github.com/sparkydogX/7eb4f31ce000492e377c847e025a56ec.js"></script><br><!-- End --></p>]]></content>
      
      
      
        <tags>
            
            <tag> pycharm </tag>
            
            <tag> gist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker容器的保存与加载</title>
      <link href="/2018/08/20/docker-save-and-load/"/>
      <url>/2018/08/20/docker-save-and-load/</url>
      
        <content type="html"><![CDATA[<h1 id="保存对镜像的修改"><a href="#保存对镜像的修改" class="headerlink" title="保存对镜像的修改"></a>保存对镜像的修改</h1><h2 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h2><p><code>docker commit 8d418a7b6021 postgres:latest</code></p><h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><p>这时候用docker images可以看见保存的镜像，可以使用正常镜像加载的命令加载。<br>加载时经常使用的一些参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-p : 指定端口映射</span><br><span class="line">--shm-size= : 指定shm大小，pytorch中设置多个worker的时候会用到</span><br><span class="line">--cap-add=  : Add Linux capabilities</span><br></pre></td></tr></table></figure></p><p>其中<code>cap-add</code>参数的使用可以参考<a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities" target="_blank" rel="noopener">官方文档</a>。<br>例:<code>--cap-add=SYS_NICE</code></p><h1 id="将镜像保存为文件"><a href="#将镜像保存为文件" class="headerlink" title="将镜像保存为文件"></a>将镜像保存为文件</h1><p><code>sudo docker save image &gt; /home/save.tar</code></p><h1 id="从文件恢复镜像"><a href="#从文件恢复镜像" class="headerlink" title="从文件恢复镜像"></a>从文件恢复镜像</h1><p><code>docker load &lt; /home/save.tar</code></p><h1 id="重命名镜像"><a href="#重命名镜像" class="headerlink" title="重命名镜像"></a>重命名镜像</h1><p><code>docker tag IMAGEID REPOSITORY:TAG</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu下调整进程的优先级</title>
      <link href="/2018/08/20/priority/"/>
      <url>/2018/08/20/priority/</url>
      
        <content type="html"><![CDATA[<p>在系统中，我们希望有些进程的优先级可以高一些，有些要低一些。这会决定不同进程占用的CPU时间。下面介绍如何调整优先级。</p><h1 id="nice指令"><a href="#nice指令" class="headerlink" title="nice指令"></a>nice指令</h1><p>当运行一个程序的时候，使用<a href="http://manpages.ubuntu.com/manpages/cosmic/man1/nice.1.html" target="_blank" rel="noopener">nice</a>指令可以指定优先级。<br>例如，运行<code>nice -n 5 htop</code>会发现htop的优先级降低了。<br>-n参数可以是 -19～20 之间的整数，越低表示优先级越高。当不使用nice指定是，进程的NI值默认为0。<br>需要注意的是，当使用负值参数的时候，需要sudo才能起作用。</p><h1 id="renice指令"><a href="#renice指令" class="headerlink" title="renice指令"></a>renice指令</h1><p>当程序已经开始运行，可以使用renice指令重新指定进程的NI值，用法与nice类似，可以一次指定多个。</p><h1 id="查看子进程的PID"><a href="#查看子进程的PID" class="headerlink" title="查看子进程的PID"></a>查看子进程的PID</h1><p>父进程fork出来的子进程nice值与父进程相同。父进程renice，子进程nice值不会随之改变。<br>有时候需要提高子进程的优先级，使用<code>ps --ppid &lt;pid of the parent&gt;</code>可以获得子进程的PID。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在matlab中使用python接口</title>
      <link href="/2018/08/15/matlab-python/"/>
      <url>/2018/08/15/matlab-python/</url>
      
        <content type="html"><![CDATA[<p>随着python的流行，matlab逐渐支持python的部分功能。<br>python在字符串处理和文件读写上比matlab方便许多，在这些场景下使用python显然更省事。<br>下面介绍如何在matlab中调用python的接口。</p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><blockquote><p>main.m</p></blockquote><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root_dir = <span class="string">'/data3/Human36M/Bbox/S%d/MySegmentsMat/ground_truth_bb'</span>;</span><br><span class="line">save_dir = <span class="string">'/data2/guoyu/workspace/pytorch-3dpose/BBox_par'</span>;</span><br><span class="line">S = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> =<span class="number">1</span>:<span class="number">1</span>:<span class="number">7</span></span><br><span class="line">    subject = S(<span class="built_in">i</span>);</span><br><span class="line">    cur_dir = sprintf(root_dir,subject)</span><br><span class="line">    fileList = py.os.listdir(cur_dir);</span><br><span class="line">    fileList = cell(fileList);</span><br><span class="line">    fileList = cellfun(@char, fileList, <span class="string">'UniformOutput'</span>, false);</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> =<span class="number">1</span>:<span class="number">1</span>:<span class="built_in">length</span>(fileList)</span><br><span class="line">        filename = fileList(<span class="built_in">j</span>);</span><br><span class="line">        filepath = fullfile(cur_dir,filename);</span><br><span class="line">        F = load(filepath&#123;<span class="number">1</span>&#125;);</span><br><span class="line">        M = F.Masks;</span><br><span class="line">        Bbox = <span class="built_in">zeros</span>(<span class="built_in">length</span>(M),<span class="number">4</span>);</span><br><span class="line">        fork =<span class="number">1</span>:<span class="built_in">length</span>(M)</span><br><span class="line">            Bbox(k,:) = getBbox_par(M&#123;k&#125;);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        save_cur_dir = fullfile(save_dir, [<span class="string">'S'</span>,num2str(S(i))]);</span><br><span class="line">        savepath = fullfile(save_cur_dir,[filename&#123;<span class="number">1</span>&#125;(<span class="number">1</span>:end<span class="number">-4</span>),<span class="string">'.h5'</span>])</span><br><span class="line">        <span class="keyword">if</span> ~py.os.path.exists(save_cur_dir)</span><br><span class="line">            py.os.makedirs(save_cur_dir);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        h5create(savepath,<span class="string">'/bbox'</span>,<span class="built_in">size</span>(Bbox))</span><br><span class="line">        h5write(savepath,<span class="string">'/bbox'</span>,Bbox)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">message = <span class="string">'All Done'</span></span><br></pre></td></tr></table></figure><blockquote><p>getBbox.m</p></blockquote><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[ start_x , start_y, end_x,end_y ]</span> = <span class="title">getBbox</span><span class="params">( I )</span></span></span><br><span class="line"><span class="comment">%UNTITLED Summary of this function goes here</span></span><br><span class="line"><span class="comment">%   Detailed explanation goes here</span></span><br><span class="line">S = <span class="built_in">find</span>(I);</span><br><span class="line">idx1 = S(<span class="number">1</span>);</span><br><span class="line">idx2 = S(<span class="keyword">end</span>);</span><br><span class="line">start_y = <span class="built_in">mod</span>(idx1, <span class="number">1002</span>);</span><br><span class="line">start_x = <span class="built_in">round</span>(idx1/<span class="number">1002</span>);</span><br><span class="line"></span><br><span class="line">end_y = <span class="built_in">mod</span>(idx2, <span class="number">1002</span>);</span><br><span class="line">end_x = <span class="built_in">round</span>(idx2/<span class="number">1002</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h1 id="代码注释"><a href="#代码注释" class="headerlink" title="代码注释"></a>代码注释</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileList = py.os.listdir(cur_dir);</span><br><span class="line">fileList = cell(fileList);</span><br><span class="line">fileList = cellfun(@char, fileList, &apos;UniformOutput&apos;, false);</span><br></pre></td></tr></table></figure><p>在matlab中，调用python接口需要统一的<code>py.</code>，在使用listdir之后，matlab中返回值是py.list类型，需要将其转换为cell类型才能在matlab中使用。<br>同样的，返回的字符串是py.str类型，需要用char进行类型转换。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ~py.os.path.exists(save_cur_dir)</span><br><span class="line">    py.os.makedirs(save_cur_dir);</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>这里使用python中的os.path.exists()判断文件是否存在，在matlab中的返回值为0或者1。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在pytorch中设置learning rate的衰减</title>
      <link href="/2018/08/10/lr-decay-pytorch/"/>
      <url>/2018/08/10/lr-decay-pytorch/</url>
      
        <content type="html"><![CDATA[<p>很多时候我们要对学习率（learning rate）进行衰减，下面的代码示范了如何每30个epoch按10%的速率衰减：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">adjust_learning_rate</span><span class="params">(optimizer, epoch)</span>:</span></span><br><span class="line">    <span class="string">"""Sets the learning rate to the initial LR decayed by 10 every 30 epochs"""</span></span><br><span class="line">    lr = args.lr * (<span class="number">0.1</span> ** (epoch // <span class="number">30</span>))</span><br><span class="line">    <span class="keyword">for</span> param_group <span class="keyword">in</span> optimizer.param_groups:</span><br><span class="line">        param_group[<span class="string">'lr'</span>] = lr</span><br></pre></td></tr></table></figure><p>来源：<a href="https://www.pytorchtutorial.com/pytorch-learning-rate-decay/" target="_blank" rel="noopener">https://www.pytorchtutorial.com/pytorch-learning-rate-decay/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python实现tee的效果</title>
      <link href="/2018/08/08/python-tee/"/>
      <url>/2018/08/08/python-tee/</url>
      
        <content type="html"><![CDATA[<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>tee是linux下的一个命令行工具，通过pipe可以将程序的输出同时输出到屏幕和文件。<br>python下也可以实现这样的效果，代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tee</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, mode)</span>:</span></span><br><span class="line">        self.file = open(name, mode)</span><br><span class="line">        self.stdout = sys.stdout</span><br><span class="line">        sys.stdout = self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        sys.stdout = self.stdout</span><br><span class="line">        self.file.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        self.file.write(data)</span><br><span class="line">        self.stdout.write(data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">flush</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.file.flush()</span><br></pre></td></tr></table></figure></p><p>Tee这个类在初始化方法里接管了标准输出，此后程序中所有的print都会输出到文件。</p><h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Tee <span class="keyword">import</span> Tee</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    logger = Tee(<span class="string">'log.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">    A = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>]</span><br><span class="line">    B=A[::<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">print</span> B</span><br><span class="line">    L=range(<span class="number">1</span>,<span class="number">13</span>)</span><br><span class="line">    <span class="keyword">print</span> L,type(L)</span><br></pre></td></tr></table></figure><p>‘log.txt’中的内容为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1, 3, 5, 7, 9]</span><br><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] &lt;type &apos;list&apos;&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> tee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决pytorch中DataParallel后模型参数出现问题的方法</title>
      <link href="/2018/08/08/pytorch-dataparallel-problem/"/>
      <url>/2018/08/08/pytorch-dataparallel-problem/</url>
      
        <content type="html"><![CDATA[<p>pytorch中如果使用DataParallel，那么保存的模型key值前面会多处’modules.’，这样如果训练的时候使用的是多GPU，而测试的时候使用的是单GPU，模型载入就会出现问题。<br>一个解决方法是测试的时候强行DataParallel，但是有时候情况较为复杂，可以使用如下的方法：<br>（参考来源：<a href="https://discuss.pytorch.org/t/solved-keyerror-unexpected-key-module-encoder-embedding-weight-in-state-dict/1686/13）" target="_blank" rel="noopener">https://discuss.pytorch.org/t/solved-keyerror-unexpected-key-module-encoder-embedding-weight-in-state-dict/1686/13）</a></p><p><strong>original saved file with DataParallel</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state_dict = torch.load(‘myfile.pth.tar’)</span><br></pre></td></tr></table></figure></p><p><strong>create new OrderedDict that does not contain module.</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">new_state_dict = OrderedDict()</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> state_dict.items():</span><br><span class="line">name = k[<span class="number">7</span>:] <span class="comment"># remove module.</span></span><br><span class="line">new_state_dict[name] = v</span><br></pre></td></tr></table></figure></p><p><strong>load params</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.load_state_dict(new_state_dict)</span><br></pre></td></tr></table></figure></p><p>简而言之，就是重新创建一个OrderedDict，然后将它载入模型就行了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python读取cdf数据</title>
      <link href="/2018/07/18/cdf-python/"/>
      <url>/2018/07/18/cdf-python/</url>
      
        <content type="html"><![CDATA[<p>CDF是NASA提出的一种数据格式，NASA提供了用于操作CDF文件的程序。</p><h1 id="安装CDF工具包"><a href="#安装CDF工具包" class="headerlink" title="安装CDF工具包"></a>安装CDF工具包</h1><p><a href="https://pythonhosted.org/SpacePy/install_linux.html" target="_blank" rel="noopener">安装文档</a><br>先下载<a href="https://cdf.gsfc.nasa.gov/" target="_blank" rel="noopener">CDF Library</a><br>编译<code>make OS=linux ENV=gnu CURSES=yes FORTRAN=no UCOPTIONS=-O2 SHARED=yes all</code><br>安装<code>sudo make INSTALLDIR=/usr/local/cdf install</code></p><p>安装spacepy <code>pip install spacepy</code></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> spacepy <span class="keyword">import</span> pycdf</span><br><span class="line">os.environ[<span class="string">"CDF_LIB"</span>] = <span class="string">"/usr/local/cdf/lib"</span></span><br><span class="line">anno_Greeting=pycdf.CDF(<span class="string">'/home/maddaff/Documents/TestSpace/Greeting.54138969.cdf'</span>)</span><br><span class="line">data=anno_Greeting.copy()</span><br><span class="line">anno_Greeting.close()</span><br><span class="line"><span class="keyword">print</span> data.keys()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> cdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在视频中加入标注——Demo</title>
      <link href="/2018/07/18/anno-Video/"/>
      <url>/2018/07/18/anno-Video/</url>
      
        <content type="html"><![CDATA[<p>有些数据以视频的形式给出，在观察数据集的时候就需要对其进行处理，将对应的标注信息显示在视频中。</p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><p>这段代码依次读取视频文件，对其进行标注之后显示出来。</p><h2 id="Main-py"><a href="#Main-py" class="headerlink" title="Main.py"></a>Main.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> drawJoints <span class="keyword">import</span> DrawJoints</span><br><span class="line"></span><br><span class="line">CONNECTED_PAIRS=[[<span class="number">10</span>,<span class="number">11</span>],[<span class="number">11</span>,<span class="number">12</span>],[<span class="number">13</span>,<span class="number">14</span>],[<span class="number">14</span>,<span class="number">15</span>],[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">showVid</span><span class="params">(cap, pred,title=<span class="string">'frame'</span>)</span>:</span></span><br><span class="line">    idx = <span class="number">0</span></span><br><span class="line">    fps = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">True</span>):</span><br><span class="line">        <span class="comment"># t1=time.time()</span></span><br><span class="line">        <span class="keyword">if</span> idx &gt;= pred.shape[<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        ret, frame = cap.read()</span><br><span class="line">        frame = DrawJoints(frame, pred[idx, ::], CONNECTED_PAIRS)</span><br><span class="line">        cv2.imshow(title, frame)</span><br><span class="line">        idx = idx + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(int(<span class="number">1000</span> / fps)) &amp; <span class="number">0xFF</span> == ord(<span class="string">' '</span>):</span><br><span class="line">            <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">                <span class="keyword">if</span> (cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>)):</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                <span class="keyword">if</span> (cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">' '</span>)):</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> ( cap.get(cv2.CAP_PROP_FRAME_COUNT) &lt;= cap.get(cv2.CAP_PROP_POS_FRAMES) ):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> (cv2.waitKey(<span class="number">2</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>)) :</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFileList</span><span class="params">(data_dir,pred_dir,idx)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    Assume idx in ['S9','S11']</span></span><br><span class="line"><span class="string">    :param data_dir:</span></span><br><span class="line"><span class="string">    :param pred_dir:</span></span><br><span class="line"><span class="string">    :param idx:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    V=[] <span class="comment">#Video</span></span><br><span class="line">    P=[] <span class="comment">#Predict</span></span><br><span class="line">    video_files=[i <span class="keyword">for</span> i <span class="keyword">in</span> os.listdir(os.path.join(data_dir,idx,<span class="string">'Videos'</span>)) <span class="keyword">if</span> (i.split(<span class="string">'.'</span>)[<span class="number">-1</span>]==<span class="string">'mp4'</span> <span class="keyword">and</span> (<span class="keyword">not</span> i[<span class="number">0</span>]==<span class="string">'_'</span>) )]</span><br><span class="line">    pred_files= [i <span class="keyword">for</span> i <span class="keyword">in</span> os.listdir(os.path.join(pred_dir,idx,<span class="string">'StackedHourglassFineTuned240'</span>)) <span class="keyword">if</span> i.split(<span class="string">'.'</span>)[<span class="number">-1</span>]==<span class="string">'h5'</span>]</span><br><span class="line">    video_files.sort()</span><br><span class="line">    pred_files = [p.replace(<span class="string">'_'</span>,<span class="string">' '</span>) <span class="keyword">for</span> p <span class="keyword">in</span> pred_files]</span><br><span class="line">    pred_files.sort()</span><br><span class="line">    pred_files = [p.replace(<span class="string">' '</span>, <span class="string">'_'</span>) <span class="keyword">for</span> p <span class="keyword">in</span> pred_files]</span><br><span class="line"></span><br><span class="line">    ip=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(video_files)):</span><br><span class="line">        cur_file=video_files[i]</span><br><span class="line">        <span class="keyword">if</span> idx==<span class="string">'S11'</span> <span class="keyword">and</span> cur_file==<span class="string">'Directions.54138969.mp4'</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            V.append(os.path.join(data_dir,idx,<span class="string">'Videos'</span>,cur_file))</span><br><span class="line">            P.append(os.path.join(os.path.join(pred_dir,idx,<span class="string">'StackedHourglassFineTuned240'</span>),pred_files[ip]))</span><br><span class="line">            ip=ip+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> V,P</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    vidDir=<span class="string">'/data3/Human36M/raw_data'</span></span><br><span class="line">    predDir=<span class="string">'/data2/guoyu/workspace/3d-pose-baseline/temporal/data/h36m'</span></span><br><span class="line">    <span class="keyword">for</span> S <span class="keyword">in</span> [<span class="string">'S9'</span>,<span class="string">'S11'</span>]:</span><br><span class="line">        V,P = getFileList(vidDir,predDir,S)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(V)):</span><br><span class="line">            pred_name=P[i]</span><br><span class="line">            filename=V[i]</span><br><span class="line">            pred_data = h5py.File(pred_name)</span><br><span class="line">            pred = np.array(pred_data[<span class="string">'poses'</span>], dtype=np.int)</span><br><span class="line">            cap = cv2.VideoCapture(filename)</span><br><span class="line">            <span class="comment"># print int(cap.get(cv2.CAP_PROP_FRAME_COUNT)),'\t',int(cap.get(cv2.CAP_PROP_FRAME_COUNT)- pred.shape[0]),'\t' ,S,filename.split('/')[-1].split('.')[0]</span></span><br><span class="line">            <span class="comment"># cap.release()</span></span><br><span class="line">            <span class="comment">#</span></span><br><span class="line">            fps = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">            showVid(cap, pred,title=filename.split(<span class="string">'/'</span>)[<span class="number">-1</span>])</span><br><span class="line">            cap.release()</span><br><span class="line">            cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>使用opencv的VideoCapture函数可以方便地读取视频数据，可以通过cap的get函数来获得对应的视频属性，例如帧率、帧数、长宽等信息。<br><code>cv2.waitKey(2) &amp; 0xFF == ord(&#39;q&#39;)</code>语句可以判断键盘的输入。</p><h2 id="drawJoints-py"><a href="#drawJoints-py" class="headerlink" title="drawJoints.py"></a>drawJoints.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">JoName=<span class="string">'0 - r ankle, 1 - r knee, 2 - r hip, 3 - l hip, 4 - l knee, 5 - l ankle, 6 - pelvis, 7 - thorax, 8 - upper neck,'</span> \</span><br><span class="line">       <span class="string">' 9 - head top, 10 - r wrist, 11 - r elbow, 12 - r shoulder, 13 - l shoulder, 14 - l elbow, 15 - l wrist'</span></span><br><span class="line">JoName=JoName.split(<span class="string">','</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DrawJoints</span><span class="params">(I,joints,CONNECTED_PAIRS=None,Jo=JoName)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    Assume joints Dim : P x 2</span></span><br><span class="line"><span class="string">    :param I:</span></span><br><span class="line"><span class="string">    :param joints:</span></span><br><span class="line"><span class="string">    :param CONNECTED_PAIRS:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    txt=<span class="string">'Missing Joints:\n'</span></span><br><span class="line">    <span class="comment"># Background rectangle for text</span></span><br><span class="line">    cv2.rectangle(I, (<span class="number">25</span>, <span class="number">25</span>), (<span class="number">300</span>, <span class="number">250</span>), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line">    font = cv2.FONT_HERSHEY_SIMPLEX</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(joints.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">if</span> joints[i,<span class="number">0</span>]&lt;<span class="number">5</span> <span class="keyword">and</span> joints[i,<span class="number">1</span>]&lt;<span class="number">5</span> :</span><br><span class="line">            txt=txt+ str(Jo[i]) +<span class="string">'\n'</span></span><br><span class="line">        cv2.circle(I, (joints[i,<span class="number">0</span>], joints[i,<span class="number">1</span>]), <span class="number">2</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">if</span> CONNECTED_PAIRS:</span><br><span class="line">        I=drawLine(I,joints,CONNECTED_PAIRS)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># show text</span></span><br><span class="line">    y0, dy = <span class="number">50</span>, <span class="number">25</span></span><br><span class="line">    <span class="keyword">for</span> i, txt <span class="keyword">in</span> enumerate(txt.split(<span class="string">'\n'</span>)):</span><br><span class="line">        y = y0 + i * dy</span><br><span class="line">        cv2.putText(I, txt, (<span class="number">50</span>, y), font, <span class="number">.8</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="comment"># print(txt)</span></span><br><span class="line">    <span class="keyword">return</span> I</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drawLine</span><span class="params">(I,joints,CONNECTED_PAIRS)</span>:</span></span><br><span class="line">    N=len(CONNECTED_PAIRS)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        p1=joints[CONNECTED_PAIRS[i][<span class="number">0</span>]]</span><br><span class="line">        p2=joints[CONNECTED_PAIRS[i][<span class="number">1</span>]]</span><br><span class="line">        p1=totuple(p1)</span><br><span class="line">        p2 = totuple(p2)</span><br><span class="line">        cv2.line(I,p1,p2,(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> I</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">totuple</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> tuple(totuple(i) <span class="keyword">for</span> i <span class="keyword">in</span> a)</span><br><span class="line">    <span class="keyword">except</span> TypeError:</span><br><span class="line">        <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure><p><code>putText</code> 函数用于在图像上输出文字，需要注意的是对于字符串中的换行符<code>\n</code>，会显示乱码，需要另外处理。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Video </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在python中进行socket通信</title>
      <link href="/2018/07/15/scoket-python/"/>
      <url>/2018/07/15/scoket-python/</url>
      
        <content type="html"><![CDATA[<p>socket是计算机通信中常常使用到的一种通信技术。本文介绍如何在python中使用这一方法在多个进程之间进行通信。</p><h1 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h1><p>作为客户端，只需要知道服务器的地址与端口，发送请求，接收数据即可，并不需要非常复杂的操作。</p><h2 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h2><p>以访问新浪微博的主页为例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入socket库:</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="comment"># 创建一个socket:</span></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"><span class="comment"># 建立连接:</span></span><br><span class="line">s.connect((<span class="string">'www.sina.com.cn'</span>, <span class="number">80</span>))</span><br><span class="line"><span class="comment"># 发送数据:</span></span><br><span class="line">s.send(<span class="string">'GET / HTTP/1.1\r\nHost: www.sina.com.cn\r\nConnection: close\r\n\r\n'</span>)</span><br><span class="line"><span class="comment"># 接收数据:</span></span><br><span class="line">buffer = []</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="comment"># 每次最多接收1k字节:</span></span><br><span class="line">    d = s.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">if</span> d:</span><br><span class="line">        buffer.append(d)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">data = <span class="string">''</span>.join(buffer)</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></p><p>接收数据时，调用recv(max)方法，一次最多接收指定的字节数，因此，在一个while循环中反复接收，直到recv()返回空数据，表示接收完毕，退出循环。。当我们接收完数据后，调用close()方法关闭Socket，这样，一次完整的网络通信就结束了。</p><h2 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h2><p>接收并解码json数据<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.connect((<span class="string">'127.0.0.1'</span>, <span class="number">9999</span>))</span><br><span class="line"><span class="keyword">print</span> s.recv(<span class="number">1024</span>)</span><br><span class="line">t=time.time()</span><br><span class="line">s.send(<span class="string">'a'</span>)</span><br><span class="line">data_rec=s.recv(<span class="number">400000</span>)</span><br><span class="line">print(time.time()-t)</span><br><span class="line">s.send(<span class="string">'exit'</span>)</span><br><span class="line">s.close()</span><br><span class="line">print(len(data_rec))</span><br><span class="line">J=json.loads(data_rec)</span><br><span class="line">I=J[<span class="number">0</span>][<span class="string">'img'</span>]</span><br><span class="line">I=np.asarray(I)</span><br><span class="line">plt.imshow(I)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p><p>这里json数据中有3个列表元素，每个元素是一个字典，字典的键是<code>image</code>，对应的值是图片矩阵。<br>注意这里是在本机上进行通讯，为了方便起见返回值最大设置为400000字节。</p><h1 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h1><p>这里给出服务器端的代码实现：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tcplink</span><span class="params">(sock, addr)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Accept new connection from %s:%s...'</span> % addr</span><br><span class="line">    sock.send(<span class="string">'Welcome!'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        x = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">            d = &#123;&#125;</span><br><span class="line">            I = np.random.rand(<span class="number">64</span>, <span class="number">64</span>)</span><br><span class="line">            d[<span class="string">'img'</span>] = I.tolist()</span><br><span class="line">            x.append(d)</span><br><span class="line">        <span class="comment"># print(x)</span></span><br><span class="line">        J = json.dumps(x)</span><br><span class="line">        data = sock.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="comment"># time.sleep(1)</span></span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">'exit'</span> <span class="keyword">or</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        sock.send(J)</span><br><span class="line">    sock.close()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Connection from %s:%s closed.'</span> % addr</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>  __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.bind((<span class="string">'0.0.0.0'</span>, <span class="number">9999</span>))</span><br><span class="line">    s.listen(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Waiting for connection...'</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        sock, addr = s.accept()</span><br><span class="line">        t = threading.Thread(target=tcplink, args=(sock, addr))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure></p><p><code>s.bind((&#39;0.0.0.0&#39;, 9999))</code>指定服务器的端口和ip，<code>127.0.0.1</code>表示只在本机内部通信，<code>0.0.0.0</code>表示在所有网卡上设置端口，可以由外部进行访问。<br><code>s.listen(5)</code> 队列中最多允许5个请求，超过五个请求时会拒绝后面的请求。<br><code>sock, addr = s.accept()</code>返回请求的socket和地址，注意accept函数默认是阻塞型的，会一直等待直到接收到请求才返回值，因此这里<code>while True</code>循环中不需要费心考虑太多。<br><code>t = threading.Thread(target=tcplink, args=(sock, addr))</code>另外开启一个线程处理请求。<br><code>sock.send(J)</code>处理好要发送的数据进行发送。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> socket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matplotlib绘制统计直方图</title>
      <link href="/2018/07/11/draw-with-matplotlib/"/>
      <url>/2018/07/11/draw-with-matplotlib/</url>
      
        <content type="html"><![CDATA[<p>用matplotlib可以很方便地绘制图像，下面给出一个绘制含有13个子图的统计直方图示例:</p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pylab</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">Limb_List=[<span class="string">'Rhip-Rknee'</span>,<span class="string">'Rknee-RFoot'</span>,<span class="string">'Lhip-LKnee'</span>,<span class="string">'Lknee-Lfoot'</span>,<span class="string">'Neck-Head'</span>,<span class="string">'Lshoulder-Lelbow'</span>,<span class="string">'Lelbow-LWrist'</span>,<span class="string">'Rshoulder-RElbow'</span>,<span class="string">'Relbow-Rwrist'</span>,<span class="string">'Lshoulder-Rshoulder'</span>,<span class="string">'Lhip-Rhip'</span>,<span class="string">'Neck-Throax'</span>,<span class="string">'Throax-Spine'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># fig = plt.figure()</span></span><br><span class="line">f, axs = plt.subplots(<span class="number">7</span>,<span class="number">2</span>,figsize=(<span class="number">15</span>,<span class="number">36</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">13</span>):</span><br><span class="line">    pylab.subplot(<span class="number">7</span>,<span class="number">2</span>,i+<span class="number">1</span>)</span><br><span class="line">    n, bins, patches =plt.hist(Err[:,i], <span class="number">200</span>, density=<span class="keyword">True</span>, alpha=<span class="number">0.75</span>,range=(<span class="number">-150</span>,<span class="number">100</span>))</span><br><span class="line">    plt.grid(<span class="keyword">True</span>)</span><br><span class="line">    title=<span class="string">'Err of '</span>+Limb_List[i]</span><br><span class="line">    plt.title(title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.tight_layout()</span></span><br><span class="line"><span class="comment"># plt.suptitle("Error of Limb Length")</span></span><br><span class="line">plt.subplots_adjust(left=<span class="number">0.2</span>, wspace=<span class="number">0.5</span>, top=<span class="number">0.88</span>)</span><br><span class="line">plt.show()</span><br><span class="line">f.savefig(<span class="string">'S11_err.png'</span>,bbox_inches=<span class="string">"tight"</span>)</span><br></pre></td></tr></table></figure><h1 id="代码说明："><a href="#代码说明：" class="headerlink" title="代码说明："></a>代码说明：</h1><p><code>f, axs = plt.subplots(7,2,figsize=(15,36))</code> 这一行设置子图的大小，否则会使用默认的子图大小，在7x2的布局下会显得相当诡异。<br><code>pylab.subplot(7,2,i+1)</code> 表明当前子图的序号<br><code>plt.subplots_adjust(left=0.2, wspace=0.5, top=0.88)</code> 设置子图之间的间距，如果不设置，在每个子图都有title的情况下会导致子图的title与其他子图的坐标轴交叠<br><code>f.savefig(&#39;S11_err.png&#39;,bbox_inches=&quot;tight&quot;)</code> 这里设置<code>bbox_inches=&quot;tight&quot;</code>可以避免存储的图像中标题栏被截去。</p><h1 id="示例图像"><a href="#示例图像" class="headerlink" title="示例图像"></a>示例图像</h1><p><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2018/S9_err.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Graphviz画图</title>
      <link href="/2018/06/23/graphviz-start/"/>
      <url>/2018/06/23/graphviz-start/</url>
      
        <content type="html"><![CDATA[<p>Graphviz使用代码来绘制图形。</p><h1 id="绘图代码"><a href="#绘图代码" class="headerlink" title="绘图代码"></a>绘图代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">digraph G&#123;</span><br><span class="line">    graph[dpi=300];</span><br><span class="line">    Add1[label=&quot;Add&quot;,shape=box];</span><br><span class="line">    Add2[label=&quot;Add&quot;,shape=box];</span><br><span class="line">    input[label=&quot;Input\n16x2&quot;,shape=box];</span><br><span class="line">    AT1[label=&quot;ATBlock&quot;];</span><br><span class="line">    AT2[label=&quot;ATBlock&quot;];</span><br><span class="line">    AT3[label=&quot;ATBlock&quot;];</span><br><span class="line">    AT4[label=&quot;ATBlock&quot;];</span><br><span class="line">    AT5[label=&quot;ATBlock&quot;];</span><br><span class="line">    AT6[label=&quot;ATBlock&quot;];</span><br><span class="line">    easyjoints[label=&quot;Easy Joints\n8x3&quot;];</span><br><span class="line">    normaljoints[label=&quot;Easy + Normal Joints\n12x3&quot;];</span><br><span class="line">    hardjoints[label=&quot;Easy + Normal + Hard Joints\n16x3&quot;];</span><br><span class="line">    EasyLabel[label=&quot;Easy Joints Loss&quot;,shape=none];</span><br><span class="line">    NormalLabel[label=&quot;Easy + Normal Joints Loss&quot;,shape=none];</span><br><span class="line">    HardLabel[label=&quot;All Joints Loss&quot;,shape=none];</span><br><span class="line"></span><br><span class="line">    input -&gt; AT1;</span><br><span class="line">    AT1 -&gt; easyjoints ;</span><br><span class="line">    easyjoints -&gt; AT2 -&gt; Add1;</span><br><span class="line">    easyjoints -&gt; EasyLabel[dir=back];</span><br><span class="line">    input -&gt; AT3 -&gt; Add1;</span><br><span class="line">    Add1 -&gt; normaljoints -&gt;AT4 -&gt; Add2;</span><br><span class="line">    normaljoints -&gt; NormalLabel[dir=back];</span><br><span class="line">    input -&gt; AT5 -&gt; Add2;</span><br><span class="line">    Add2 -&gt; AT6 -&gt; hardjoints;</span><br><span class="line">    hardjoints -&gt; HardLabel[dir=back];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代码说明"><a href="#代码说明" class="headerlink" title="代码说明"></a>代码说明</h1><p><code>graph[dpi=300];</code>设定编译时的分辨率<br><code>Add1[label=&quot;Add&quot;,shape=box];</code>声明一个变量名为Add1的节点，节点处在图中显示“Add”，节点形状为方框。<br>节点有多种形状可以挑选，可以参考<a href="http://www.graphviz.org/doc/info/shapes.html" target="_blank" rel="noopener">官方文档</a><br><code>-&gt;</code>表示此处的连接是有方向的，dir可以是both，back，none</p><h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>编译命令如下：<br><code>dot CascadeNetStructure.dot -T png -o cascade.png</code><br>其中<code>-T</code>用于指示图片类型</p><p>对应代码生成的图片如下：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/20180623/cascade.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> graphviz </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从源编译安装opencv</title>
      <link href="/2018/06/21/install-opencv-from-source/"/>
      <url>/2018/06/21/install-opencv-from-source/</url>
      
        <content type="html"><![CDATA[<h1 id="Install-opencv-from-source"><a href="#Install-opencv-from-source" class="headerlink" title="Install opencv from source"></a>Install opencv from source</h1><h2 id="Getting-the-Opencv-from-the-Git-Repository"><a href="#Getting-the-Opencv-from-the-Git-Repository" class="headerlink" title="Getting the Opencv from the Git Repository"></a>Getting the Opencv from the Git Repository</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd workspace</span><br><span class="line">git clone https://github.com/opencv/opencv.git</span><br></pre></td></tr></table></figure><h2 id="Building-OpenCV-using-CMake"><a href="#Building-OpenCV-using-CMake" class="headerlink" title="Building OpenCV using CMake"></a>Building OpenCV using CMake</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd opencv</span><br><span class="line">mkdir release</span><br><span class="line">cd release</span><br><span class="line">cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python给每一行文本加引号</title>
      <link href="/2018/06/21/python-edit-text-line/"/>
      <url>/2018/06/21/python-edit-text-line/</url>
      
        <content type="html"><![CDATA[<p>代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    f=open(<span class="string">'/home/maddaff/Documents/TestSpace/generatecode/joints.txt'</span>,<span class="string">'r'</span>)</span><br><span class="line">    f_w=open(<span class="string">'/home/maddaff/Documents/TestSpace/generatecode/joints_write.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">    line=f.readline()</span><br><span class="line">    <span class="keyword">while</span> line:</span><br><span class="line">        line=line.strip(<span class="string">'\n'</span>)</span><br><span class="line">        f_w.write(<span class="string">"\""</span>+line+<span class="string">"\""</span>+<span class="string">', '</span>)</span><br><span class="line">        line=f.readline()</span><br><span class="line">    f.close()</span><br><span class="line">    f_w.close()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过afp从Mac连接到ubuntu共享文件</title>
      <link href="/2018/06/21/connect-ubuntu-server-via-afp/"/>
      <url>/2018/06/21/connect-ubuntu-server-via-afp/</url>
      
        <content type="html"><![CDATA[<p>希望在局域网内的Mac和Ubuntu共享文件，不知道什么原因通过smb不能正常访问，从Ubunutu反过来访问Mac的共享文件夹也失败了。而在Windows上就完全没有问题，相当奇怪。<br>幸好Apple还提供了一个afp协议可以用于共享文件夹。以下操作可以让Mac访问Ubuntu中的文件。</p><h1 id="在Ubuntu上安装netatalk"><a href="#在Ubuntu上安装netatalk" class="headerlink" title="在Ubuntu上安装netatalk"></a>在Ubuntu上安装netatalk</h1><p><code>sudo apt-get install netatalk</code></p><h1 id="进行netatalk的配置"><a href="#进行netatalk的配置" class="headerlink" title="进行netatalk的配置"></a>进行netatalk的配置</h1><p><code>sudo vim /etc/default/netatalk</code><br>找到以下配置语句，去除注释。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ATALKD_RUN=no</span><br><span class="line">PAPD_RUN=no</span><br><span class="line">CNID_METAD_RUN=yes</span><br><span class="line">AFPD_RUN=yes</span><br><span class="line">TIMELORD_RUN=no</span><br><span class="line">A2BOOT_RUN=no</span><br></pre></td></tr></table></figure></p><h1 id="配置分享文件夹"><a href="#配置分享文件夹" class="headerlink" title="配置分享文件夹"></a>配置分享文件夹</h1><p><code>sudo vim /etc/netatalk/AppleVolumes.default</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/                              &quot;Home Directory&quot;</span><br><span class="line">~/Drive/                        &quot;Drive&quot; allow:arthur</span><br></pre></td></tr></table></figure></p><h1 id="重启nettalk服务"><a href="#重启nettalk服务" class="headerlink" title="重启nettalk服务"></a>重启nettalk服务</h1><p><code>sudo /etc/init.d/netatalk restart</code></p><h1 id="在Mac上进行连接"><a href="#在Mac上进行连接" class="headerlink" title="在Mac上进行连接"></a>在Mac上进行连接</h1><p><code>atp://192.168.yourip</code></p><h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1>]]></content>
      
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> afp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matlab读取视频数据</title>
      <link href="/2018/06/20/handle-video-with-matlab/"/>
      <url>/2018/06/20/handle-video-with-matlab/</url>
      
        <content type="html"><![CDATA[<p>任务需要处理视频数据，数据的标签是cdf格式。cdf格式数据并不常见，选择使用matlab进行读取。</p><h1 id="读取cdf标签数据"><a href="#读取cdf标签数据" class="headerlink" title="读取cdf标签数据"></a>读取cdf标签数据</h1><p><code>data=cdfread(&#39;D:\TestSpace\S1\MyPoseFeatures\D2_Positions\Directions 1.54138969.cdf&#39;);</code></p><h1 id="读取视频"><a href="#读取视频" class="headerlink" title="读取视频"></a>读取视频</h1><h2 id="获得视频信息"><a href="#获得视频信息" class="headerlink" title="获得视频信息"></a>获得视频信息</h2><p><code>v=VideoReader(&#39;D:\TestSpace\Directions 1.54138969.mp4&#39;)</code></p><p>可以看到：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">v = </span><br><span class="line"></span><br><span class="line">  VideoReader (具有属性):</span><br><span class="line"></span><br><span class="line">   常规属性:</span><br><span class="line">            Name: <span class="string">'Directions 1.54138969.mp4'</span></span><br><span class="line">            Path: <span class="string">'D:\TestSpace'</span></span><br><span class="line">        Duration: <span class="number">27.6800</span></span><br><span class="line">     CurrentTime: <span class="number">0</span></span><br><span class="line">             Tag: <span class="string">''</span></span><br><span class="line">        UserData: []</span><br><span class="line"></span><br><span class="line">   视频属性:</span><br><span class="line">           Width: <span class="number">1000</span></span><br><span class="line">          Height: <span class="number">1002</span></span><br><span class="line">       FrameRate: <span class="number">50</span></span><br><span class="line">    BitsPerPixel: <span class="number">24</span></span><br><span class="line">     VideoFormat: <span class="string">'RGB24'</span></span><br></pre></td></tr></table></figure></p><h2 id="获得帧信息"><a href="#获得帧信息" class="headerlink" title="获得帧信息"></a>获得帧信息</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">currAxes = axes;</span><br><span class="line"><span class="keyword">while</span> hasFrame(v)</span><br><span class="line">    vidFrame = readFrame(v);</span><br><span class="line">    image(vidFrame, <span class="string">'Parent'</span>, currAxes);</span><br><span class="line">    currAxes.Visible = <span class="string">'off'</span>;</span><br><span class="line">    pause(<span class="number">1</span>/v.FrameRate);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><code>hasFrame</code>可以检查当前时间是否存在帧，<code>readFrame</code>可以读取下一帧的图像，<code>hasFrame</code>检查是否存在可用于读取的帧。</p>]]></content>
      
      
      
        <tags>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用bash进行文件操作</title>
      <link href="/2018/06/20/handle-datch-with-bash/"/>
      <url>/2018/06/20/handle-datch-with-bash/</url>
      
        <content type="html"><![CDATA[<p>情境：文件夹S中有若干个压缩文件，需要解压文件，并将原压缩文件移动到另一目录。<br>bash代码如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">mkdir -p zipdir</span><br><span class="line"><span class="built_in">cd</span> S</span><br><span class="line">FILES=./*.tar</span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable">$FILES</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Processing <span class="variable">$f</span> file ..."</span></span><br><span class="line">  tar -xvf <span class="variable">$f</span></span><br><span class="line">  mv <span class="variable">$f</span> ../zipdir/</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu14.04上安装Socks5服务端</title>
      <link href="/2018/06/03/ss-server-on-ubuntu14/"/>
      <url>/2018/06/03/ss-server-on-ubuntu14/</url>
      
        <content type="html"><![CDATA[<h2 id="安装依赖包与SS"><a href="#安装依赖包与SS" class="headerlink" title="安装依赖包与SS"></a>安装依赖包与SS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install python-pip python-m2crypto</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><p>在<code>/etc/shadowsocks/config.json</code>文件里写入配置内容：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"server"</span>: <span class="string">"YOUR_SERVER_IP"</span>,</span><br><span class="line">  <span class="attr">"server_port"</span>: <span class="number">8388</span>,</span><br><span class="line">  <span class="attr">"local_port"</span>: <span class="number">1080</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"YOUR_SS_PASSWORD"</span>,</span><br><span class="line">  <span class="attr">"timeout"</span>: <span class="number">300</span>,</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">  <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="启动SS"><a href="#启动SS" class="headerlink" title="启动SS"></a>启动SS</h2><p><code>sudo /usr/local/bin/ssserver -c /etc/shadowsocks/config.json --user nobody -qq -d start</code></p><p>也可以把这个命令加到 <code>/etc/rc.local</code>里面，每次系统启动都会启动SS</p><p><a href="http://meilbn.com/2017/10/25/VPS-build-shadowsocks-and-bbr/" target="_blank" rel="noopener">参考来源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Socks5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEFI模式下安装Ubuntu和Windows10双系统</title>
      <link href="/2018/04/09/install-ubuntu-windows10/"/>
      <url>/2018/04/09/install-ubuntu-windows10/</url>
      
        <content type="html"><![CDATA[<p>这是一个老生常谈的问题了。网上搜索到的很多解决方案都是在不使用EFI模式的情况下安装。其实EFI模式下是可以安装的，问题的关键在于Secure Mode。关于Secure Mode相关的纷争可以参考这一篇<a href="http://www.ruanyifeng.com/blog/2013/01/secure_boot.html" target="_blank" rel="noopener">文章</a></p><h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><p>首先在已经安装好的windows系统中使用磁盘管理工具划分一块磁盘空间。</p><h2 id="关闭Secure-Mode"><a href="#关闭Secure-Mode" class="headerlink" title="关闭Secure Mode"></a>关闭Secure Mode</h2><p>在BIOS中关闭Secure Mode</p><h2 id="安装Ubuntu"><a href="#安装Ubuntu" class="headerlink" title="安装Ubuntu"></a>安装Ubuntu</h2><p>安装的时候注意正确的挂载各块空间。<br>我的空间分配参考了这篇<a href="https://blog.csdn.net/DeMonliuhui/article/details/77483523" target="_blank" rel="noopener">文章</a>。<br>注意选择正确的启动引导。</p><h2 id="打开Secure-Mode"><a href="#打开Secure-Mode" class="headerlink" title="打开Secure Mode"></a>打开Secure Mode</h2><p>如果不知道怎么打开Secure Mode，恢复Secure Mode的默认配置后重启即可。</p><h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p>这样就安装完成了。步骤相当简单，之前因为没有抓住问题的要害，走了不少弯路～</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Visdom</title>
      <link href="/2018/04/03/using-visdom/"/>
      <url>/2018/04/03/using-visdom/</url>
      
        <content type="html"><![CDATA[<p>visdom是一个可视化的工具。</p><h1 id="安装visdom"><a href="#安装visdom" class="headerlink" title="安装visdom"></a>安装visdom</h1><p><code>pip install visdom</code></p><h1 id="启动visdom"><a href="#启动visdom" class="headerlink" title="启动visdom"></a>启动visdom</h1><p><code>python -m visdom.server</code><br>可以使用<code>-p</code>参数指定端口</p><p>#使用visdom<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> visdom</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">vis = visdom.Visdom()  //port=<span class="number">2333</span> env=<span class="string">'example'</span></span><br><span class="line">vis.text(<span class="string">'Hello, world!'</span>)</span><br><span class="line">vis.image(np.ones((<span class="number">3</span>, <span class="number">10</span>, <span class="number">10</span>)))</span><br></pre></td></tr></table></figure></p><p>可以在创建visdom对象的时候指定port和env</p>]]></content>
      
      
      
        <tags>
            
            <tag> visdom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用VNC连接docker容器</title>
      <link href="/2018/03/02/vncserver/"/>
      <url>/2018/03/02/vncserver/</url>
      
        <content type="html"><![CDATA[<p>vnc是一个远程桌面的工具，可以用来对远程服务器进行图形界面操作。下面介绍如何使用vnc连接到docker容器中。</p><h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><p>vncserver部署在服务器中的docker容器内。</p><h2 id="Docker容器端口映射"><a href="#Docker容器端口映射" class="headerlink" title="Docker容器端口映射"></a>Docker容器端口映射</h2><p>通常情况下，除非在建立docker容器时指定，否则无法访问到容器内的端口。因此第一步是在建立docker容器是指定服务器与docker容器之间的端口映射。例如：<code>-p 2222:2222</code>，建立容器2222端口与服务器2222端口之间的连接。<br>如果已经有配置好的docker容器，可以使用<code>docker commit</code>指令commit当前的docker容器，然后以commit的镜像为image重新创建一个docker容器，创建时指定端口。<br>如果有需求，还可以在创建时使用<code>--shm-size=128m</code>指令指定 /dev/shm 的大小。如果不手动指定，docker默认分配64M。</p><h2 id="修改镜像源"><a href="#修改镜像源" class="headerlink" title="修改镜像源"></a>修改镜像源</h2><p>工欲善其事必先利其器。这是为下一步安装图形桌面做准备。由于图形桌面的软件包较大，需要使用一个靠谱的国内镜像源。以作者的环境为例，Ubuntu 14.04，使用上海交通大学的镜像源：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/apt/sources.list</span><br><span class="line">$ :%s/archive.ubuntu.com/ftp.sjtu.edu.cn/g</span><br><span class="line">$ sudo rm /var/lib/apt/lists/* -vf</span><br><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure></p><h2 id="安装x11"><a href="#安装x11" class="headerlink" title="安装x11"></a>安装x11</h2><p>x11是一个用于远程图形界面的程序，若只安装x11，也可以通过ssh -x连接后显示图形程序。<br><code>sudo apt-get install xorg openbox</code></p><h2 id="安装桌面环境"><a href="#安装桌面环境" class="headerlink" title="安装桌面环境"></a>安装桌面环境</h2><p>可以任意选择一下一种：</p><h3 id="Unity"><a href="#Unity" class="headerlink" title="Unity :"></a>Unity :</h3><p><code>sudo apt-get install ubuntu-desktop</code></p><h3 id="Xfce"><a href="#Xfce" class="headerlink" title="Xfce:"></a>Xfce:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install xfce4</span><br><span class="line">$ sudo apt-get install xubuntu-desktop</span><br><span class="line">$ xfce4-session</span><br></pre></td></tr></table></figure><h2 id="安装vncserver"><a href="#安装vncserver" class="headerlink" title="安装vncserver"></a>安装vncserver</h2><p><code>sudo apt-get install vnc4server</code></p><p>启动vncserver:<code>vncserver</code>，首次启动需要设置密码。</p><h2 id="设置vnc端口"><a href="#设置vnc端口" class="headerlink" title="设置vnc端口"></a>设置vnc端口</h2><p><code>vim /usr/bin/vncserver</code><br>在这个文件中找到vncPort一行，可以看到<code>$vncPort = 5900 + $displayNumber;</code><br>将5900修改为需要的端口号，之后我想把displayNumber设置为1，因此这里改为：<br><code>$vncPort = 2332 + $displayNumber;</code><br>用<code>vncserver :1</code>命令启动vncserver后，查看log文件可以看到启用的是2333端口。</p><h2 id="安装其他包"><a href="#安装其他包" class="headerlink" title="安装其他包"></a>安装其他包</h2><p><code>sudo apt-get install gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal</code></p><h2 id="修改xtartup文件"><a href="#修改xtartup文件" class="headerlink" title="修改xtartup文件"></a>修改xtartup文件</h2><p>文件位置：<code>~/.vnc/xstartup</code></p><h3 id="Unity-1"><a href="#Unity-1" class="headerlink" title="Unity"></a>Unity</h3><p>将其修改如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following two lines for normal desktop:</span></span><br><span class="line"><span class="comment"># unset SESSION_MANAGER</span></span><br><span class="line"><span class="comment"># exec /etc/X11/xinit/xinitrc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup</span></span><br><span class="line"><span class="comment">#[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources</span></span><br><span class="line"><span class="comment">#xsetroot -solid grey</span></span><br><span class="line"><span class="comment">#vncconfig -iconic &amp;</span></span><br><span class="line"><span class="comment">#x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &amp;</span></span><br><span class="line"><span class="comment">#x-window-manager &amp;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> XKL_XMODMAP_DISABLE=1</span><br><span class="line"><span class="built_in">unset</span> SESSION_MANAGER</span><br><span class="line"><span class="built_in">unset</span> DBUS_SESSION_BUS_ADDRESS</span><br><span class="line"></span><br><span class="line">[ -x /etc/vnc/xstartup ] &amp;&amp; <span class="built_in">exec</span> /etc/vnc/xstartup</span><br><span class="line">[ -r <span class="variable">$HOME</span>/.Xresources ] &amp;&amp; xrdb <span class="variable">$HOME</span>/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line">vncconfig -iconic &amp;</span><br><span class="line">gnome-session &amp;</span><br><span class="line">gnome-panel &amp;</span><br><span class="line">gnome-settings-daemon &amp;</span><br><span class="line">metacity &amp;</span><br><span class="line">nautilus &amp;</span><br><span class="line">gnome-terminal &amp;</span><br></pre></td></tr></table></figure></p><p><a href="https://gist.github.com/Musinux/8e6c4752ed3c143d49764311a504c1e9" target="_blank" rel="noopener">参考来源</a></p><h3 id="Xfce-1"><a href="#Xfce-1" class="headerlink" title="Xfce"></a>Xfce</h3><p><code>sed -i &#39;s$x-window-manager$xfce4-session$&#39; ~/.vnc/xstartup</code></p><h2 id="设置分辨率"><a href="#设置分辨率" class="headerlink" title="设置分辨率"></a>设置分辨率</h2><ol><li>关闭vncserver：<code>vncserver -kill :1</code></li><li>设置分辨率并重启：<code>vncserver -geometry 1366x768 :1</code></li></ol><h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><p>客户端我使用<a href="https://www.realvnc.com/en/connect/download/viewer/" target="_blank" rel="noopener">VNC Viewer</a>，也可自由选择其他软件。<br>这一步比较简单，只需输入ip，指定端口号，正确填写之前设定的vnc密码，即可连接</p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> vnc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用tmux保持远程ssh连接</title>
      <link href="/2018/02/01/tmux/"/>
      <url>/2018/02/01/tmux/</url>
      
        <content type="html"><![CDATA[<p>实际工作中经常遇到以下场景：使用ssh连接远程服务器，当本地机器一段时间不操作，ssh连接会自动断开，ssh下的进程也会自动终止，执行之前命令时的终端输出也丢失了。<br>tmux可以用来解决这一问题。</p><h2 id="安装tmux"><a href="#安装tmux" class="headerlink" title="安装tmux"></a>安装tmux</h2><p><code>apt-get install tmux</code></p><h2 id="常用tmux指令"><a href="#常用tmux指令" class="headerlink" title="常用tmux指令"></a>常用tmux指令</h2><p>tmux中有两个重要的概念，分别是session和window。其中session是window的容器。<br>在终端下输入<code>tmux ls</code>可以查看当前活动的tmux的session。<br>如果没有session运行，输入tmux会新建一个session，名称为默认的数字。如果需要指定名称，可以用以下命令来创建session：<code>tmux new -s session_name</code>.<br>运行<code>tmux a -t session_name</code>可以进入对应的session。<br>一个session中可以有多个window。初次进入session的时候会默认创建一个window。<br>在tmux中按<code>Ctrl + B</code>组合键进入控制状态。</p><table><thead><tr><th style="text-align:center">Command</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">n</td><td style="text-align:center">下一个Window</td></tr><tr><td style="text-align:center">p</td><td style="text-align:center">前一个Window</td></tr><tr><td style="text-align:center">c</td><td style="text-align:center">创建新的Tab</td></tr><tr><td style="text-align:center">o</td><td style="text-align:center">指向下一个区域</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">Detach</td></tr><tr><td style="text-align:center">,</td><td style="text-align:center">重命名Window</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">重命名Session</td></tr></tbody></table><p>更多指令可以查看<a href="https://gist.github.com/ryerh/14b7c24dfd623ef8edc7" target="_blank" rel="noopener">这个页面</a></p><h2 id="恢复先前状态"><a href="#恢复先前状态" class="headerlink" title="恢复先前状态"></a>恢复先前状态</h2><p><code>tmux attach</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> tmux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用命令行连接ftp服务器</title>
      <link href="/2018/01/30/linux-ftp/"/>
      <url>/2018/01/30/linux-ftp/</url>
      
        <content type="html"><![CDATA[<p>使用ftp下载与上传文件是常用需求，除了使用可视化界面的软件之外，也可以使用命令行完成这一操作。<br>首先需要确保已经安装有ftp，如果没有，使用<code>sudo apt-get install ftp</code>进行安装。</p><h2 id="连接fpt服务器"><a href="#连接fpt服务器" class="headerlink" title="连接fpt服务器"></a>连接fpt服务器</h2><p>输入如下命令：<br><code>ftp YourIp</code><br>其中YourIp是ftp服务器的IP地址</p><h2 id="使用被动模式"><a href="#使用被动模式" class="headerlink" title="使用被动模式"></a>使用被动模式</h2><p>登入ftp服务器之后默认使用的是主动模式，而有时候需要使用被动模式，输入<code>passive</code>命令即可进入被动模式。</p><h2 id="ftp命令"><a href="#ftp命令" class="headerlink" title="ftp命令"></a>ftp命令</h2><p>键入<code>?</code>可以查看所有可用的ftp命令，<code>help command</code>可以查看命令的具体用法。</p><h2 id="本地文件夹位置"><a href="#本地文件夹位置" class="headerlink" title="本地文件夹位置"></a>本地文件夹位置</h2><p>使用<code>lcd</code>命令可以查看与改变本地文件夹位置</p><h2 id="上传与下载文件"><a href="#上传与下载文件" class="headerlink" title="上传与下载文件"></a>上传与下载文件</h2><p><code>put a.txt</code>可以将本地文件夹中的文件上传至服务器当前文件夹<br><code>get a.txt</code>可以将服务器上的文件下载至本地<br><code>mput *</code>可以上传多个文件<br><code>mget *</code>可以下载多个文件</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ftp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用ssh远程连接内网中的docker container</title>
      <link href="/2018/01/25/ssh2dockercontainer/"/>
      <url>/2018/01/25/ssh2dockercontainer/</url>
      
        <content type="html"><![CDATA[<p>日常工作中时常会遇到远程操作的问题，两台机器都不具有公网ip，这时候通过ssh连接就会产生一些麻烦，下面是我解决这个问题的方法。</p><h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><p>由于两台机器都不具有公网ip，因此使用ngrok，ngrok需要用到一个具有公网ip的服务器。ngrok自己也提供服务，但是从境内访问官方提供的服务器具有令人难以忍受的延迟。本文中在自己的服务器上搭建了ngrok服务。<br>先把域名解析到服务器。<br>这里我的域名是<code>wangjiebao.com</code>，做了泛解析，把<code>ngrok.wangjiebao.com</code>和<code>*.ngrok.wangjiebao.com</code>解析到ngrok服务器。</p><h2 id="编译ngrok"><a href="#编译ngrok" class="headerlink" title="编译ngrok"></a>编译ngrok</h2><p>我的vps系统是Ubuntu 14.04。</p><h3 id="安装必要的工具。"><a href="#安装必要的工具。" class="headerlink" title="安装必要的工具。"></a>安装必要的工具。</h3><p><code>sudo apt-get install build-essential golang mercurial git</code><br>其次需要安装golang，注意golang的版本必须为1.3以上。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository ppa:gophers/archive</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install golang-1.9-go</span><br></pre></td></tr></table></figure></p><p>注意默认的安装位置是<code>/usr/lib/go-1.9/bin</code><br>需要将它添加到系统路径里。<br><code>cd /usr/bin/</code><br><code>unlink go</code><br><code>ln -s /usr/lib/go-1.9/bin/go go</code></p><h3 id="获取ngrok源码"><a href="#获取ngrok源码" class="headerlink" title="获取ngrok源码"></a>获取ngrok源码</h3><p><code>git clone https://github.com/inconshreveable/ngrok.git ngrok</code></p><h3 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NGROK_DOMAIN=&quot;wangjiebao.com&quot;</span><br><span class="line"></span><br><span class="line">openssl genrsa -out base.key 2048</span><br><span class="line">openssl req -new -x509 -nodes -key base.key -days 10000 -subj &quot;/CN=$NGROK_DOMAIN&quot; -out base.pem</span><br><span class="line">openssl genrsa -out server.key 2048</span><br><span class="line">openssl req -new -key server.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -out server.csr</span><br><span class="line">openssl x509 -req -in server.csr -CA base.pem -CAkey base.key -CAcreateserial -days 10000 -out server.crt</span><br><span class="line"></span><br><span class="line">cp base.pem assets/client/tls/ngrokroot.crt</span><br></pre></td></tr></table></figure><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p><code>sudo make release-server release-client</code><br>这里默认的release client编译的是linux amd64对应的客户端。当客户端的环境变换时，需要分别编译,方法如下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ GOOS=linux GOARCH=amd64 make release-client</span><br><span class="line">$ GOOS=windows GOARCH=amd64 make release-client</span><br><span class="line">$ GOOS=linux GOARCH=arm make release-client</span><br><span class="line"></span><br><span class="line">Linux 平台 32 位系统：GOOS=linux GOARCH=386</span><br><span class="line">Linux 平台 64 位系统：GOOS=linux GOARCH=amd64</span><br><span class="line"></span><br><span class="line">Windows 平台 32 位系统：GOOS=windows GOARCH=386</span><br><span class="line">Windows 平台 64 位系统：GOOS=windows GOARCH=amd64</span><br><span class="line"></span><br><span class="line">MAC 平台 32 位系统：GOOS=darwin GOARCH=386</span><br><span class="line">MAC 平台 64 位系统：GOOS=darwin GOARCH=amd64</span><br><span class="line"></span><br><span class="line">ARM 平台：GOOS=linux GOARCH=arm</span><br></pre></td></tr></table></figure></p><p>编译后ngrok/bin文件夹下有ngrok、ngrokd 两个可执行文件。其中ngrokd是服务器端的程序，ngrok是linux客户端的程序。其余平台下的客户端程序在对应的文件夹下。</p><h2 id="运行服务"><a href="#运行服务" class="headerlink" title="运行服务"></a>运行服务</h2><p><code>sudo ./bin/ngrokd -tlsKey=server.key -tlsCrt=server.crt -domain=&quot;wangjiebao.com&quot; -httpAddr=&quot;:8081&quot; -httpsAddr=&quot;:8082&quot;</code></p><blockquote><p>到这一步，ngrok 服务已经跑起来了，可以通过屏幕上显示的日志查看更多信息。httpAddr、httpsAddr 分别是 ngrok 用来转发 http、https 服务的端口，可以随意指定。ngrokd 还会开一个 4443 端口用来跟客户端通讯（可通过 -tunnelAddr=”:xxx” 指定），如果你配置了 iptables 规则，需要放行这三个端口上的 TCP 协议。</p></blockquote><p>现在访问<a href="http://pub.ngrok.wangjiebao.com:8081" target="_blank" rel="noopener">http://pub.ngrok.wangjiebao.com:8081</a> ， 可以看到这样一行提示：<br><code>Tunnel pub.ngrok.wangjiebao.com:8081 not found</code></p><blockquote><p>由于设置了泛解析，因此pub可以换成其他任意的单词。</p></blockquote><h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><p>现在服务端已经配置完成，还需要在内网上的机器运行客户端，以便将内网的机器连接上服务器。<br>将之前在服务器上编译好的文件拷贝到客户机上。</p><h2 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h2><p>编写一个配置文件，起名为ngrok.cfg<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server_addr: wangjiebao.com:4443</span><br><span class="line">trust_host_root_certs: false</span><br></pre></td></tr></table></figure></p><h2 id="运行客户端"><a href="#运行客户端" class="headerlink" title="运行客户端"></a>运行客户端</h2><p>指定子域、要转发的协议和端口，以及配置文件，运行客户端：<br><code>./ngrok -subdomain pub -proto=tcp -config=ngrok.cfg 22</code></p><blockquote><p>如果需要转发的是HTTP，改为 <code>./ngrok -subdomain pub -proto=http -config=ngrok.cfg 80</code></p></blockquote><p>当tunnel status显示online，说明已经连接上服务器</p><h1 id="配置Docker"><a href="#配置Docker" class="headerlink" title="配置Docker"></a>配置Docker</h1><p>正常的机器这个时候应该已经可以通过任意一台机器使用<code>ssh root@ngrok.wangjiebao.com -p 123456</code>来访问内网机器的端口。</p><blockquote><p>其中端口号会在客户端的运行界面给出</p></blockquote><p>但是我在配置docker container的时候发现访问总是被拒绝。</p><blockquote><p>由于不知道docker container的密码，密码使用<code>passwd</code>指令修改过。</p></blockquote><p>最后发现问题的根源在于Docker container上没有安装sshd服务。</p><h2 id="安装ssh-server"><a href="#安装ssh-server" class="headerlink" title="安装ssh server"></a>安装ssh server</h2><p><code>apt-get install openssh-server</code></p><h2 id="启动与重启ssh-server"><a href="#启动与重启ssh-server" class="headerlink" title="启动与重启ssh server"></a>启动与重启ssh server</h2><p>启动ssh server：<br><code>sudo /etc/init.d/ssh start</code><br>重启ssh server：<br><code>sudo service ssh restart</code><br>查看服务是否运行：<br><code>netstat -aunpt</code></p><h2 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h2><p>配置文件位于<code>/etc/ssh/sshd_config</code><br>将配置文件中的<code>PermitRootLogin without-password</code>改为<code>PermitRootLogin yes</code></p><h1 id="通过ssh访问客户机"><a href="#通过ssh访问客户机" class="headerlink" title="通过ssh访问客户机"></a>通过ssh访问客户机</h1><p>现在已经全部配置完成，可以愉快地玩耍了。在任意一台联网的机器上，都可以使用<code>ssh root@ngrok.wangjiebao.com -p 123456</code>来访问内网机器的端口。</p><blockquote><p>其中端口号会在客户端的运行界面给出</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用anaconda管理多个python版本</title>
      <link href="/2017/12/11/create-conda-env/"/>
      <url>/2017/12/11/create-conda-env/</url>
      
        <content type="html"><![CDATA[<p>使用python的同学都知道，python各种版本以及对应的包管理是很让人头疼的事情。Anaconda很好的解决了这个问题。<br>在Anaconda中，用户可以创建指定python版本的环境，并且方便的在哥哥环境中切换。</p><h2 id="创建环境"><a href="#创建环境" class="headerlink" title="创建环境"></a>创建环境</h2><p>安装完Anaconda后，将anaconda路径添加到PATH变量中。<br>使用如下命令：<br><code>conda create -n a python=3.3</code><br>可以创建一个名称为a的python3.3环境。</p><h2 id="激活环境"><a href="#激活环境" class="headerlink" title="激活环境"></a>激活环境</h2><p><code>source activate a</code><br>可以默认将环境指定为a，通过<code>conda info</code>指令可以查看当前默认环境。</p><h2 id="查看已安装环境"><a href="#查看已安装环境" class="headerlink" title="查看已安装环境"></a>查看已安装环境</h2><p><code>conda info --env</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> conda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python GUI 之tkinter</title>
      <link href="/2017/11/27/python-gui-tkinter/"/>
      <url>/2017/11/27/python-gui-tkinter/</url>
      
        <content type="html"><![CDATA[<p>tkinter是python自带的gui库，支持跨平台。课程作业需要写一个聊天交互界面。<br>代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox</span><br><span class="line"></span><br><span class="line"><span class="comment">#调用chatbot核心交互模块，获得输出</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_text</span><span class="params">(mw,st,imsg)</span>:</span></span><br><span class="line">    message_send_by_bot=<span class="string">''</span></span><br><span class="line">    message_send_by_human=<span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span>(imsg.get().strip()==<span class="string">''</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        message_send_by_human=<span class="string">'Human:\n\t'</span>+imsg.get()+<span class="string">'\n'</span></span><br><span class="line">        message_send_by_bot=<span class="string">'ChatBot:\n\t'</span>+<span class="string">'stupid\n'</span></span><br><span class="line">        mw.config(state=<span class="string">'normal'</span>)</span><br><span class="line">        mw.insert(<span class="string">'end'</span>,message_send_by_human)</span><br><span class="line">        mw.insert(<span class="string">'end'</span>,message_send_by_bot)</span><br><span class="line">        imsg.set(<span class="string">""</span>)</span><br><span class="line">        mw.see(<span class="string">'end'</span>)</span><br><span class="line">        mw.config(state=<span class="string">'disabled'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示作者信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_author</span><span class="params">()</span>:</span></span><br><span class="line">    messagebox.showinfo(<span class="string">"作者信息"</span>,<span class="string">"xxx"</span>)</span><br><span class="line"></span><br><span class="line">window = tk.Tk()</span><br><span class="line"><span class="comment">#input_message为消息框中的文字</span></span><br><span class="line">input_message=tk.StringVar(window)</span><br><span class="line">input_message.set(<span class="string">""</span>)</span><br><span class="line"><span class="comment">#输入回车键发送消息</span></span><br><span class="line">window.bind(<span class="string">'&lt;Return&gt;'</span>,<span class="keyword">lambda</span> x:add_text(message_window,input_entry,input_message))</span><br><span class="line">window.title(<span class="string">'AI Chatbot'</span>)</span><br><span class="line">window.geometry(<span class="string">'600x600'</span>)</span><br><span class="line">window[<span class="string">'bg'</span>] = <span class="string">'white'</span></span><br><span class="line">fram1 = tk.Frame(height=<span class="number">60</span>, width=<span class="number">100</span>, bg=<span class="string">'white'</span>)</span><br><span class="line">fram2 = tk.Frame(height=<span class="number">400</span>, width=<span class="number">100</span>, bg=<span class="string">'blue'</span>)</span><br><span class="line">fram3 = tk.Frame(height=<span class="number">80</span>, width=<span class="number">100</span>, bg=<span class="string">'red'</span>)</span><br><span class="line"><span class="comment">#聊天机器人名字</span></span><br><span class="line">bot_name = tk.Label(fram1,</span><br><span class="line">                    text=<span class="string">'ChatBot'</span>,</span><br><span class="line"></span><br><span class="line">                    bg=<span class="string">'white'</span>,</span><br><span class="line">                    font=(<span class="string">'Arial'</span>, <span class="number">12</span>),</span><br><span class="line">                    width=<span class="number">15</span>, height=<span class="number">2</span></span><br><span class="line">                    )</span><br><span class="line">bot_name.pack(side=<span class="string">'left'</span>)</span><br><span class="line"><span class="comment">#作者信息button</span></span><br><span class="line">about_button = tk.Button(fram1,</span><br><span class="line">                         text=<span class="string">'作者信息'</span>,</span><br><span class="line">                         width=<span class="number">10</span>, height=<span class="number">2</span>,</span><br><span class="line">                         relief=<span class="string">'groove'</span>,</span><br><span class="line">                         bg=<span class="string">'white'</span>,</span><br><span class="line">                         command=show_author)</span><br><span class="line">about_button.pack(side=<span class="string">'right'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输入栏</span></span><br><span class="line">input_entry=tk.Entry(fram3,width=<span class="number">10</span>,</span><br><span class="line">                     bg=<span class="string">'white'</span>,textvariable=input_message)</span><br><span class="line">input_entry.pack(side=<span class="string">'left'</span>,expand=<span class="string">'YES'</span>,fill=<span class="string">'both'</span>)</span><br><span class="line"><span class="comment">#初始化消息框</span></span><br><span class="line">message_window=tk.Text(fram2,bg=<span class="string">'white'</span>,yscrollcommand=<span class="string">'YES'</span>)</span><br><span class="line">message_window.insert(<span class="string">'end'</span>,<span class="string">'ChatBot:\n\t'</span>+<span class="string">'hello\n'</span>)</span><br><span class="line">message_window.config(state=<span class="string">'disabled'</span>)</span><br><span class="line">message_window.pack(side=<span class="string">'top'</span>,expand=<span class="string">'YES'</span>,fill=<span class="string">'both'</span>)</span><br><span class="line"><span class="comment">#发送按钮</span></span><br><span class="line">send_button = tk.Button(fram3,text=<span class="string">'发送(Enter)'</span>,</span><br><span class="line">                        width=<span class="number">10</span>,</span><br><span class="line">                        height=<span class="number">2</span>,</span><br><span class="line">                        relief=<span class="string">'groove'</span>,</span><br><span class="line">                        bg=<span class="string">'white'</span>,</span><br><span class="line">                        state=<span class="string">'active'</span>,</span><br><span class="line">                        command=<span class="keyword">lambda</span> :add_text(message_window,input_entry,input_message)</span><br><span class="line">                        )</span><br><span class="line">send_button.pack(side=<span class="string">'right'</span>)</span><br><span class="line"></span><br><span class="line">fram1.pack(fill=<span class="string">'x'</span>, side=<span class="string">'top'</span>)</span><br><span class="line">fram2.pack(fill=<span class="string">'both'</span>, expand=<span class="string">'YES'</span>)</span><br><span class="line">fram3.pack(fill=<span class="string">'x'</span>, side=<span class="string">'bottom'</span>)</span><br><span class="line">window.mainloop()</span><br></pre></td></tr></table></figure></p><p>效果如下：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/1127/tkinter-gui.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Tkinter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将多个域名解析到同一服务器的不同目录</title>
      <link href="/2017/11/24/virtual-hosts/"/>
      <url>/2017/11/24/virtual-hosts/</url>
      
        <content type="html"><![CDATA[<p>之前折腾的阿里云主机能够正常访问了，就想着在服务器上部署多个网站。比如将 <a href="http://www.sparkydogx.top" target="_blank" rel="noopener">www.sparkydogx.top</a> 解析到我的主站点，将 blog.sparkydogx.top 解析到我的博客站点。我的服务器是ubuntu14.04系统，web服务使用的是apache，具体操作如下：</p><h2 id="设置域名解析"><a href="#设置域名解析" class="headerlink" title="设置域名解析"></a>设置域名解析</h2><p>购买域名后，虽然理论上子域名个数是无限的，但是一般域名商都会给出五个左右的限制，这对个人来说已经足够使用了。这里只需要将需要的子域名解析到服务器的ip即可。</p><h2 id="设置apache2的配置文件"><a href="#设置apache2的配置文件" class="headerlink" title="设置apache2的配置文件"></a>设置apache2的配置文件</h2><p>子域名被解析到了同一个ip地址，判断访问哪个目录到决策只能是由服务器做出的。Appache2提供Virtual Host功能，只需要在<code>/etc/apache2/site-avaliable</code>文件夹下新建一个配置文件，配置文件内容可以参考默认配置，更改<strong>端口</strong>和<strong>目录</strong>即可。</p><h2 id="建立软连接"><a href="#建立软连接" class="headerlink" title="建立软连接"></a>建立软连接</h2><p>在运行时，apache并不是在<code>/etc/apache2/site-avaliable</code>文件夹读取配置，而是在<code>/etc/apache2/site-enable</code>读取文件，因此需要在这个文件夹内建立软链接。</p><h2 id="重启apache2"><a href="#重启apache2" class="headerlink" title="重启apache2"></a>重启apache2</h2><p><code>sudo /etc/init.d/apache2  restart</code></p><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>这时候在浏览器输入子域名，发现可以实现所需功能。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matlab绘制caffe的loss图像</title>
      <link href="/2017/11/05/draw-caffe-loss/"/>
      <url>/2017/11/05/draw-caffe-loss/</url>
      
        <content type="html"><![CDATA[<p>之前见过有人使用shell画loss图像，我是在是学不来，于是自己动手写了一段matlab代码，把数据读到matlab里面。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">fid=fopen(<span class="string">'/data2/xxx/workspace/output.txt'</span>);</span><br><span class="line">tline = fgetl(fid);</span><br><span class="line"><span class="keyword">while</span> ischar(tline)</span><br><span class="line">    sub_idx_iteration=strfind(tline,<span class="string">'Iteration'</span>);</span><br><span class="line">    <span class="keyword">if</span>(sub_idx_iteration)</span><br><span class="line">        sub_loss = strfind(tline,<span class="string">'loss'</span>);</span><br><span class="line">        <span class="keyword">if</span>(sub_loss)</span><br><span class="line">        idx_end=strfind(tline,<span class="string">','</span>);</span><br><span class="line">        iteration = str2num(tline(sub_idx_iteration+<span class="number">10</span>:idx_end<span class="number">-1</span>));</span><br><span class="line">        total_loss=str2num(tline(sub_loss+<span class="number">7</span>:<span class="keyword">end</span>));</span><br><span class="line">        idx=iteration/<span class="number">5</span>+<span class="number">1</span>;</span><br><span class="line">        matrix_for_plot(idx,<span class="number">1</span>)=iteration;</span><br><span class="line">        matrix_for_plot(idx,<span class="number">14</span>)=total_loss;</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">12</span></span><br><span class="line">            tline=fgetl(fid);</span><br><span class="line">            stage_loss_start=strfind(tline,<span class="string">'* 1 ='</span>)+<span class="number">6</span>;</span><br><span class="line">            stage_loss=str2num(tline(stage_loss_start:<span class="keyword">end</span><span class="number">-5</span>));</span><br><span class="line">            matrix_for_plot(idx,<span class="built_in">i</span>+<span class="number">1</span>)=stage_loss;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    tline = fgetl(fid);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">figure(<span class="number">1</span>)</span><br><span class="line">plot(matrix_for_plot(:,<span class="number">1</span>),matrix_for_plot(:,<span class="number">13</span>));</span><br><span class="line">ylim([<span class="number">0</span>,<span class="number">200</span>])</span><br><span class="line">xlabel(<span class="string">'Iteration'</span>)</span><br><span class="line">ylabel(<span class="string">'L2 (Joints)'</span>)</span><br><span class="line">saveas(<span class="number">1</span>,<span class="string">'L2.jpg'</span>);</span><br><span class="line">figure(<span class="number">2</span>)</span><br><span class="line">plot(matrix_for_plot(:,<span class="number">1</span>),matrix_for_plot(:,<span class="number">12</span>));</span><br><span class="line">xlabel(<span class="string">'Iteration'</span>)</span><br><span class="line">ylabel(<span class="string">'L1 (PAF)'</span>)</span><br><span class="line">saveas(<span class="number">2</span>,<span class="string">'L1.jpg'</span>);</span><br><span class="line">figure(<span class="number">3</span>)</span><br><span class="line">plot(matrix_for_plot(:,<span class="number">1</span>),matrix_for_plot(:,<span class="number">14</span>));</span><br><span class="line">ylim([<span class="number">0</span>,<span class="number">3000</span>])</span><br><span class="line">xlabel(<span class="string">'Iteration'</span>)</span><br><span class="line">ylabel(<span class="string">'total loss'</span>)</span><br><span class="line">saveas(<span class="number">3</span>,<span class="string">'total_loss.jpg'</span>);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> caffe </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初次使用阿里云服务器</title>
      <link href="/2017/10/31/first-use-aliyun/"/>
      <url>/2017/10/31/first-use-aliyun/</url>
      
        <content type="html"><![CDATA[<p>前一阵开会，Github也被墙了，我这个挂在Github Pages上的博客墙内也无法访问。正好看到阿里云有学生优惠，就没忍住入了一年的，没想到是个大坑。</p><h2 id="SSH远程登录"><a href="#SSH远程登录" class="headerlink" title="SSH远程登录"></a>SSH远程登录</h2><p>拿到服务器，第一件事就是ssh，阿里云自己提供的网页版本实在体验太差，我看到的控制台最下显示不全，每次都看不到自己输入的指令是啥。从本地ssh连接到服务器时却总是访问被拒绝。<br>经检查需要在控制台的安全组里设置，入网端口22（ssh），允许的地址段写当前ip地址，即可远程ssh。</p><h2 id="服务器备案"><a href="#服务器备案" class="headerlink" title="服务器备案"></a>服务器备案</h2><p>我使用阿里云的初衷是在上面搭建一个ngrok服务器，使我能够从laptop上远程控制lab的计算机。结果发现我的这个云服务器空有一个公网ip，却无法通过公网ip访问。折腾一阵之后得知境内的服务器必须备案，否则不给从公网访问，也就是说只能访问阿里云内部的服务器。备案也挺麻烦，又是填表又是拍照，好在足不出户都可完成。</p><h2 id="域名备案"><a href="#域名备案" class="headerlink" title="域名备案"></a>域名备案</h2><p>服务器的配置光跑ngrok有些浪费，准备动手建一个动态博客玩一玩，当然得要有个响亮的域名啦。花三块大洋买了一年的.top域名。买完告诉我境内域名不备案不给解析。我的心情真是相当的复杂。走完流程备了案，一个工作日之内就审核通过了，效率还算高。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果只是个人用途，建议使用境外的服务器和域名商————当然以后会不会被墙也不知道，是存在一定风险的。<em>但是境内的服务器和域名都要备案实在是麻烦！！！</em></p><p><strong>完</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用git进行版本控制</title>
      <link href="/2017/10/30/use-git/"/>
      <url>/2017/10/30/use-git/</url>
      
        <content type="html"><![CDATA[<p>有些编程经验的同学都知道，版本控制是一个大问题。有时候一个文件改坏了，想回到当初的起点，却只能呆站在镜子前。<br>而有了git却不一样了。git就像专卖后悔药的。<br>在使用git前，通常要建立一个配置，告诉git用户名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure></p><p>通常在Github中clone下来的项目会自带git。也可以选择在空文件夹里建立git仓库，使用<code>git init</code>即可。<br>常用命令：<br><code>git add .</code> 将文件夹下所有文件加到git commit的目录中。<br><code>git commit -m &quot;Your comment&quot;</code> 将更改commit到git仓库。<br><code>git log</code> 查看git仓库中的所有git版本。<br><code>git reflog</code> 查看对git仓库的历史操作<br><code>git reset --hard xxxxx</code> 其中xxxx为git log中显示的key</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python创建文件夹</title>
      <link href="/2017/10/25/mkdir-use-python/"/>
      <url>/2017/10/25/mkdir-use-python/</url>
      
        <content type="html"><![CDATA[<p>有时候需要仿照一个已存在的文件夹创造和它同样结构的空文件夹（子文件夹名相同）。<br>之前使用python的<code>os.system()</code>来实现，先读取，再一层一层地创建。<br>今天发现python的os中提供了方便的makedir方法，可以用来递归的创建目录，即中间文件夹若不存在也会被创建。<br>Example：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">source_path=<span class="string">'xxx'</span></span><br><span class="line">subdir=os.listdir(source_path)</span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> subdir:</span><br><span class="line">  os.makedirs(os.path.join(<span class="string">'ddd'</span>,d))</span><br></pre></td></tr></table></figure></p><hr><p><strong>Update</strong>：<br>使用这种方法的时候，当想要创建的文件夹已经存在时会出现异常，调整代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(directory):</span><br><span class="line">    os.makedirs(directory)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查看lmdb中的数据</title>
      <link href="/2017/10/22/look-up-lmdb/"/>
      <url>/2017/10/22/look-up-lmdb/</url>
      
        <content type="html"><![CDATA[<p>lmdb是caffe钦定的数据库类型，有时候难免需要查看lmdb数据库中的数据，方法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import lmdb</span><br><span class="line">import caffe</span><br><span class="line">lmdbpath=&apos;/data2/guoyu/rmppe/Realtime_Multi-Person_Pose_Estimation/training/COCO_kpt/lmdb&apos;</span><br><span class="line">datum = caffe.proto.caffe_pb2.Datum()</span><br><span class="line">env=lmdb.open(lmdbpath)</span><br><span class="line">txn=env.begin()</span><br><span class="line">cursor=txn.cursor()</span><br><span class="line">for key,value in cursor:</span><br><span class="line">    datum.ParseFromString(value)</span><br><span class="line">    data=caffe.io.datum_to_array(datum)</span><br><span class="line">    print data[3,:,:]</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> caffe </tag>
            
            <tag> lmdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>根据文件名从json文件中提取信息</title>
      <link href="/2017/10/21/extract-subset/"/>
      <url>/2017/10/21/extract-subset/</url>
      
        <content type="html"><![CDATA[<p>在遇到大型数据库时，从中选取一个子集先行训练往往是一个比较好的选择。代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">import os</span><br><span class="line">imgpath=&apos;/data2/guoyu/subset/&apos;</span><br><span class="line">labeljsonpath=&apos;/data2/guoyu/keypoint_validation_annotations_20170911.json&apos;</span><br><span class="line">f=open(labeljsonpath)</span><br><span class="line">label=json.load(f)</span><br><span class="line">subsetlist=os.listdir(imgpath)</span><br><span class="line">jsonTosave=&apos;/data2/guoyu/subset.json&apos;</span><br><span class="line">jFile=open(jsonTosave,&apos;w&apos;)</span><br><span class="line">ls=[]</span><br><span class="line">for x in range(len(subsetlist)):</span><br><span class="line">    imgid=subsetlist[x][:-4]</span><br><span class="line">    for lab in label:</span><br><span class="line">        if lab[&quot;image_id&quot;]==imgid:</span><br><span class="line">            di=&#123;&#125;</span><br><span class="line">            di=lab</span><br><span class="line">            ls.append(di)</span><br><span class="line">json.dump(ls,jFile)</span><br><span class="line">jFile.close()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10安装系统后没有网卡驱动的解决方案</title>
      <link href="/2017/10/19/Lan-driver-win10/"/>
      <url>/2017/10/19/Lan-driver-win10/</url>
      
        <content type="html"><![CDATA[<p>学校给配置了新电脑，安装完Windows10系统之后发现无法联网。<br>Windows10是自带网卡驱动的，经检查发现是网卡型号比较冷门，Windows10自带的网卡驱动并不适用，而从网上下载的网卡驱动也无法安装。<br><strong>解决方案</strong>:<br>打开‘设备管理器’，‘查看’选项卡中，选择‘显示隐藏的设备’。<br>然后在设备管理器中找到‘网络适配器’，看到适配器的型号名称很奇怪，右击卸载驱动。<br>‘操作’选项卡中，点击‘扫描硬件改动’。<br>然后可以安装正确的网卡驱动。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装与卸载dpkg</title>
      <link href="/2017/10/18/uninstall-dpkg/"/>
      <url>/2017/10/18/uninstall-dpkg/</url>
      
        <content type="html"><![CDATA[<h2 id="安装dpkg"><a href="#安装dpkg" class="headerlink" title="安装dpkg"></a>安装dpkg</h2><p><code>dpkg</code>是一个底层的安装软件，可以用于本地安装。<br>Example：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i cuda-repo-ubuntu1404_7.5-18_amd64.deb</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install cuda</span><br></pre></td></tr></table></figure></p><h2 id="卸载dpkg"><a href="#卸载dpkg" class="headerlink" title="卸载dpkg"></a>卸载dpkg</h2><p>有时候执行第三句命令时会遇到安装包出错的问题，这时候需要卸载原来加载的deb包。<br>使用命令<code>dpkg -l | grep urserver</code>可以查看已加载的deb包，在此命令的第一列有<code>ii</code>表示<code>installed ok installed</code>。<br>如果只移除package本身，而不移除配置文件，执行<code>dpkg -r urserver</code>。<br>如果既要移除package，也要移除配置文件，执行<code>dpkg -P urserver</code>。</p><h2 id="检验是否卸载完成"><a href="#检验是否卸载完成" class="headerlink" title="检验是否卸载完成"></a>检验是否卸载完成</h2><p><code>dpkg -l | grep urserver</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> dpkg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用jedi-vim对python代码进行自动补全</title>
      <link href="/2017/10/17/jedi-vim/"/>
      <url>/2017/10/17/jedi-vim/</url>
      
        <content type="html"><![CDATA[<h2 id="安装pathogen"><a href="#安装pathogen" class="headerlink" title="安装pathogen"></a>安装pathogen</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; \</span><br><span class="line">curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim</span><br></pre></td></tr></table></figure><h2 id="修改vimrc"><a href="#修改vimrc" class="headerlink" title="修改vimrc"></a>修改vimrc</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">execute pathogen#infect()</span><br><span class="line">syntax on</span><br><span class="line">filetype plugin indent on</span><br></pre></td></tr></table></figure><h2 id="git-clone-jedi-vim"><a href="#git-clone-jedi-vim" class="headerlink" title="git clone jedi-vim"></a>git clone jedi-vim</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/davidhalter/jedi-vim.git</span><br></pre></td></tr></table></figure><h2 id="更新vim"><a href="#更新vim" class="headerlink" title="更新vim"></a>更新vim</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install software-properties-common</span><br><span class="line">sudo apt-get install python-software-properties</span><br><span class="line">sudo add-apt-repository ppa:jonathonf/vim</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install vim</span><br></pre></td></tr></table></figure><h2 id="安装jedi"><a href="#安装jedi" class="headerlink" title="安装jedi"></a>安装jedi</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install jedi</span><br><span class="line">cd ~/.vim/bundle/jedi-vim</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure><p>安装完成。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Mac上使用有线网络并打开Wi-Fi热点</title>
      <link href="/2017/10/15/LanInMac/"/>
      <url>/2017/10/15/LanInMac/</url>
      
        <content type="html"><![CDATA[<h2 id="USB网线转接"><a href="#USB网线转接" class="headerlink" title="USB网线转接"></a>USB网线转接</h2><p>工作需要使用到有线网络，但是Mac上没有有线接口，从某宝买的USB网线转接口无法在Mac上直接使用。<br>解决方案如下：</p><ol><li>前往TP-Link的网站<a href="http://service.tp-link.com.cn/detail_download_4868.html" target="_blank" rel="noopener">下载驱动</a>，在Mac上进行安装。</li><li>重新启动Mac</li><li>连接转换器，打开网络偏好设置，可以看到多了一个有线连接的配置，在<code>配置IPv4</code>一栏的下拉列表里选择<code>创建PPOE服务</code>，填入ISP账号密码，即可连接到因特网。</li></ol><h2 id="打开Wi-Fi热点"><a href="#打开Wi-Fi热点" class="headerlink" title="打开Wi-Fi热点"></a>打开Wi-Fi热点</h2><ol><li>打开<code>配置</code>-&gt;<code>共享</code></li><li>选择<code>互联网共享</code></li><li><code>共享以下来源的连接</code>，选择已经连接的有线网络</li><li><code>用以下端口共享给电脑</code>，选择<code>Wi-Fi</code></li><li>在<code>Wi-Fi选项</code>中设置Wi-Fi名称和密码</li><li>在<code>互联网共享</code>选项前打勾<br>设置完成。</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更改系统中的CUDA版本</title>
      <link href="/2017/10/11/install-CUDA/"/>
      <url>/2017/10/11/install-CUDA/</url>
      
        <content type="html"><![CDATA[<p>服务器上的CUDA版本为7.0，而跑程序至少需要7.5。因此重新安装CUDA</p><h2 id="卸载旧版本的CUDA"><a href="#卸载旧版本的CUDA" class="headerlink" title="卸载旧版本的CUDA"></a>卸载旧版本的CUDA</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/cuda-7.0/bin</span><br><span class="line">sudo ./uninstall_cuda_toolkit_7.0.pl</span><br></pre></td></tr></table></figure><p>如果有提示卸载失败的文件或文件夹，可以自己手动删除掉。</p><h2 id="卸载原来的NVIDIA驱动"><a href="#卸载原来的NVIDIA驱动" class="headerlink" title="卸载原来的NVIDIA驱动"></a>卸载原来的NVIDIA驱动</h2><p><code>sudo apt-get remove nvidia*</code></p><h2 id="安装CUDA"><a href="#安装CUDA" class="headerlink" title="安装CUDA"></a>安装CUDA</h2><p>安装开发需要的基本包<br><code>sudo apt-get install build-essential</code><br>前往Nvidia<a href="http://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">官网</a>下载CUDA安装包。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i cuda-repo-ubuntu1404_7.5-18_amd64.deb</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install cuda</span><br></pre></td></tr></table></figure></p><p>安装完成，可以重启机器以验证安装。</p><h2 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export CUDA_HOME=/usr/local/cuda-7.5</span><br><span class="line">export LD_LIBRARY_PATH=$&#123;CUDA_HOME&#125;/lib64</span><br><span class="line">PATH=$&#123;CUDA_HOME&#125;/bin:$&#123;PATH&#125;</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure><h2 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h2><figure class="highlight plain"><figcaption><span>cuda-install-samples-7.5.sh  ~</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/NVIDIA_CUDA-7.5_Samples</span><br><span class="line">$ cd 1_Utilities/deviceQuery</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>这里使用的是官方提供的sample，如果编译过程不报错，说明安装成功。可通过<code>nvcc --version</code>指令查看CUDA的版本信息。</p><h2 id="安装cudnn"><a href="#安装cudnn" class="headerlink" title="安装cudnn"></a>安装cudnn</h2><p>通常只安装CUDA是不够的，还需要安装对应的cudnn，可以参考<a href="https://sparkydogx.github.io/2017/10/05/fix-problem-tf-libcudnn/#more">这篇教程</a>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> CUDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在服务器上编译caffe</title>
      <link href="/2017/10/10/install-caffe/"/>
      <url>/2017/10/10/install-caffe/</url>
      
        <content type="html"><![CDATA[<h2 id="更改Sources"><a href="#更改Sources" class="headerlink" title="更改Sources"></a>更改Sources</h2><p>工欲善其事，必先利其器。Ubuntu默认的Sources被神秘力量阻隔而无法访问，pip最近也很不稳定，所以第一步是将其换成稳定可用的Sources。</p><h3 id="更改Ubuntu的Sources"><a href="#更改Ubuntu的Sources" class="headerlink" title="更改Ubuntu的Sources"></a>更改Ubuntu的Sources</h3><p>参照<a href="https://sparkydogx.github.io/2017/10/09/aptget-update/#more">这篇博客</a>中的教程。</p><blockquote><ol><li><code>vim /etc/apt/sources.list</code></li><li><code>:%s/archive.ubuntu.com/debian.ustc.edu.cn/g</code></li><li><code>sudo rm /var/lib/apt/lists/* -vf</code></li><li><code>sudo apt-get update</code></li></ol></blockquote><h3 id="更改pip的Sources"><a href="#更改pip的Sources" class="headerlink" title="更改pip的Sources"></a>更改pip的Sources</h3><ol><li><code>mkdir -m 777 ~/.pip</code></li><li><code>sudo vim ~/.pip/pip.conf</code></li><li><p>将以下内容粘贴到文件中并保存</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">trusted-host=pypi.tuna.tsinghua.edu.cn</span><br><span class="line">index-url=https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p>这里使用的是清华大学的镜像源，可以手动更改成其他源。</p><blockquote><p>如果系统没有pip，并且get-pip.py不能使用时，可以先通过<code>sudo apt-get install python-pip</code>安装pip，通常这种方法安装的是低版本的pip，需要获取更新。<br>如果pip版本过低，可以先卸载：<code>sudo pip uninstall pip</code>，然后使用<code>get-pip.py</code>安装。</p></blockquote><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</span><br><span class="line">sudo apt-get install --no-install-recommends libboost-all-dev</span><br><span class="line">sudo apt-get install libatlas-base-dev</span><br><span class="line">sudo apt-get install python-dev</span><br><span class="line">sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br><span class="line">sudo apt-get install libopenblas-dev</span><br><span class="line">sudo apt-get install --no-install-recommends libboost-all-dev</span><br><span class="line">sudo apt-get install python-protobuf</span><br><span class="line">sudo apt-get install python-numpy python-pydot</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip2 install scikit-image</span><br><span class="line">pip2 install opencv-python</span><br></pre></td></tr></table></figure><p>如果pip版本较低，可能还需要<code>sudo apt-get install libatlas-base-dev gfortran</code></p><h2 id="修改Makeile-config"><a href="#修改Makeile-config" class="headerlink" title="修改Makeile.config"></a>修改Makeile.config</h2><p>常修改的有CUDA路径，PYTHON INCLUDE路径等。(Anaconda与默认配置会有区别)</p><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p><code>make all</code><br><code>make pycaffe</code></p><h2 id="将caffe-python添加到python系统路径"><a href="#将caffe-python添加到python系统路径" class="headerlink" title="将caffe/python添加到python系统路径"></a>将caffe/python添加到python系统路径</h2><p>vim ~/.bashrc<br>将<code>export PYTHONPATH=path/to/caffe/python:$PYTHONPATH</code>添加到文件中。<br><code>source ~/.bashrc</code> 使更改生效。<br>此时在python shell中输入<code>import caffe</code>，可以加载caffe</p>]]></content>
      
      
      
        <tags>
            
            <tag> caffe </tag>
            
            <tag> dependencies </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决&#39;apt-get update&#39;时404的问题</title>
      <link href="/2017/10/09/aptget-update/"/>
      <url>/2017/10/09/aptget-update/</url>
      
        <content type="html"><![CDATA[<p>在服务器上的Ubuntu里使用<code>sudo apt-get update</code>时总是报错，经检查是source的网址被墙了，需要修改source文件。</p><ol><li><code>vim /etc/apt/sources.list</code></li><li><code>:%s/archive.ubuntu.com/debian.ustc.edu.cn/g</code></li><li><code>sudo rm /var/lib/apt/lists/* -vf</code></li><li><code>sudo apt-get update</code></li></ol><blockquote><p>其中<code>debian.ustc.edu.cn</code>是中科大的镜像源，也可以换成其他镜像源，比如：<br>mirrors.163.com<br>mirrors.sohu.com<br>ftp.sjtu.edu.cn #上海交通大学服务器<br>debian.ustc.edu.cn #中科大<br>mirror9.net9.org #清华<br>mirror.rootguide.org #上海电信</p></blockquote><hr><p>2017/10/28更新<br>最近网络环境极为恶劣，由于apt-get的缘故，耽搁了我一个下午的工作。发现交通大学和香港中文的服务器较为稳定。不建议使用阿里云的镜像源。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Matlab批量处理数据</title>
      <link href="/2017/10/07/handle-dir-with-matlab/"/>
      <url>/2017/10/07/handle-dir-with-matlab/</url>
      
        <content type="html"><![CDATA[<p>最近接到任务，需要批量分割灰度图像，并保存为.mat文件。图像文件保存在若干个子文件夹中。代码如下：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">maindir=<span class="string">'sparkydogx/cityscape/val'</span>;</span><br><span class="line">subdir=dir(maindir);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> =<span class="number">1</span>:<span class="built_in">length</span>( subdir )</span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">isequal</span>( subdir( <span class="built_in">i</span> ).name, <span class="string">'.'</span> )||<span class="built_in">isequal</span>( subdir( <span class="built_in">i</span> ).name, <span class="string">'..'</span>)||(~subdir( <span class="built_in">i</span> ).isdir))  </span><br><span class="line">        <span class="keyword">continue</span>; <span class="comment">%subdir的前两个元素是../和./</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    subdirpath = fullfile( maindir, subdir( <span class="built_in">i</span> ).name, <span class="string">'*.png'</span> ); <span class="comment">%subdirpath为字符串，用于描述文件位置和类型</span></span><br><span class="line">    dat = dir( subdirpath );        <span class="comment">%dat为所有满足条件的文件路径   </span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span> : <span class="built_in">length</span>( dat )</span><br><span class="line">        datpath = fullfile( maindir, subdir( <span class="built_in">i</span> ).name, dat( <span class="built_in">j</span> ).name);</span><br><span class="line">        A=double(imread([<span class="string">''</span>,datpath])); <span class="comment">%灰度图像读取后为uint8格式，将其转换为double</span></span><br><span class="line">        <span class="keyword">for</span> k = <span class="number">1</span>:<span class="number">43</span></span><br><span class="line">            h&#123;k&#125;=A(:,<span class="number">656</span>*(k<span class="number">-1</span>)+<span class="number">1</span>:<span class="number">656</span>*k);</span><br><span class="line">            <span class="keyword">if</span> k&lt;=<span class="number">15</span></span><br><span class="line">                cmd=[<span class="string">'X.val.'</span>,subdir(i).name,<span class="string">'('</span>,num2str(j),<span class="string">').BeliefMap('</span>,num2str(k),<span class="string">')=h('</span>,num2str(k),<span class="string">');'</span>];</span><br><span class="line">                eval(cmd);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">               cmd=[<span class="string">'X.val.'</span>,subdir(i).name,<span class="string">'('</span>,num2str(j),<span class="string">').PAF('</span>,num2str(k<span class="number">-15</span>),<span class="string">')=h('</span>,num2str(k),<span class="string">');'</span>];</span><br><span class="line">               eval(cmd);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">save(<span class="string">'/spardogx/val.mat'</span>,<span class="string">'X'</span>,<span class="string">'-v7.3'</span>);</span><br></pre></td></tr></table></figure></p><p>涉及到的点：</p><ol><li>文件夹的遍历，在上面的代码中通过<code>dir</code>实现</li><li><code>eval</code>函数的使用，eval可以执行字符串中的指令，使用子文件夹名作为structure的字段，十分方便。</li><li><code>&#39;-v7.3&#39;</code> 最初在执行时遇到错误：<br><code>Warning: Variable &#39;X&#39; cannot be saved to a MAT-file whose version is older than 7.3.To save this variable, use the -v7.3 switch.</code><br>原因是Matlab在7.3版本之前不支持大个数据的存储（2GB以上），在7.3版本后添加了这一支持。</li></ol><hr><p>2017-10-25 更新：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">maindir=<span class="string">'/data2/source/cityscapes'</span></span><br><span class="line">outputDir=<span class="string">'/data2/dest/heatmaps'</span></span><br><span class="line">subdir_1=dir(maindir);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(subdir_1);</span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">isequal</span>( subdir_1( <span class="built_in">i</span> ).name, <span class="string">'.'</span> )||<span class="built_in">isequal</span>( subdir_1( <span class="built_in">i</span> ).name, <span class="string">'..'</span>)||(~subdir_1( <span class="built_in">i</span> ).isdir))  </span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    subdir_2=dir(fullfile(maindir,subdir_1(<span class="built_in">i</span>).name));</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="built_in">length</span>(subdir_2)</span><br><span class="line">        <span class="keyword">if</span>( <span class="built_in">isequal</span>( subdir_2( <span class="built_in">j</span> ).name, <span class="string">'.'</span> )||<span class="built_in">isequal</span>( subdir_2( <span class="built_in">j</span> ).name, <span class="string">'..'</span>)||(~subdir_2( <span class="built_in">j</span> ).isdir))  </span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        subdir_3=dir(fullfile(maindir,subdir_1(<span class="built_in">i</span>).name,subdir_2(<span class="built_in">j</span>).name));</span><br><span class="line">        <span class="keyword">for</span> x=<span class="number">1</span>:<span class="built_in">length</span>(subdir_3)</span><br><span class="line">            <span class="keyword">if</span>( <span class="built_in">isequal</span>( subdir_3(x).name, <span class="string">'.'</span> )||<span class="built_in">isequal</span>( subdir_3( x ).name, <span class="string">'..'</span>)||(~subdir_3( x ).isdir))  </span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            finalpath=fullfile(maindir,subdir_1(<span class="built_in">i</span>).name,subdir_2(<span class="built_in">j</span>).name,subdir_3(x).name,<span class="string">'*.png'</span>)</span><br><span class="line">            dat=dir(finalpath);</span><br><span class="line">            <span class="keyword">for</span> idx =<span class="number">1</span>:<span class="built_in">length</span>(dat)</span><br><span class="line">                imgId=dat(idx).name(<span class="number">1</span>:<span class="built_in">length</span>(dat(idx).name)<span class="number">-13</span>);</span><br><span class="line">                datpath=fullfile(maindir,subdir_1(<span class="built_in">i</span>).name,subdir_2(<span class="built_in">j</span>).name,subdir_3(x).name,dat(idx).name);</span><br><span class="line">                A=double(imread([<span class="string">''</span>,datpath]));</span><br><span class="line">                    <span class="keyword">for</span> k = <span class="number">1</span>:<span class="number">43</span></span><br><span class="line">                        h&#123;k&#125;=A(:,<span class="number">656</span>*(k<span class="number">-1</span>)+<span class="number">1</span>:<span class="number">656</span>*k);</span><br><span class="line">                        <span class="keyword">if</span> k&lt;=<span class="number">15</span></span><br><span class="line">                            hmfullfile=fullfile(outputDir,subdir_1(<span class="built_in">i</span>).name,subdir_2(<span class="built_in">j</span>).name,[imgId,<span class="string">'_bm.mat'</span>]);</span><br><span class="line">                            pafname=fullfile(outputDir,subdir_1(<span class="built_in">i</span>).name,subdir_2(<span class="built_in">j</span>).name,[imgId,<span class="string">'_paf.mat'</span>]);</span><br><span class="line">                            <span class="comment">% cmd=['X.val.',subdir(i).name,'.',dat(j).name,'.BeliefMap(',num2str(k),')=h(',num2str(k),');'];</span></span><br><span class="line">                            cmd1=[<span class="string">'heatmap.imageID='''</span>,imgId,<span class="string">''';'</span>];</span><br><span class="line">                            cmd2=[<span class="string">'heatmap.BeliefMap('</span>,num2str(k),<span class="string">')=h('</span>,num2str(k),<span class="string">');'</span>];</span><br><span class="line">                            cmd3=[<span class="string">'save('''</span>,hmfullfile,<span class="string">''',''heatmap'');'</span>];</span><br><span class="line">                            eval(cmd1);</span><br><span class="line">                            eval(cmd2);</span><br><span class="line">                            eval(cmd3);</span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                        <span class="comment">%    cmd=['X.val.',subdir(i).name,'.',dat(j).name,'.PAF(',num2str(k-15),')=h(',num2str(k),');'];</span></span><br><span class="line">                            cmd1=[<span class="string">'paf.imageID='''</span>,imgId,<span class="string">''';'</span>];</span><br><span class="line">                            cmd2=[<span class="string">'paf.PAF('</span>,num2str(k<span class="number">-15</span>),<span class="string">')=h('</span>,num2str(k),<span class="string">');'</span>];</span><br><span class="line">                            cmd3=[<span class="string">'save('''</span>,pafname,<span class="string">''',''paf'');'</span>];</span><br><span class="line">                        <span class="comment">%    eval(cmd);</span></span><br><span class="line">                            eval(cmd1);</span><br><span class="line">                            eval(cmd2);</span><br><span class="line">                            eval(cmd3);</span><br><span class="line">                        <span class="keyword">end</span></span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Terminal中命令行覆盖的问题</title>
      <link href="/2017/10/07/terminal-cover/"/>
      <url>/2017/10/07/terminal-cover/</url>
      
        <content type="html"><![CDATA[<p>在使用Ternimal时，常常会发现命令行过长时，之前输入的内容在显示时会被覆盖掉。为了解决这一问题，可以在<code>~/.bash_profile</code>中添加如下语句：<br><code>PS1=&#39;\[\e[01;33m\]\u@\h \W\$\[\e[m\] &#39;</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> Terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Vim中设置python的缩进</title>
      <link href="/2017/10/05/vim-python-inden/"/>
      <url>/2017/10/05/vim-python-inden/</url>
      
        <content type="html"><![CDATA[<p>在python中，缩进可以使用Tab，也可以使用空格。python3中允许混用，但是在python2中将空格与Tab键混用会报错。pep8规范中建议全部使用空格作为缩进。<br>许多python IDE会自动将用户输入的Tab转变为4个空格，但是纯洁不做作的Vim显然不会自动帮你完成。需要在<code>~/.vimrc</code>文件中加入以下内容来实现这一功能：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set number</span><br><span class="line">set shiftwidth=4</span><br><span class="line">set tabstop=4</span><br><span class="line">set expandtab</span><br><span class="line">set smartindent</span><br><span class="line">set autoindent</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用tensorflow-gpu时libcudnn报错的解决方案</title>
      <link href="/2017/10/05/fix-problem-tf-libcudnn/"/>
      <url>/2017/10/05/fix-problem-tf-libcudnn/</url>
      
        <content type="html"><![CDATA[<p>实验室服务器上的tensorflow Docker镜像里只有python2的完整环境，而遇到程序需要在python3里跑，于是通过<code>pip3</code>安装了<code>tensorflow</code>和<code>tensorflow-gpu</code>。安装完成后在GPU上跑tensorflow时会报错<code>ImportError: libcudnn.5: cannot open shared object file: No such file or directory</code>。<br>经检查发现缩安装的tensorflow需要CUDA8.0以及cuDNN6.0，而服务器上的cuDNN为5.0.<br>解决方法如下：</p><ol><li>前往NVIDIA网站上的<a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">下载页面</a>下载cuDNN v6.0 for CUDA 8.0。注意下载需要注册NVIDIA Developer账号。</li><li>解压所下载的压缩文件。<br><code>tar -zxvf cudnn-8.0-linux-x64-v6.0.tgz</code></li><li>将<code>../cuda/lib64/</code>文件夹下的<code>libcudnn.so.6.0.21</code>和<code>libcudnn_static.a</code>这两个文件复制到<code>/usr/local/cuda/lib64/</code>文件夹下。</li><li><p>建立link</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/cuda/lib64/</span><br><span class="line">$ sudo ln -s libcudnn.so.6.0.21 libcudnn.so.6</span><br><span class="line">$ sudo ln -s libcudnn.so.6 libcudnn.so</span><br></pre></td></tr></table></figure><p>如果遇到报错link已存在，将其unlink，重新执行即可。</p></li><li>复制include文件夹下的cudnn.h到<code>/usr/local/cuda/include</code><br><code>$ sudo cp cudnn.h /usr/local/cuda/include/</code></li><li>在<code>.bashrc</code>文件中添加cuda路径<br><code>export LD_LIBRARY_PATH=/usr/local/cuda/lib64/</code></li><li>重新加载<code>.bashrc</code>文件<br><code>source ~/.bashrc</code></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tensorflow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何在Matlab中处理json文件</title>
      <link href="/2017/09/30/howto-handle-json-in-matlab/"/>
      <url>/2017/09/30/howto-handle-json-in-matlab/</url>
      
        <content type="html"><![CDATA[<p>本文使用<code>JSONLab</code>工具读取json文件。</p><h2 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h2><p><code>git clone https://github.com/fangq/jsonlab.git</code></p><h2 id="加入路径"><a href="#加入路径" class="headerlink" title="加入路径"></a>加入路径</h2><p>打开Matlab，输入<code>addpath(&#39;Path/to/jsonlab&#39;)</code></p><h2 id="测试是否可以使用"><a href="#测试是否可以使用" class="headerlink" title="测试是否可以使用"></a>测试是否可以使用</h2><p><code>help loadjson</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> json </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Linux中如何查看图片尺寸</title>
      <link href="/2017/09/29/howto-viewPictureSize/"/>
      <url>/2017/09/29/howto-viewPictureSize/</url>
      
        <content type="html"><![CDATA[<ol><li>安装<code>imagemagick</code><br><code>apt-get install imagemagick</code></li><li>使用idetify命令查询<br><code>identify xxx.jpg</code><br>输出 <code>xxx.jpg JPEG 500x750 500x750+0+0 8-bit DirectClass 57.8KB 0.000u 0:00.000</code></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Linux下如何删除大量文件</title>
      <link href="/2017/09/28/howto-delete/"/>
      <url>/2017/09/28/howto-delete/</url>
      
        <content type="html"><![CDATA[<p>在Linux下，直接删除一个包含大量文件的文件夹时会报错：<code>bash: /bin/rm: Argument list too long</code><br>此时可使用命令：<code>ls | xargs -n 10 rm -fr ls</code>来删除。<br>这个命令的意思是：输出所有的文件名(用空格分割)，xargs将ls的输出分组，每10个为一组(以空格为分隔符)作为rm -rf的参数，也就是说将所有文件名10个为一组，由rm -rf删除。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux下计算文件数目</title>
      <link href="/2017/09/28/countDocumentNUmbers/"/>
      <url>/2017/09/28/countDocumentNUmbers/</url>
      
        <content type="html"><![CDATA[<ul><li>统计当前文件下的文件个数（不包括子文件夹）<br><code>$ ls -l | grep &quot;^-&quot; | wc -l</code></li><li>统计当前目录下的文件个数（包括子文件夹）<br><code>$ ls -lR| grep &quot;^-&quot; | wc -l</code></li><li>查看目录下文件夹的个数（包括子文件夹）<br><code>$ ls -lR | grep &quot;^d&quot; | wc -l</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在多个屏幕之间快速切换鼠标（Mac）</title>
      <link href="/2017/09/21/switch-mouse/"/>
      <url>/2017/09/21/switch-mouse/</url>
      
        <content type="html"><![CDATA[<p>使用多个显示器的时候，常常会为找不到鼠标而发愁，今天找到一款简单好用的工具<a href="https://github.com/round/CatchMouse" target="_blank" rel="noopener">CatchMouse</a>。<br>程序界面如下<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0921/catchMouse.png" alt="imageCatchMouse"><br>使用快捷键即可迅速改变鼠标位置。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何刷新Finder</title>
      <link href="/2017/09/21/refresh-Finder/"/>
      <url>/2017/09/21/refresh-Finder/</url>
      
        <content type="html"><![CDATA[<p>在Windows系统中，文件管理器是自带刷新功能的，但是在MacOS中，Finder号称实时刷新，因此没有额外加入刷新功能。在使用时，常常会遇到Finder没有刷新的情况，尤其是在浏览服务器上的文件时，这时候就需要手动刷新。</p><ol><li>新建AppleScript，内容为<code>tell application &quot;Finder&quot; to tell front window to update every item</code></li><li>将文件保存为Application</li><li>按住‘Command’+‘Option’键，将保存好的<code>.app</code>文件拖到Finder的工具栏</li><li>找到保存好的app文件，按’Command’+’i’键查看文件简介，复制一张图片，粘贴到文件简介左上角的文件图标处，即可改变文件图标。</li><li>在Finder中点击对应图标即可刷新Finder</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Finder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux服务器中后台运行程序</title>
      <link href="/2017/09/21/linux-nohup/"/>
      <url>/2017/09/21/linux-nohup/</url>
      
        <content type="html"><![CDATA[<p>在使用ssh连接到Linux服务器时，当ssh连接断开，服务器会kill所有相关进程，为了使得断开连接后程序能够继续运行，可以采用以下几种方式：</p><h1 id="nohup命令"><a href="#nohup命令" class="headerlink" title="nohup命令"></a>nohup命令</h1><p>在指令前加入<code>nohup</code>，例如<code>nohup du -s --max-depth=1 &gt;&gt;du.txt</code>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux中查看文件夹大小</title>
      <link href="/2017/09/21/linux-du/"/>
      <url>/2017/09/21/linux-du/</url>
      
        <content type="html"><![CDATA[<p>在linux中查看文件夹大小时使用<code>du</code>指令。<br>cd到文件夹后，常用指令如下：<code>du -h --max-depth=1 xxx</code><br>其中max-depth表示列出的子文件夹目录深度。</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多闻阙疑————目标检测论文</title>
      <link href="/2017/09/21/detection-question/"/>
      <url>/2017/09/21/detection-question/</url>
      
        <content type="html"><![CDATA[<h3 id="在RCNN中，为什么不使用CNN的最后一层softmax进行分类，而是要额外使用SVM"><a href="#在RCNN中，为什么不使用CNN的最后一层softmax进行分类，而是要额外使用SVM" class="headerlink" title="在RCNN中，为什么不使用CNN的最后一层softmax进行分类，而是要额外使用SVM"></a>在RCNN中，为什么不使用CNN的最后一层softmax进行分类，而是要额外使用SVM</h3><ul><li>这个是因为svm训练和cnn训练过程的正负样本定义方式各有不同，导致最后采用CNN softmax输出比采用svm精度还低。事情是这样的，cnn在训练的时候，对训练数据做了比较宽松的标注，比如一个bounding box可能只包含物体的一部分，那么我也把它标注为正样本，用于训练cnn；采用这个方法的主要原因在于因为CNN容易过拟合，所以需要大量的训练数据，所以在CNN训练阶段我们是对Bounding box的位置限制条件限制的比较松(IOU只要大于0.5都被标注为正样本了)；然而svm训练的时候，因为svm适用于少样本训练，所以对于训练样本数据的IOU要求比较严格，我们只有当bounding box把整个物体都包含进去了，我们才把它标注为物体类别，然后训练svm。<h3 id="在faster-RCNN中，对于某个anchor点，是否预定义多少个bbox的尺寸，在结果中只会出现这么多bbox的尺寸（比如scale-3，aspect-ratio-3，k-3x3，是否意味着在图片中标注bbox时只会有这9种尺寸？）"><a href="#在faster-RCNN中，对于某个anchor点，是否预定义多少个bbox的尺寸，在结果中只会出现这么多bbox的尺寸（比如scale-3，aspect-ratio-3，k-3x3，是否意味着在图片中标注bbox时只会有这9种尺寸？）" class="headerlink" title="在faster RCNN中，对于某个anchor点，是否预定义多少个bbox的尺寸，在结果中只会出现这么多bbox的尺寸（比如scale=3，aspect ratio=3，k=3x3，是否意味着在图片中标注bbox时只会有这9种尺寸？）"></a>在faster RCNN中，对于某个anchor点，是否预定义多少个bbox的尺寸，在结果中只会出现这么多bbox的尺寸（比如scale=3，aspect ratio=3，k=3x3，是否意味着在图片中标注bbox时只会有这9种尺寸？）</h3></li><li>在region proposal的时候只会出现这些大小的框，但是在最后输出结果的时候由于有bounding-box regressor的存在，会框得到修正，产生各种不同尺寸的输出。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> RCNN </tag>
            
            <tag> Fast RCNN </tag>
            
            <tag> Faster RCNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在服务器上安装Deep Cut</title>
      <link href="/2017/09/19/howtoinstalldeepcut/"/>
      <url>/2017/09/19/howtoinstalldeepcut/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/eldar/deepcut" target="_blank" rel="noopener">Deep Cut</a>用于多人姿势辨识。</p><h1 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h1><p>首先确保服务器上安装有caffe和matlab，并且已安装有<a href="https://github.com/eldar/deepcut" target="_blank" rel="noopener">Deep Cut</a>主页上要求的软件环境：</p><ul><li>HDF5 1.8</li><li>CMake</li><li>C++ 11</li><li>CUDA &gt;=7.5</li><li><a href="http://caffe.berkeleyvision.org/installation.html" target="_blank" rel="noopener">Caffe building instructions</a></li><li><a href="https://user.gurobi.com/download/gurobi-optimizer" target="_blank" rel="noopener">Gurobi optimizer 6.0.x</a></li></ul><h1 id="安装指南"><a href="#安装指南" class="headerlink" title="安装指南"></a>安装指南</h1><ol><li>git clone<br><code>git clone https://github.com/eldar/deepcut --recursive</code></li><li>编译Caffe与Matlab接口<br>这一步需要修改external/caffe文件夹下的<code>Makefile.config</code>文件：</li></ol><ul><li>添加语句以使用C++11编译：<code>CXXFLAGS += -std=c++11</code></li><li>更改matlab文件位置：<code>MATLAB_DIR := /usr/local/MATLAB/MATLAB_Production_Server/R2015a</code></li></ul><ol start="3"><li><p>编译liblinear</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> external/liblinear-1.94/matlab</span><br><span class="line">$ CC=gcc CXX=g++ MATLABDIR=/usr/lib/matlab-8.6/ make</span><br><span class="line"><span class="comment">#修改代码中的Matlab路径</span></span><br></pre></td></tr></table></figure></li><li><p>编译求解器<br>这一步比较复杂，需要安装求解器<a href="https://user.gurobi.com/" target="_blank" rel="noopener">gurobi</a>，gurobib不是开源软件，使用前要申请得到一个license。另外需要注意的是gurobi的最新版本中不支持Academic许可证在Docker container中运行，因此选择6.0.5版本。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://packages.gurobi.com/6.0/gurobi6.0.5_linux64.tar.gz</span><br><span class="line">$ tar -xvf gurobi6.0.5_linux64.tar.gz</span><br></pre></td></tr></table></figure></li></ol><p>下面参照<a href="http://abelsiqueira.github.io/blog/installing-gurobi-7-on-linux/" target="_blank" rel="noopener">这个博客</a>中的步骤：</p><ul><li>编辑<code>.bashrc</code>文件。<br><code>vim $HOME/.bashrc</code></li><li><p>在文件中添加以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GUROBI_HOME=<span class="string">"/FULL/PATH/gurobi605/linux64"</span> <span class="comment">#这里改成gurobi所在的路径，在终端中使用pwd命令可查看当前路径</span></span><br><span class="line">$ <span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;GUROBI_HOME&#125;</span>/bin"</span></span><br><span class="line">$ <span class="built_in">export</span> LD_LIBRARY_PATH=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>:<span class="variable">$&#123;GUROBI_HOME&#125;</span>/lib"</span></span><br></pre></td></tr></table></figure></li><li><p>完成修改后在终端中输入<code>source $HOME/.bashrc</code>以更新设置。</p></li><li>在terminal中输入：<code>grbgetkey</code>，然后输入申请到的key，联网完成授权，保存<code>gurobi.lic</code>文件至合适的位置。</li><li>编辑<code>.bashrc</code>文件，输入<code>export GRB_LICENSE_FILE=&quot;$HOME/gurobi.lic&quot;</code>,将这里的值修改为保存<code>gurobi.lic</code>文件的位置，完 成修改后在终端中输入<code>source $HOME/.bashrc</code>以更新设置。</li><li>在终端中输入<code>gurobi.sh</code>，如果报错，可以尝试将<code>gurobi.lic</code>文件复制一份到’/root’文件夹下</li><li>在终端中输入：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> external/solver</span><br><span class="line">$ cmake . -DGUROBI_ROOT_DIR=/path/to/gurobi605/linux64 -DGUROBI_VERSION=60 <span class="comment">#这里的l路径改为服务器中gurobi文件夹所在路径</span></span><br><span class="line">$ make solver-callback</span><br></pre></td></tr></table></figure></li></ul><p>这一步可能报错找不到glut library，安装glut即可，如果无法安装glut，可无视这一错误。<br>到这里安装已经基本完成了。</p><h1 id="下载模型"><a href="#下载模型" class="headerlink" title="下载模型"></a>下载模型</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd data</span><br><span class="line">$ ./download_models.sh</span><br></pre></td></tr></table></figure><h1 id="运行Demo"><a href="#运行Demo" class="headerlink" title="运行Demo"></a>运行Demo</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd &lt;root_dir&gt;</span><br><span class="line">$ ./start_matlab_console.sh</span><br><span class="line">% in MATLAB</span><br><span class="line">&gt;&gt; demo_multiperson</span><br></pre></td></tr></table></figure><p>这一步运行出错的，可以直接在命令行中输入<code>matlab</code>打开matlab，然后在matlab中运行<code>demo_multiperson</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> Deep Cut </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python发送邮件</title>
      <link href="/2017/09/13/snedmeanemail/"/>
      <url>/2017/09/13/snedmeanemail/</url>
      
        <content type="html"><![CDATA[<p>最近在服务器上跑CNN，要跑好长时间。没耐心盯着terminal，遂使用<code>&gt;&gt;</code>重定向输出到一个文件里。为了在程序运行完成收到提醒，在程序里添加发送邮件的功能，这样一来在家也能debug了XD。<br>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMail</span><span class="params">(msg,subject=<span class="string">'Duang'</span>)</span>:</span></span><br><span class="line">    smtp_server = <span class="string">"smtp-mail.outlook.com"</span> <span class="comment">#发件人邮箱账号</span></span><br><span class="line">    from_addr = <span class="string">"xxx@outlook.com"</span></span><br><span class="line">    password = <span class="string">"xxx"</span></span><br><span class="line">    sender = <span class="string">"csyguo"</span></span><br><span class="line">    to_addr = <span class="string">'xxx@qq.com'</span></span><br><span class="line">    message = MIMEText(msg, <span class="string">'plain'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">    message[<span class="string">'Subject'</span>] = subject</span><br><span class="line">    message[<span class="string">'From'</span>] = <span class="string">'severReport@outlook.com'</span></span><br><span class="line">    message[<span class="string">'To'</span>] = <span class="string">'xxx@qq.com'</span></span><br><span class="line">    server = smtplib.SMTP(smtp_server, <span class="number">587</span>) <span class="comment">#outlook的SMTP端口</span></span><br><span class="line">    <span class="comment"># server.set_debuglevel(1)</span></span><br><span class="line">    <span class="comment"># server.ehlo()</span></span><br><span class="line">    server.starttls() <span class="comment">#在使用163邮箱时去掉这一行</span></span><br><span class="line">    server.login(from_addr, password)</span><br><span class="line">    server.sendmail(from_addr, [to_addr], message.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'successfully send an email to '</span> + to_addr</span><br></pre></td></tr></table></figure><p>在测试的时候使用163邮箱遇到了554错误，解决方法如下：</p><ul><li>邮件标题不要写成‘test’</li><li>sender、receiver需要与message[‘From’] 、message[‘To’] 一致</li><li>163邮箱端口为25</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改pycharm中的External-Library</title>
      <link href="/2017/09/11/pycharm-changelibrary/"/>
      <url>/2017/09/11/pycharm-changelibrary/</url>
      
        <content type="html"><![CDATA[<p>Project-&gt;Project interpreter<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0911/pycharm.png" alt="pic"></p>]]></content>
      
      
      
        <tags>
            
            <tag> pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sklearn之分类器的使用</title>
      <link href="/2017/09/11/sklearn/"/>
      <url>/2017/09/11/sklearn/</url>
      
        <content type="html"><![CDATA[<p>sklearn是一个机器学习的开源库，简单好用。<br>在sklearn中，所有的分类器都可以秉持“三步走”方法：</p><ul><li>设置分类器</li><li>fit训练数据</li><li>使用测试集对训练好对模型进行评估</li></ul><h1 id="KNN"><a href="#KNN" class="headerlink" title="KNN"></a><a href="http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier" target="_blank" rel="noopener">KNN</a></h1><p>sklearn.neighbors.KNeighborsClassifier<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line">neigh=KNeighborsClassifier(n_neighbors=i)</span><br><span class="line">neigh.fit(X_train,y_train)</span><br><span class="line">print &apos;n=&apos;,i,&apos;\tscore=&apos;,neigh.score(X_test,y_test)</span><br></pre></td></tr></table></figure></p><h1 id="线性SVM"><a href="#线性SVM" class="headerlink" title="线性SVM"></a><a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC" target="_blank" rel="noopener">线性SVM</a></h1><p>sklearn.svm.LinearSVC<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">clf = LinearSVC(random_state=0)</span><br><span class="line">clf.fit(X_train,y_train)</span><br><span class="line">print clf.score(X_test,y_test)</span><br></pre></td></tr></table></figure></p><h1 id="Softmax"><a href="#Softmax" class="headerlink" title="Softmax"></a><a href="http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html" target="_blank" rel="noopener">Softmax</a></h1><p>softmax和LogisticRegression分别适用于多分类和二分类问题，sklearn将这两者放在一起，只需设置相应的参数即可选择分类器与对应的优化算法，需要注意的是loss function是否收敛。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">clf=LogisticRegression(multi_class=&apos;ovr&apos;,solver=&apos;sag&apos;)</span><br><span class="line">clf.fit(X_train,y_train)</span><br><span class="line">r=clf.score(X_test,y_test)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> sklearn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu上安装openAI Gym</title>
      <link href="/2017/09/08/install-gym/"/>
      <url>/2017/09/08/install-gym/</url>
      
        <content type="html"><![CDATA[<p>服务器上的Docker Container使用的是Ubuntu系统，在安装openAI Gym时遇到了不少的问题，想要安装成功，需要以下步骤：</p><ol><li>更新apt-get<br><code>sudo apt-get update</code></li><li>更新pip<br><code>pip install -U pip</code></li><li>安装Cmake<br><code>sudo apt-get install cmake</code></li><li>安装git<br><code>sudo apt-get install git</code></li><li>安装依赖包<br><code>sudo apt-get install swig zlib1g-dev libboost1.54-dev</code></li><li>安装Gym<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/openai/gym</span><br><span class="line">cd gym</span><br><span class="line">pip install -e .[all]</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Gym </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python及numpy笔记（一）</title>
      <link href="/2017/08/31/python-01/"/>
      <url>/2017/08/31/python-01/</url>
      
        <content type="html"><![CDATA[<h2 id="enumerate-函数"><a href="#enumerate-函数" class="headerlink" title="enumerate()函数"></a>enumerate()函数</h2><ul><li>enumerate是python内置的函数，用于循环迭代</li><li>返回值为一个元组</li><li>示例：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line">for index, text in enumerate(list，start=0):</span><br><span class="line">    print index, text</span><br></pre></td></tr></table></figure></li></ul><p>运行结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 a</span><br><span class="line">1 b</span><br><span class="line">2 c</span><br></pre></td></tr></table></figure></p><ul><li>enumerate函数等价于如下函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def enumerate(sequence, start=0):</span><br><span class="line">    n = start</span><br><span class="line">    for elem in sequence:</span><br><span class="line">        yield n, elem</span><br><span class="line">        n += 1</span><br></pre></td></tr></table></figure></li></ul><h2 id="yield关键字"><a href="#yield关键字" class="headerlink" title="yield关键字"></a>yield关键字</h2><ul><li>yield类似于return，只是yield返回的是一个生成器</li><li>第一次迭代中函数会执行到yield 关键字，然后返回 yield 后的值作为第一次迭代的返回值. 此后，每次执行这个函数都会从上一次中断的yield处继续执行，然后进入循环，遇到yield返回此次迭代值</li><li>即函数只有在每次被调用迭代器时会执行循环</li><li>只言片语很难讲清楚yield的准确作用，更详细的解释可以点击<a href="https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do" target="_blank" rel="noopener">这里</a></li><li><p>给出示例如下，执行程序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ls = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line"></span><br><span class="line">def enem(ls, start=0):</span><br><span class="line">    n = start</span><br><span class="line">    for i in ls:</span><br><span class="line">        print &quot;this is &quot;,i,&quot;in yield&quot;</span><br><span class="line">        yield n,i</span><br><span class="line">        n += 1</span><br><span class="line">        print &quot;n=&quot;,n</span><br><span class="line">index=0</span><br><span class="line">for n,elem in enem(ls):</span><br><span class="line">    print &quot;this is &quot;,index,&quot;times in for loop&quot;</span><br><span class="line">    print n,elem</span><br><span class="line">    index+=1</span><br></pre></td></tr></table></figure></li><li><p>输出值为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">this is  a in yield</span><br><span class="line">this is  0 times in for loop</span><br><span class="line">0 a</span><br><span class="line">n= 1</span><br><span class="line">this is  b in yield</span><br><span class="line">this is  1 times in for loop</span><br><span class="line">1 b</span><br><span class="line">n= 2</span><br><span class="line">this is  c in yield</span><br><span class="line">this is  2 times in for loop</span><br><span class="line">2 c</span><br><span class="line">n= 3</span><br></pre></td></tr></table></figure></li></ul><h2 id="numpy-flatnonzero-函数"><a href="#numpy-flatnonzero-函数" class="headerlink" title="numpy.flatnonzero()函数"></a>numpy.flatnonzero()函数</h2><ul><li>输入一个数组，将其展开成一维向量后输出对应的非0值的下标</li></ul><h2 id="numpy-random-choice-a-size-None-replace-True-p-None"><a href="#numpy-random-choice-a-size-None-replace-True-p-None" class="headerlink" title="numpy.random.choice(a, size=None, replace=True, p=None)"></a>numpy.random.choice(a, size=None, replace=True, p=None)</h2><ul><li>输入参数：<ul><li>a：1维向量或者整数。如果a为整数，随机样本与<code>np.arange(a)</code>相同</li><li>size：输出的元素个数</li><li>replace：bool值，<code>replace=False</code>时表示样本不可重复被选取</li><li>p：对应a中元素被选取的概率，可选，默认为平均分布</li></ul></li></ul><h2 id="numpy的broadcast"><a href="#numpy的broadcast" class="headerlink" title="numpy的broadcast"></a>numpy的broadcast</h2><p><em>numpy中的矩阵运算会具有broadcast性质，决定了在运算时对于不同shape的矩阵会采取不同的操作</em></p><blockquote><p>The term broadcasting describes how numpy treats arrays with different shapes during arithmetic operations. Subject to certain constraints, the smaller array is “broadcast” across the larger array so that they have compatible shapes. Broadcasting provides a means of vectorizing array operations so that looping occurs in C instead of Python. It does this without making needless copies of data and usually leads to efficient algorithm implementations. There are, however, cases where broadcasting is a bad idea because it leads to inefficient use of memory that slows computation.</p></blockquote><p>例如：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">2.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a * b</span><br><span class="line">array([ <span class="number">2.</span>,  <span class="number">4.</span>,  <span class="number">6.</span>])</span><br></pre></td></tr></table></figure></p><p>numpy会通过broadcast方式对于不符合shape的矩阵自动将其扩展后再进行运算，这一性质在许多情况下可以使得代码更加简洁，但是也常常容易使人感到困惑。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用matplotlib对分类数据集样本可视化</title>
      <link href="/2017/08/31/python-02/"/>
      <url>/2017/08/31/python-02/</url>
      
        <content type="html"><![CDATA[<p>在训练分类器之前，我们常常希望能够对数据集有一个直观的感受，比如像这样：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0830/A.jpg" alt="imgA"><br>今天做CS231n作业一的时候，发现作业里有一段代码用matplotlib实现了这一功能，代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">classes = [<span class="string">'plane'</span>, <span class="string">'car'</span>, <span class="string">'bird'</span>, <span class="string">'cat'</span>, <span class="string">'deer'</span>, <span class="string">'dog'</span>, <span class="string">'frog'</span>, <span class="string">'horse'</span>, <span class="string">'ship'</span>, <span class="string">'truck'</span>]</span><br><span class="line">num_classes = len(classes)</span><br><span class="line">samples_per_class = <span class="number">7</span></span><br><span class="line"><span class="keyword">for</span> y, cls <span class="keyword">in</span> enumerate(classes):</span><br><span class="line">    idxs = np.flatnonzero(y_train == y)</span><br><span class="line">    idxs = np.random.choice(idxs, samples_per_class, replace=<span class="keyword">False</span>)</span><br><span class="line">    <span class="keyword">for</span> i, idx <span class="keyword">in</span> enumerate(idxs):</span><br><span class="line">        plt_idx = i * num_classes + y + <span class="number">1</span></span><br><span class="line">        plt.subplot(samples_per_class, num_classes, plt_idx)</span><br><span class="line">        plt.imshow(X_train[idx].astype(<span class="string">'uint8'</span>))</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            plt.title(cls)</span><br><span class="line">plt.savefig(yourpath)</span><br></pre></td></tr></table></figure></p><p>这段程序中<code>samples_per_class</code>为每个类别图片采样的张数，随后使用了两次枚举，外层的枚举用来从每个类里随机抽取用于展示的7张图片，内层的枚举用来将挑选出来的图片作为subplot放在matplotlib提供的图框中，最后使用<code>plt.savefig(yourpath)</code>保存即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> marplotlib </tag>
            
            <tag> 可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Mac终端中使用SS代理</title>
      <link href="/2017/08/30/tremina-ss/"/>
      <url>/2017/08/30/tremina-ss/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/shadowsocks" target="_blank" rel="noopener">SS</a>是当前最好用的科学上网工具之一，但是在terminal中无法直接使用ss代理，需要使用额外的工具来实现这一功能。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在开始之前，请确保：</p><ul><li>拥有一个可以正常使用的SS</li><li>Mac上已安装有<a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a></li></ul><h2 id="安装privoxy"><a href="#安装privoxy" class="headerlink" title="安装privoxy"></a>安装privoxy</h2><p>使用以下命令安装：<br><code>brew install privoxy</code></p><h2 id="privoxy配置"><a href="#privoxy配置" class="headerlink" title="privoxy配置"></a>privoxy配置</h2><p>打开配置文件，文件路径为<code>/usr/local/etc/privoxy/config</code><br>在配置文件底部加入以下语句：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen-address 0.0.0.0:8118</span><br><span class="line">forward-socks5 / localhost:1080 .</span><br></pre></td></tr></table></figure></p><h2 id="启动privoxy"><a href="#启动privoxy" class="headerlink" title="启动privoxy"></a>启动privoxy</h2><p>输入以下语句：<br><code>sudo /usr/local/sbin/privoxy /usr/local/etc/privoxy/config</code><br>查看是否启动成功：<br><code>netstat -na | grep 8118</code><br>看到如下消息说明启动成功：<br><code>tcp4 0   0  *.8118       *.*     LISTEN</code></p><h2 id="使用privoxy"><a href="#使用privoxy" class="headerlink" title="使用privoxy"></a>使用privoxy</h2><p>在命令行终端中输入如下命令后，该终端即可走代理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">export https_proxy=&apos;http://localhost:8118&apos;</span><br></pre></td></tr></table></figure></p><p>这时输入<code>curl ip.gs</code>会显示代理服务器的信息<br>关闭终端代理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unset http_proxy</span><br><span class="line">unset https_proxy</span><br></pre></td></tr></table></figure></p><h2 id="配置bash文件"><a href="#配置bash文件" class="headerlink" title="配置bash文件"></a>配置bash文件</h2><p>经过上面几步，已经可以在终端使用SS代理，每次使用都需要输入一大串命令。可以在 ~/.bash_profile 里加入函数，便于使用。</p><ul><li><p>macOS系统中默认没有<code>.bash_profile</code>文件，需要手动创建文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/</span><br><span class="line">touch .bash_profile</span><br></pre></td></tr></table></figure></li><li><p>编辑<code>.bash_profile</code>文件：<code>open -e .bash_profile</code></p></li><li><p>在<code>.bash_profile</code>里写入函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function proxy_off()&#123;</span><br><span class="line">    unset http_proxy</span><br><span class="line">    unset https_proxy</span><br><span class="line">    echo -e &quot;已关闭代理&quot;</span><br><span class="line">&#125;</span><br><span class="line">function proxy_on() &#123;</span><br><span class="line">    export http_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">    export https_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">    echo -e &quot;已开启代理&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使配置立即生效：<code>source  ~/.bash_profile</code></p><h2 id="调用bash函数"><a href="#调用bash函数" class="headerlink" title="调用bash函数"></a>调用bash函数</h2><p>配置已经全部完成，在终端使用<code>proxy_on</code>/<code>proxy_off</code>指令即可打开/关闭代理</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何查找python及pip的安装位置</title>
      <link href="/2017/08/29/python-00/"/>
      <url>/2017/08/29/python-00/</url>
      
        <content type="html"><![CDATA[<p>在Linux和macOS系统中，python是系统自带的，不需要另外安装。但是出于安全性考虑，系统往往不允许修改自带的python文件，解决这一问题的方法是使用类似于Homebrew（Linuxbrew）的工具，或者干脆使用虚拟环境virtualenv。而这带来另外的问题，即python版本过多，例如使用Homebrew安装python后，在命令行使用<code>python</code>、 <code>python2</code>、 <code>python3</code>执行的是三个不同位置的python，手动查找对应的python文件位置是一件令人头疼的事情。</p><h1 id="获取python解释器的文件位置"><a href="#获取python解释器的文件位置" class="headerlink" title="获取python解释器的文件位置"></a>获取python解释器的文件位置</h1><ul><li>打开终端，输入<code>python</code>或 <code>python2</code>或<code>python3</code>或者其他</li><li>依次输入如下语句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; path = sys.executable</span><br><span class="line">&gt;&gt;&gt; print path</span><br></pre></td></tr></table></figure></li></ul><p>此时python解释器的位置会被输出到终端</p><h1 id="获取pip下的site-package文件夹位置"><a href="#获取pip下的site-package文件夹位置" class="headerlink" title="获取pip下的site-package文件夹位置"></a>获取pip下的site-package文件夹位置</h1><ul><li>打开终端，输入<code>python</code>或 <code>python2</code>或<code>python3</code>或者其他</li><li>依次输入以下语句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import site</span><br><span class="line">&gt;&gt;&gt; site.getsitepackages()</span><br></pre></td></tr></table></figure></li></ul><p>对应版本的site-package文件夹位置被输出到终端</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>此外，python可通过<code>import os</code>来调用系统指令</p><h2 id="获取当前文件路径"><a href="#获取当前文件路径" class="headerlink" title="获取当前文件路径"></a>获取当前文件路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">path=os.getcwd()</span><br><span class="line">print path</span><br></pre></td></tr></table></figure><h2 id="在python-shell中清除屏幕"><a href="#在python-shell中清除屏幕" class="headerlink" title="在python shell中清除屏幕"></a>在<code>python shell</code>中清除屏幕</h2><ul><li>在Mac操作系统中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.system(&apos;clear&apos;)</span><br></pre></td></tr></table></figure></li></ul><p>shell会被清空，第一行留下一个返回值0</p><ul><li>在Windows操作系统中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.system(&apos;clr&apos;)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Tips </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlow常用函数（二）</title>
      <link href="/2017/08/29/tf-function-001/"/>
      <url>/2017/08/29/tf-function-001/</url>
      
        <content type="html"><![CDATA[<h2 id="tf-nn-dropout"><a href="#tf-nn-dropout" class="headerlink" title="tf.nn.dropout"></a>tf.nn.dropout</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dropout(</span><br><span class="line">    x,</span><br><span class="line">    keep_prob,</span><br><span class="line">    noise_shape=None,</span><br><span class="line">    seed=None,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.nn.dropout</li><li>输入参数：<ul><li>x:一个tensor量，通常为一个全连接层</li><li>keep_prob：一个tensor标量，表示神经元保持活性的概率</li><li>noise_shape：一个1维的int32 tensor，作用没搞明白</li></ul></li><li>返回值：与x的shape相同的tensor</li><li>Dropout 的作用是使部分神经元失去活性，不参与前馈和反向传播，使用dropout后计算梯度时需要根据神经元失活的比例对原梯度公式进行比例变换，在tf.nn.dropout中，比例变换已在内部完成，无需操心。</li></ul><h2 id="tf-nn-softmax-cross-entropy-with-logits"><a href="#tf-nn-softmax-cross-entropy-with-logits" class="headerlink" title="tf.nn.softmax_cross_entropy_with_logits"></a>tf.nn.softmax_cross_entropy_with_logits</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">softmax_cross_entropy_with_logits(</span><br><span class="line">    _sentinel=None,</span><br><span class="line">    labels=None,</span><br><span class="line">    logits=None,</span><br><span class="line">    dim=-1,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.nn.softmax_cross_entropy_with_logits</li><li>输入参数：<ul><li>_sentinel：内部参数，不要使用</li><li>labels：实际的label</li><li>logits：神经网络的最后一层</li><li>logits和labels的shape和dtype要相同，例如<code>[batch_size, num_classes]</code>,<code>dtype=tf.float32</code></li></ul></li><li>返回值：一维的tensor，长度为batch_size</li><li>函数内包含对数计算和corss entropy的计算，通常对返回值使用<code>tf.reduce_mean()</code>函数之后可以得到loss</li></ul><h2 id="tf-equal"><a href="#tf-equal" class="headerlink" title="tf.equal"></a>tf.equal</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">equal(</span><br><span class="line">    x,</span><br><span class="line">    y,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.equal</li><li>输入参数：<ul><li>x：tensor</li><li>y：tensor</li></ul></li><li>返回值：bool类型的tensor</li></ul><h2 id="tf-train-AdamOptimizer-minimize"><a href="#tf-train-AdamOptimizer-minimize" class="headerlink" title="tf.train.AdamOptimizer.minimize"></a>tf.train.AdamOptimizer.minimize</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">minimize(</span><br><span class="line">    loss,</span><br><span class="line">    global_step=None,</span><br><span class="line">    var_list=None,</span><br><span class="line">    gate_gradients=GATE_OP,</span><br><span class="line">    aggregation_method=None,</span><br><span class="line">    colocate_gradients_with_ops=False,</span><br><span class="line">    name=None,</span><br><span class="line">    grad_loss=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>AdamOptimizer是<code>tf.train</code>下的一个类，继承 Optimizer类，可在创建实例时初始化设置learning rate，例如<br><code>train_step = tf.train.AdamOptimizer(1e-4).minimize(cross_entropy)</code></li><li>Adam是一种最优化方法，结合了Momentum和RMSProp算法，通常被认为鲁棒性较好</li></ul><h2 id="tf-argmax"><a href="#tf-argmax" class="headerlink" title="tf.argmax"></a>tf.argmax</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">argmax(</span><br><span class="line">    input,</span><br><span class="line">    axis=None,</span><br><span class="line">    name=None,</span><br><span class="line">    dimension=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.argmax</li><li>输入参数：<ul><li>input：一个tensor量</li><li>axis：运算的方向，对于一维向量<code>axis=0</code></li></ul></li><li>返回值：沿axis方向最大值的下标，类型是int64的tensor</li></ul><h2 id="tf-cast"><a href="#tf-cast" class="headerlink" title="tf.cast"></a>tf.cast</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cast(</span><br><span class="line">    x,</span><br><span class="line">    dtype,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.cast</li><li>函数作用：将x转变为dtype所规定的类型</li><li>返回值：tensor，与x的shape相同</li></ul><h2 id="tf-Tensor-eval"><a href="#tf-Tensor-eval" class="headerlink" title="tf.Tensor.eval"></a>tf.Tensor.eval</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eval(</span><br><span class="line">    feed_dict=None,</span><br><span class="line">    session=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>设有一个tensor <code>t</code>，则以下两条语句等价：<br><code>t.eval()</code><br><code>tf.get_default_session().run(t)</code></li><li><p>eval()和sess()的区别主要有两点：</p><ul><li><p>eval一条语句获取一个tensor值，sess可以同时获取多个tensor值，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    t = tf.constant(<span class="number">42.0</span>)</span><br><span class="line">    u = tf.constant(<span class="number">37.0</span>)</span><br><span class="line">    tu = tf.mul(t, u)</span><br><span class="line">    ut = tf.mul(u, t)</span><br><span class="line"><span class="keyword">with</span> sess.as_default():</span><br><span class="line">       tu.eval()  <span class="comment"># runs one step</span></span><br><span class="line">       ut.eval()  <span class="comment"># runs one step</span></span><br><span class="line">       sess.run([tu, ut])  <span class="comment"># evaluates both tensors in a single step</span></span><br></pre></td></tr></table></figure></li><li><p>执行eval时必须有明确的session，可以通过以下两种方式实现：</p><ul><li>在参数中指定<code>session=sess</code></li><li>使用<code>with</code>关键词<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">      sess.run(tf.global_variables_initializer())</span><br><span class="line">      train_accuracy = accuracy.eval(feed_dict=&#123;x: batch[<span class="number">0</span>], y_: batch[<span class="number">1</span>], keep_prob: <span class="number">1.0</span>&#125;)</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlow常用函数（一）</title>
      <link href="/2017/08/28/tf-function-00/"/>
      <url>/2017/08/28/tf-function-00/</url>
      
        <content type="html"><![CDATA[<h2 id="tf-truncated-normal（截断正态分布函数）"><a href="#tf-truncated-normal（截断正态分布函数）" class="headerlink" title="tf.truncated_normal（截断正态分布函数）"></a>tf.truncated_normal（截断正态分布函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">truncated_normal(</span><br><span class="line">    shape,</span><br><span class="line">    mean=0.0,</span><br><span class="line">    stddev=1.0,</span><br><span class="line">    dtype=tf.float32,</span><br><span class="line">    seed=None,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.truncated_normal</li><li>返回值：具有指定形态随机数组的tensor</li><li>输入参数：<ul><li>shape：生成的随机数组维度</li><li>stddev：正态分布的标准差</li></ul></li><li>函数按正态分布取随机数，当所取得的随机数在两倍标准差范围之外时，将其舍弃并重新取值。</li></ul><h2 id="tf-nn-conv2d（卷积）"><a href="#tf-nn-conv2d（卷积）" class="headerlink" title="tf.nn.conv2d（卷积）"></a>tf.nn.conv2d（卷积）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">conv2d(</span><br><span class="line">    input,</span><br><span class="line">    filter,</span><br><span class="line">    strides,</span><br><span class="line">    padding,</span><br><span class="line">    use_cudnn_on_gpu=True,</span><br><span class="line">    data_format=&apos;NHWC&apos;,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.nn.conv2d</li><li>返回值：具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，即常说的feature map。</li><li>输入参数：<ul><li>input：输入层，是具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，其中<code>batch</code>表示输入图像的数量，<code>in_height</code>表示图像高度，<code>in_width</code>表示图像宽度，<code>in_channels</code>表示图像通道数</li><li>filter：滤波器（又称卷积核）的参数，同样是具有4个维度的tensor，<code>[filter_height, filter_width, in_channels, out_channels]</code>，其中 <code>in_channels</code>与<code>input</code>中的<code>in_channels</code>相同，<code>out_channels</code>为输出通道数，也是滤波器的个数。</li><li>strides： 卷积时的步长，一维向量，长度为4，4个元素分别对应<code>input</code>中的4个维度</li><li>padding：值只能是‘SAME’或‘VALTD’，决定了卷积时的padding方式</li><li>use_cudnn_on_gpu：可选参数，默认值为True，决定了是否使用GPU上的CUDNN，默认值为True</li><li>data_format：可选参数，默认为’NHWC’，决定了输入输出层中4个维度的排列顺序。可选值为‘NCHW’</li><li>name：可选参数，默认值为None</li></ul></li><li>这是tf中一个核心的函数，用于卷积操作。</li></ul><h2 id="tf-nn-max-pool（最大池化函数，或称采样函数）"><a href="#tf-nn-max-pool（最大池化函数，或称采样函数）" class="headerlink" title="tf.nn.max_pool（最大池化函数，或称采样函数）"></a>tf.nn.max_pool（最大池化函数，或称采样函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">max_pool(</span><br><span class="line">    value,</span><br><span class="line">    ksize,</span><br><span class="line">    strides,</span><br><span class="line">    padding,</span><br><span class="line">    data_format=&apos;NHWC&apos;,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.nn.max_pool</li><li>返回值：具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，即常说的feature map。</li><li>输入参数：<ul><li>value：输入层，是具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，其中<code>batch</code>表示输入图像的数量，<code>in_height</code>表示图像高度，<code>in_width</code>表示图像宽度，<code>in_channels</code>表示图像通道数</li><li>ksize：池化窗口的大小，为一个长度为4的一维向量，一般是[1, height, width, 1]，因为我们不想在batch和channels上做池化，所以这两个维度设为1</li><li>strides：步长，长度为4的一维向量，与卷积类似</li><li>padding：与卷积类似，值只能是‘SAME’或‘VALTD’</li><li>data_format：可选参数，默认为’NHWC’，决定了输入输出层中4个维度的排列顺序。可选值为‘NCHW’</li><li><ul><li>name：可选参数，默认值为None</li></ul></li></ul></li><li>这是最大池化函数，用在卷积操作之后，通过最大值采样降低feature map的维度。</li></ul><h2 id="tf-nn-relu（ReLU激活函数）"><a href="#tf-nn-relu（ReLU激活函数）" class="headerlink" title="tf.nn.relu（ReLU激活函数）"></a>tf.nn.relu（ReLU激活函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">relu(</span><br><span class="line">    features,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>函数名称：tf.nn.relu</li><li>返回值：<code>max(features, 0)</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Github上搭建博客</title>
      <link href="/2017/08/23/hexoGithubTutorial/"/>
      <url>/2017/08/23/hexoGithubTutorial/</url>
      
        <content type="html"><![CDATA[<p><a href="https://pages.github.com/" target="_blank" rel="noopener">Github Pages</a>是一个静态站点托管服务，用户可以用它来搭建便捷、稳定的个人站点。</p><h1 id="Github-Pages的设置"><a href="#Github-Pages的设置" class="headerlink" title="Github Pages的设置"></a>Github Pages的设置</h1><h2 id="申请Github账号"><a href="#申请Github账号" class="headerlink" title="申请Github账号"></a>申请Github账号</h2><p>  首先需要有一个<a href="https://github.com/" target="_blank" rel="noopener">Github</a>的账号，使用Github Pages建站时域名必须与Github ID一致，所以记得取一个响亮的名字XD。</p><h2 id="生成SSH-key"><a href="#生成SSH-key" class="headerlink" title="生成SSH key"></a>生成SSH key</h2><p>  下面以macOS为例，其余系统的同学可以参照<a href="https://pages.github.com/" target="_blank" rel="noopener">这里</a>的说明。</p><h3 id="查看现有的ssh-keys"><a href="#查看现有的ssh-keys" class="headerlink" title="查看现有的ssh keys"></a>查看现有的ssh keys</h3><p>  macOS自带ssh工具，打开终端，输入<code>ls -al ~/.ssh</code>可以查看本机当前已有的SSH key。<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al ~/.ssh</span><br><span class="line"><span class="comment"># 列出 .ssh文件夹下所有的文件（如果存在）</span></span><br></pre></td></tr></table></figure></p><h3 id="创建新的ssh-key"><a href="#创建新的ssh-key" class="headerlink" title="创建新的ssh key"></a>创建新的ssh key</h3><ul><li>打开终端</li><li>输入如下指令，将指令中的邮箱地址替换为你的github邮箱，创建一个新的ssh key<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -b 4096 -C <span class="string">"your_email@example.com"</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="保存ssh-key"><a href="#保存ssh-key" class="headerlink" title="保存ssh key"></a>保存ssh key</h3><p>当终端显示“Enter a file in which to save the key”，按下Enter键，将ssh key文件保存在默认位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]</span><br></pre></td></tr></table></figure></p><h3 id="输入密令"><a href="#输入密令" class="headerlink" title="输入密令"></a>输入密令</h3><p>密令由用户自己设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase): [Type a passphrase]</span><br><span class="line">Enter same passphrase again: [Type passphrase again]</span><br></pre></td></tr></table></figure></p><h2 id="把ssh-key添加到ssh-agent"><a href="#把ssh-key添加到ssh-agent" class="headerlink" title="把ssh key添加到ssh-agent"></a>把ssh key添加到ssh-agent</h2><h3 id="在后台启动ssh-agent"><a href="#在后台启动ssh-agent" class="headerlink" title="在后台启动ssh-agent"></a>在后台启动ssh-agent</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><br><span class="line"><span class="comment">#Agent pid 59566</span></span><br></pre></td></tr></table></figure><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>在macOS Sierra 10.12.2及之后的系统，需要修改ssh的配置文件。配置文件的位置在<code>/etc/ssh/ssh_config</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line"> AddKeysToAgent yes</span><br><span class="line"> UseKeychain yes</span><br><span class="line"> IdentityFile ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p><p> 在配置文件中添加如上三条语句。</p><h3 id="添加ssh私钥到ssh-agent"><a href="#添加ssh私钥到ssh-agent" class="headerlink" title="添加ssh私钥到ssh-agent"></a>添加ssh私钥到ssh-agent</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-add -K ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><p>如果ssh key的文件名不为id_rsa，则以上命令中对应的位置都要进行相应的替换。</p><h2 id="把ssh-key添加到Github账户"><a href="#把ssh-key添加到Github账户" class="headerlink" title="把ssh key添加到Github账户"></a>把ssh key添加到Github账户</h2><h3 id="复制ssh-key"><a href="#复制ssh-key" class="headerlink" title="复制ssh key"></a>复制ssh key</h3><p>执行以下命令，将ssh key的公钥复制到剪贴板<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pbcopy &lt; ~/.ssh/id_rsa.pub</span><br><span class="line"><span class="comment"># Copies the contents of the id_rsa.pub file to your clipboard</span></span><br></pre></td></tr></table></figure></p><h3 id="添加到Github账户"><a href="#添加到Github账户" class="headerlink" title="添加到Github账户"></a>添加到Github账户</h3><p>依次点击Settings-&gt;SSH and GPG keys-&gt;New SSH key<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0823/githubsshkey.png" alt="Github"><br>得到的网页如上图所示，在Title栏输入一个便于标识的名字，在key栏右击粘贴，然后点击‘Add SSH key’。</p><h2 id="测试ssh-key是否添加成功"><a href="#测试ssh-key是否添加成功" class="headerlink" title="测试ssh key是否添加成功"></a>测试ssh key是否添加成功</h2><p>打开终端，输入<code>ssh -vT git@github.com</code>，如果显示<code>Hi yourID! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>，则表明已经成功添加。</p><h2 id="创建一个repository"><a href="#创建一个repository" class="headerlink" title="创建一个repository"></a>创建一个repository</h2><p>点击Github页面上的’New respository’按钮，在Respository Name一栏填入<code>yourID.github.io</code>，把<code>yourID</code>替换成你的github<br>ID。</p><h1 id="Hexo的安装与配置"><a href="#Hexo的安装与配置" class="headerlink" title="Hexo的安装与配置"></a>Hexo的安装与配置</h1><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>是一个快速、简洁、高效的博客框架，并且有一份详尽的<a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">中文文档</a>。</p><h2 id="Hexo的安装"><a href="#Hexo的安装" class="headerlink" title="Hexo的安装"></a>Hexo的安装</h2><p>首先确保本机已经安装<a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a>和<a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a>，输入以下命令即可完成Hexo的安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p><h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><p>Hexo执行初始化必须使用一个空文件夹，执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p><p>_config.yml是网站的配置信息，可以在此配置大部分的参数。themes文件夹下保存网站主题。scource文件夹下的_posts文件夹中存放博文，博文写作使用<a href="https://daringfireball.net/projects/markdown/syntax" target="_blank" rel="noopener">Markdown</a>语法。<a href="http://wowubuntu.com/markdown/" target="_blank" rel="noopener">这个网站</a>提供markdown语法的中文文档。</p><p>##配置<br>打开_config.yml文件，修改其中的<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">配置</a>。<br>参数名与参数值之间用冒号隔开，冒号的右侧需要加空格。<br>通常必须修改的是以下几项：title为网站的标题，subtitle为副标题，author为作者，language改为zh-Cn使网站使用中文。<br>如果想把网站部署到Github上，还必须在配置文件里进行如下改动：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourID/yourID.github.io.git</span><br></pre></td></tr></table></figure></p><h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p>Hexo 3.0 把服务器独立成了个别模块，必须先安装 hexo-server 才能使用。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-server --save</span><br></pre></td></tr></table></figure></p><p>安装完成后，在hexo所在文件夹下执行<code>hexo s -g</code>，可以看到以下输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure></p><p>此时在浏览器中访问<a href="http://localhost:4000/，即可看到网站预览。" target="_blank" rel="noopener">http://localhost:4000/，即可看到网站预览。</a></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>配置完成后，输入命令’hexo d -g’</p><blockquote><p>我在部署时遇到过github访问被拒的情况，后来发现是因为我有两个ssh key同时在不同的github账号上使用。<br>我把其中一个账号的ssh key删除才使问题得以解决。我希望能够寻找到一种更妥善的方法来解决这个问题，<br>如果你有想法，欢迎在评论区留言。</p></blockquote><h2 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"article"</span></span><br></pre></td></tr></table></figure><p>这一指令可以创建一篇新的博文，在<code>/sources/_posts/</code>文件夹下可以找到新建的文件，后缀名为<code>.md</code>。<br>使用markdown语法即可在此文件上进行写作。</p><h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><p>Hexo提供许多模板供人使用，这些模板在node_models文件夹下，使用时需要将其复制到themes文件夹中。<br>在建站时我使用的是<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">next</a>主题。</p><h2 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h2><p><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">next</a>主题原生支持DuoShuo和<a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a>。<br>以Disqus举例，得到shortname后在主题下的配置文件中完成相应的修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">disqus:</span><br><span class="line">  enable: true</span><br><span class="line">  shortname: your-duoshuo-shortname</span><br></pre></td></tr></table></figure></p><p>运行<code>hexo s -g</code>即可在本地端口查看。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
