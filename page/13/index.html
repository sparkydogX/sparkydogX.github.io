<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=7.0.1">


  <link rel="mask-icon" href="/favicon.png?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="SparkydogX Blog">
<meta property="og:url" content="http://sparkydogX.github.io/page/13/index.html">
<meta property="og:site_name" content="SparkydogX Blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SparkydogX Blog">






  <link rel="canonical" href="http://sparkydogX.github.io/page/13/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>SparkydogX Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SparkydogX Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/31/python-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/31/python-01/" class="post-title-link" itemprop="url">python及numpy笔记（一）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-31 18:03:49 / 修改时间：18:35:13" itemprop="dateCreated datePublished" datetime="2017-08-31T18:03:49+08:00">2017-08-31</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="enumerate-函数"><a href="#enumerate-函数" class="headerlink" title="enumerate()函数"></a>enumerate()函数</h2><ul>
<li>enumerate是python内置的函数，用于循环迭代</li>
<li>返回值为一个元组</li>
<li>示例：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line">for index, text in enumerate(list，start=0):</span><br><span class="line">    print index, text</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>运行结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 a</span><br><span class="line">1 b</span><br><span class="line">2 c</span><br></pre></td></tr></table></figure></p>
<ul>
<li>enumerate函数等价于如下函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def enumerate(sequence, start=0):</span><br><span class="line">    n = start</span><br><span class="line">    for elem in sequence:</span><br><span class="line">        yield n, elem</span><br><span class="line">        n += 1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="yield关键字"><a href="#yield关键字" class="headerlink" title="yield关键字"></a>yield关键字</h2><ul>
<li>yield类似于return，只是yield返回的是一个生成器</li>
<li>第一次迭代中函数会执行到yield 关键字，然后返回 yield 后的值作为第一次迭代的返回值. 此后，每次执行这个函数都会从上一次中断的yield处继续执行，然后进入循环，遇到yield返回此次迭代值</li>
<li>即函数只有在每次被调用迭代器时会执行循环</li>
<li>只言片语很难讲清楚yield的准确作用，更详细的解释可以点击<a href="https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do" target="_blank" rel="noopener">这里</a></li>
<li><p>给出示例如下，执行程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ls = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line"></span><br><span class="line">def enem(ls, start=0):</span><br><span class="line">    n = start</span><br><span class="line">    for i in ls:</span><br><span class="line">        print &quot;this is &quot;,i,&quot;in yield&quot;</span><br><span class="line">        yield n,i</span><br><span class="line">        n += 1</span><br><span class="line">        print &quot;n=&quot;,n</span><br><span class="line">index=0</span><br><span class="line">for n,elem in enem(ls):</span><br><span class="line">    print &quot;this is &quot;,index,&quot;times in for loop&quot;</span><br><span class="line">    print n,elem</span><br><span class="line">    index+=1</span><br></pre></td></tr></table></figure>
</li>
<li><p>输出值为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">this is  a in yield</span><br><span class="line">this is  0 times in for loop</span><br><span class="line">0 a</span><br><span class="line">n= 1</span><br><span class="line">this is  b in yield</span><br><span class="line">this is  1 times in for loop</span><br><span class="line">1 b</span><br><span class="line">n= 2</span><br><span class="line">this is  c in yield</span><br><span class="line">this is  2 times in for loop</span><br><span class="line">2 c</span><br><span class="line">n= 3</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="numpy-flatnonzero-函数"><a href="#numpy-flatnonzero-函数" class="headerlink" title="numpy.flatnonzero()函数"></a>numpy.flatnonzero()函数</h2><ul>
<li>输入一个数组，将其展开成一维向量后输出对应的非0值的下标</li>
</ul>
<h2 id="numpy-random-choice-a-size-None-replace-True-p-None"><a href="#numpy-random-choice-a-size-None-replace-True-p-None" class="headerlink" title="numpy.random.choice(a, size=None, replace=True, p=None)"></a>numpy.random.choice(a, size=None, replace=True, p=None)</h2><ul>
<li>输入参数：<ul>
<li>a：1维向量或者整数。如果a为整数，随机样本与<code>np.arange(a)</code>相同</li>
<li>size：输出的元素个数</li>
<li>replace：bool值，<code>replace=False</code>时表示样本不可重复被选取</li>
<li>p：对应a中元素被选取的概率，可选，默认为平均分布</li>
</ul>
</li>
</ul>
<h2 id="numpy的broadcast"><a href="#numpy的broadcast" class="headerlink" title="numpy的broadcast"></a>numpy的broadcast</h2><p><em>numpy中的矩阵运算会具有broadcast性质，决定了在运算时对于不同shape的矩阵会采取不同的操作</em></p>
<blockquote>
<p>The term broadcasting describes how numpy treats arrays with different shapes during arithmetic operations. Subject to certain constraints, the smaller array is “broadcast” across the larger array so that they have compatible shapes. Broadcasting provides a means of vectorizing array operations so that looping occurs in C instead of Python. It does this without making needless copies of data and usually leads to efficient algorithm implementations. There are, however, cases where broadcasting is a bad idea because it leads to inefficient use of memory that slows computation.</p>
</blockquote>
<p>例如：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">2.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a * b</span><br><span class="line">array([ <span class="number">2.</span>,  <span class="number">4.</span>,  <span class="number">6.</span>])</span><br></pre></td></tr></table></figure></p>
<p>numpy会通过broadcast方式对于不符合shape的矩阵自动将其扩展后再进行运算，这一性质在许多情况下可以使得代码更加简洁，但是也常常容易使人感到困惑。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/31/python-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/31/python-02/" class="post-title-link" itemprop="url">使用matplotlib对分类数据集样本可视化</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-31 09:07:54 / 修改时间：09:11:10" itemprop="dateCreated datePublished" datetime="2017-08-31T09:07:54+08:00">2017-08-31</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在训练分类器之前，我们常常希望能够对数据集有一个直观的感受，比如像这样：<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0830/A.jpg" alt="imgA"><br>今天做CS231n作业一的时候，发现作业里有一段代码用matplotlib实现了这一功能，代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">classes = [<span class="string">'plane'</span>, <span class="string">'car'</span>, <span class="string">'bird'</span>, <span class="string">'cat'</span>, <span class="string">'deer'</span>, <span class="string">'dog'</span>, <span class="string">'frog'</span>, <span class="string">'horse'</span>, <span class="string">'ship'</span>, <span class="string">'truck'</span>]</span><br><span class="line">num_classes = len(classes)</span><br><span class="line">samples_per_class = <span class="number">7</span></span><br><span class="line"><span class="keyword">for</span> y, cls <span class="keyword">in</span> enumerate(classes):</span><br><span class="line">    idxs = np.flatnonzero(y_train == y)</span><br><span class="line">    idxs = np.random.choice(idxs, samples_per_class, replace=<span class="keyword">False</span>)</span><br><span class="line">    <span class="keyword">for</span> i, idx <span class="keyword">in</span> enumerate(idxs):</span><br><span class="line">        plt_idx = i * num_classes + y + <span class="number">1</span></span><br><span class="line">        plt.subplot(samples_per_class, num_classes, plt_idx)</span><br><span class="line">        plt.imshow(X_train[idx].astype(<span class="string">'uint8'</span>))</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            plt.title(cls)</span><br><span class="line">plt.savefig(yourpath)</span><br></pre></td></tr></table></figure></p>
<p>这段程序中<code>samples_per_class</code>为每个类别图片采样的张数，随后使用了两次枚举，外层的枚举用来从每个类里随机抽取用于展示的7张图片，内层的枚举用来将挑选出来的图片作为subplot放在matplotlib提供的图框中，最后使用<code>plt.savefig(yourpath)</code>保存即可。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/30/tremina-ss/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/30/tremina-ss/" class="post-title-link" itemprop="url">在Mac终端中使用SS代理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-30 10:50:14" itemprop="dateCreated datePublished" datetime="2017-08-30T10:50:14+08:00">2017-08-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-28 09:47:32" itemprop="dateModified" datetime="2017-09-28T09:47:32+08:00">2017-09-28</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/shadowsocks" target="_blank" rel="noopener">SS</a>是当前最好用的科学上网工具之一，但是在terminal中无法直接使用ss代理，需要使用额外的工具来实现这一功能。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在开始之前，请确保：</p>
<ul>
<li>拥有一个可以正常使用的SS</li>
<li>Mac上已安装有<a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a></li>
</ul>
<h2 id="安装privoxy"><a href="#安装privoxy" class="headerlink" title="安装privoxy"></a>安装privoxy</h2><p>使用以下命令安装：<br><code>brew install privoxy</code></p>
<h2 id="privoxy配置"><a href="#privoxy配置" class="headerlink" title="privoxy配置"></a>privoxy配置</h2><p>打开配置文件，文件路径为<code>/usr/local/etc/privoxy/config</code><br>在配置文件底部加入以下语句：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen-address 0.0.0.0:8118</span><br><span class="line">forward-socks5 / localhost:1080 .</span><br></pre></td></tr></table></figure></p>
<h2 id="启动privoxy"><a href="#启动privoxy" class="headerlink" title="启动privoxy"></a>启动privoxy</h2><p>输入以下语句：<br><code>sudo /usr/local/sbin/privoxy /usr/local/etc/privoxy/config</code><br>查看是否启动成功：<br><code>netstat -na | grep 8118</code><br>看到如下消息说明启动成功：<br><code>tcp4 0   0  *.8118       *.*     LISTEN</code></p>
<h2 id="使用privoxy"><a href="#使用privoxy" class="headerlink" title="使用privoxy"></a>使用privoxy</h2><p>在命令行终端中输入如下命令后，该终端即可走代理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">export https_proxy=&apos;http://localhost:8118&apos;</span><br></pre></td></tr></table></figure></p>
<p>这时输入<code>curl ip.gs</code>会显示代理服务器的信息<br>关闭终端代理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unset http_proxy</span><br><span class="line">unset https_proxy</span><br></pre></td></tr></table></figure></p>
<h2 id="配置bash文件"><a href="#配置bash文件" class="headerlink" title="配置bash文件"></a>配置bash文件</h2><p>经过上面几步，已经可以在终端使用SS代理，每次使用都需要输入一大串命令。可以在 ~/.bash_profile 里加入函数，便于使用。</p>
<ul>
<li><p>macOS系统中默认没有<code>.bash_profile</code>文件，需要手动创建文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/</span><br><span class="line">touch .bash_profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑<code>.bash_profile</code>文件：<code>open -e .bash_profile</code></p>
</li>
<li><p>在<code>.bash_profile</code>里写入函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function proxy_off()&#123;</span><br><span class="line">    unset http_proxy</span><br><span class="line">    unset https_proxy</span><br><span class="line">    echo -e &quot;已关闭代理&quot;</span><br><span class="line">&#125;</span><br><span class="line">function proxy_on() &#123;</span><br><span class="line">    export http_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">    export https_proxy=&apos;http://localhost:8118&apos;</span><br><span class="line">    echo -e &quot;已开启代理&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使配置立即生效：<code>source  ~/.bash_profile</code></p>
<h2 id="调用bash函数"><a href="#调用bash函数" class="headerlink" title="调用bash函数"></a>调用bash函数</h2><p>配置已经全部完成，在终端使用<code>proxy_on</code>/<code>proxy_off</code>指令即可打开/关闭代理</p>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/29/python-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/29/python-00/" class="post-title-link" itemprop="url">如何查找python及pip的安装位置</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-29 16:27:58 / 修改时间：16:56:17" itemprop="dateCreated datePublished" datetime="2017-08-29T16:27:58+08:00">2017-08-29</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Linux和macOS系统中，python是系统自带的，不需要另外安装。但是出于安全性考虑，系统往往不允许修改自带的python文件，解决这一问题的方法是使用类似于Homebrew（Linuxbrew）的工具，或者干脆使用虚拟环境virtualenv。而这带来另外的问题，即python版本过多，例如使用Homebrew安装python后，在命令行使用<code>python</code>、 <code>python2</code>、 <code>python3</code>执行的是三个不同位置的python，手动查找对应的python文件位置是一件令人头疼的事情。</p>
<h1 id="获取python解释器的文件位置"><a href="#获取python解释器的文件位置" class="headerlink" title="获取python解释器的文件位置"></a>获取python解释器的文件位置</h1><ul>
<li>打开终端，输入<code>python</code>或 <code>python2</code>或<code>python3</code>或者其他</li>
<li>依次输入如下语句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; path = sys.executable</span><br><span class="line">&gt;&gt;&gt; print path</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>此时python解释器的位置会被输出到终端</p>
<h1 id="获取pip下的site-package文件夹位置"><a href="#获取pip下的site-package文件夹位置" class="headerlink" title="获取pip下的site-package文件夹位置"></a>获取pip下的site-package文件夹位置</h1><ul>
<li>打开终端，输入<code>python</code>或 <code>python2</code>或<code>python3</code>或者其他</li>
<li>依次输入以下语句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import site</span><br><span class="line">&gt;&gt;&gt; site.getsitepackages()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>对应版本的site-package文件夹位置被输出到终端</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>此外，python可通过<code>import os</code>来调用系统指令</p>
<h2 id="获取当前文件路径"><a href="#获取当前文件路径" class="headerlink" title="获取当前文件路径"></a>获取当前文件路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">path=os.getcwd()</span><br><span class="line">print path</span><br></pre></td></tr></table></figure>
<h2 id="在python-shell中清除屏幕"><a href="#在python-shell中清除屏幕" class="headerlink" title="在python shell中清除屏幕"></a>在<code>python shell</code>中清除屏幕</h2><ul>
<li>在Mac操作系统中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.system(&apos;clear&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>shell会被清空，第一行留下一个返回值0</p>
<ul>
<li>在Windows操作系统中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.system(&apos;clr&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/29/tf-function-001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/29/tf-function-001/" class="post-title-link" itemprop="url">TensorFlow常用函数（二）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-29 10:00:50 / 修改时间：16:25:50" itemprop="dateCreated datePublished" datetime="2017-08-29T10:00:50+08:00">2017-08-29</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="tf-nn-dropout"><a href="#tf-nn-dropout" class="headerlink" title="tf.nn.dropout"></a>tf.nn.dropout</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dropout(</span><br><span class="line">    x,</span><br><span class="line">    keep_prob,</span><br><span class="line">    noise_shape=None,</span><br><span class="line">    seed=None,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.nn.dropout</li>
<li>输入参数：<ul>
<li>x:一个tensor量，通常为一个全连接层</li>
<li>keep_prob：一个tensor标量，表示神经元保持活性的概率</li>
<li>noise_shape：一个1维的int32 tensor，作用没搞明白</li>
</ul>
</li>
<li>返回值：与x的shape相同的tensor</li>
<li>Dropout 的作用是使部分神经元失去活性，不参与前馈和反向传播，使用dropout后计算梯度时需要根据神经元失活的比例对原梯度公式进行比例变换，在tf.nn.dropout中，比例变换已在内部完成，无需操心。</li>
</ul>
<h2 id="tf-nn-softmax-cross-entropy-with-logits"><a href="#tf-nn-softmax-cross-entropy-with-logits" class="headerlink" title="tf.nn.softmax_cross_entropy_with_logits"></a>tf.nn.softmax_cross_entropy_with_logits</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">softmax_cross_entropy_with_logits(</span><br><span class="line">    _sentinel=None,</span><br><span class="line">    labels=None,</span><br><span class="line">    logits=None,</span><br><span class="line">    dim=-1,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.nn.softmax_cross_entropy_with_logits</li>
<li>输入参数：<ul>
<li>_sentinel：内部参数，不要使用</li>
<li>labels：实际的label</li>
<li>logits：神经网络的最后一层</li>
<li>logits和labels的shape和dtype要相同，例如<code>[batch_size, num_classes]</code>,<code>dtype=tf.float32</code></li>
</ul>
</li>
<li>返回值：一维的tensor，长度为batch_size</li>
<li>函数内包含对数计算和corss entropy的计算，通常对返回值使用<code>tf.reduce_mean()</code>函数之后可以得到loss</li>
</ul>
<h2 id="tf-equal"><a href="#tf-equal" class="headerlink" title="tf.equal"></a>tf.equal</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">equal(</span><br><span class="line">    x,</span><br><span class="line">    y,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.equal</li>
<li>输入参数：<ul>
<li>x：tensor</li>
<li>y：tensor</li>
</ul>
</li>
<li>返回值：bool类型的tensor</li>
</ul>
<h2 id="tf-train-AdamOptimizer-minimize"><a href="#tf-train-AdamOptimizer-minimize" class="headerlink" title="tf.train.AdamOptimizer.minimize"></a>tf.train.AdamOptimizer.minimize</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">minimize(</span><br><span class="line">    loss,</span><br><span class="line">    global_step=None,</span><br><span class="line">    var_list=None,</span><br><span class="line">    gate_gradients=GATE_OP,</span><br><span class="line">    aggregation_method=None,</span><br><span class="line">    colocate_gradients_with_ops=False,</span><br><span class="line">    name=None,</span><br><span class="line">    grad_loss=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>AdamOptimizer是<code>tf.train</code>下的一个类，继承 Optimizer类，可在创建实例时初始化设置learning rate，例如<br><code>train_step = tf.train.AdamOptimizer(1e-4).minimize(cross_entropy)</code></li>
<li>Adam是一种最优化方法，结合了Momentum和RMSProp算法，通常被认为鲁棒性较好</li>
</ul>
<h2 id="tf-argmax"><a href="#tf-argmax" class="headerlink" title="tf.argmax"></a>tf.argmax</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">argmax(</span><br><span class="line">    input,</span><br><span class="line">    axis=None,</span><br><span class="line">    name=None,</span><br><span class="line">    dimension=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.argmax</li>
<li>输入参数：<ul>
<li>input：一个tensor量</li>
<li>axis：运算的方向，对于一维向量<code>axis=0</code></li>
</ul>
</li>
<li>返回值：沿axis方向最大值的下标，类型是int64的tensor</li>
</ul>
<h2 id="tf-cast"><a href="#tf-cast" class="headerlink" title="tf.cast"></a>tf.cast</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cast(</span><br><span class="line">    x,</span><br><span class="line">    dtype,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.cast</li>
<li>函数作用：将x转变为dtype所规定的类型</li>
<li>返回值：tensor，与x的shape相同</li>
</ul>
<h2 id="tf-Tensor-eval"><a href="#tf-Tensor-eval" class="headerlink" title="tf.Tensor.eval"></a>tf.Tensor.eval</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eval(</span><br><span class="line">    feed_dict=None,</span><br><span class="line">    session=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>设有一个tensor <code>t</code>，则以下两条语句等价：<br><code>t.eval()</code><br><code>tf.get_default_session().run(t)</code></li>
<li><p>eval()和sess()的区别主要有两点：</p>
<ul>
<li><p>eval一条语句获取一个tensor值，sess可以同时获取多个tensor值，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    t = tf.constant(<span class="number">42.0</span>)</span><br><span class="line">    u = tf.constant(<span class="number">37.0</span>)</span><br><span class="line">    tu = tf.mul(t, u)</span><br><span class="line">    ut = tf.mul(u, t)</span><br><span class="line"><span class="keyword">with</span> sess.as_default():</span><br><span class="line">       tu.eval()  <span class="comment"># runs one step</span></span><br><span class="line">       ut.eval()  <span class="comment"># runs one step</span></span><br><span class="line">       sess.run([tu, ut])  <span class="comment"># evaluates both tensors in a single step</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行eval时必须有明确的session，可以通过以下两种方式实现：</p>
<ul>
<li>在参数中指定<code>session=sess</code></li>
<li>使用<code>with</code>关键词<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">      sess.run(tf.global_variables_initializer())</span><br><span class="line">      train_accuracy = accuracy.eval(feed_dict=&#123;x: batch[<span class="number">0</span>], y_: batch[<span class="number">1</span>], keep_prob: <span class="number">1.0</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/28/tf-function-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/28/tf-function-00/" class="post-title-link" itemprop="url">TensorFlow常用函数（一）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-28 19:37:57 / 修改时间：21:21:45" itemprop="dateCreated datePublished" datetime="2017-08-28T19:37:57+08:00">2017-08-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="tf-truncated-normal（截断正态分布函数）"><a href="#tf-truncated-normal（截断正态分布函数）" class="headerlink" title="tf.truncated_normal（截断正态分布函数）"></a>tf.truncated_normal（截断正态分布函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">truncated_normal(</span><br><span class="line">    shape,</span><br><span class="line">    mean=0.0,</span><br><span class="line">    stddev=1.0,</span><br><span class="line">    dtype=tf.float32,</span><br><span class="line">    seed=None,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.truncated_normal</li>
<li>返回值：具有指定形态随机数组的tensor</li>
<li>输入参数：<ul>
<li>shape：生成的随机数组维度</li>
<li>stddev：正态分布的标准差</li>
</ul>
</li>
<li>函数按正态分布取随机数，当所取得的随机数在两倍标准差范围之外时，将其舍弃并重新取值。</li>
</ul>
<h2 id="tf-nn-conv2d（卷积）"><a href="#tf-nn-conv2d（卷积）" class="headerlink" title="tf.nn.conv2d（卷积）"></a>tf.nn.conv2d（卷积）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">conv2d(</span><br><span class="line">    input,</span><br><span class="line">    filter,</span><br><span class="line">    strides,</span><br><span class="line">    padding,</span><br><span class="line">    use_cudnn_on_gpu=True,</span><br><span class="line">    data_format=&apos;NHWC&apos;,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.nn.conv2d</li>
<li>返回值：具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，即常说的feature map。</li>
<li>输入参数：<ul>
<li>input：输入层，是具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，其中<code>batch</code>表示输入图像的数量，<code>in_height</code>表示图像高度，<code>in_width</code>表示图像宽度，<code>in_channels</code>表示图像通道数</li>
<li>filter：滤波器（又称卷积核）的参数，同样是具有4个维度的tensor，<code>[filter_height, filter_width, in_channels, out_channels]</code>，其中 <code>in_channels</code>与<code>input</code>中的<code>in_channels</code>相同，<code>out_channels</code>为输出通道数，也是滤波器的个数。</li>
<li>strides： 卷积时的步长，一维向量，长度为4，4个元素分别对应<code>input</code>中的4个维度</li>
<li>padding：值只能是‘SAME’或‘VALTD’，决定了卷积时的padding方式</li>
<li>use_cudnn_on_gpu：可选参数，默认值为True，决定了是否使用GPU上的CUDNN，默认值为True</li>
<li>data_format：可选参数，默认为’NHWC’，决定了输入输出层中4个维度的排列顺序。可选值为‘NCHW’</li>
<li>name：可选参数，默认值为None</li>
</ul>
</li>
<li>这是tf中一个核心的函数，用于卷积操作。</li>
</ul>
<h2 id="tf-nn-max-pool（最大池化函数，或称采样函数）"><a href="#tf-nn-max-pool（最大池化函数，或称采样函数）" class="headerlink" title="tf.nn.max_pool（最大池化函数，或称采样函数）"></a>tf.nn.max_pool（最大池化函数，或称采样函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">max_pool(</span><br><span class="line">    value,</span><br><span class="line">    ksize,</span><br><span class="line">    strides,</span><br><span class="line">    padding,</span><br><span class="line">    data_format=&apos;NHWC&apos;,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.nn.max_pool</li>
<li>返回值：具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，即常说的feature map。</li>
<li>输入参数：<ul>
<li>value：输入层，是具有4个维度的tensor，<code>[batch, in_height, in_width, in_channels]</code>，其中<code>batch</code>表示输入图像的数量，<code>in_height</code>表示图像高度，<code>in_width</code>表示图像宽度，<code>in_channels</code>表示图像通道数</li>
<li>ksize：池化窗口的大小，为一个长度为4的一维向量，一般是[1, height, width, 1]，因为我们不想在batch和channels上做池化，所以这两个维度设为1</li>
<li>strides：步长，长度为4的一维向量，与卷积类似</li>
<li>padding：与卷积类似，值只能是‘SAME’或‘VALTD’</li>
<li>data_format：可选参数，默认为’NHWC’，决定了输入输出层中4个维度的排列顺序。可选值为‘NCHW’</li>
<li><ul>
<li>name：可选参数，默认值为None</li>
</ul>
</li>
</ul>
</li>
<li>这是最大池化函数，用在卷积操作之后，通过最大值采样降低feature map的维度。</li>
</ul>
<h2 id="tf-nn-relu（ReLU激活函数）"><a href="#tf-nn-relu（ReLU激活函数）" class="headerlink" title="tf.nn.relu（ReLU激活函数）"></a>tf.nn.relu（ReLU激活函数）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">relu(</span><br><span class="line">    features,</span><br><span class="line">    name=None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>函数名称：tf.nn.relu</li>
<li>返回值：<code>max(features, 0)</code></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sparkydogX.github.io/2017/08/23/hexoGithubTutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sparkydogX">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SparkydogX Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/23/hexoGithubTutorial/" class="post-title-link" itemprop="url">在Github上搭建博客</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-23 14:37:43" itemprop="dateCreated datePublished" datetime="2017-08-23T14:37:43+08:00">2017-08-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-08-24 10:11:06" itemprop="dateModified" datetime="2017-08-24T10:11:06+08:00">2017-08-24</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://pages.github.com/" target="_blank" rel="noopener">Github Pages</a>是一个静态站点托管服务，用户可以用它来搭建便捷、稳定的个人站点。</p>
<h1 id="Github-Pages的设置"><a href="#Github-Pages的设置" class="headerlink" title="Github Pages的设置"></a>Github Pages的设置</h1><h2 id="申请Github账号"><a href="#申请Github账号" class="headerlink" title="申请Github账号"></a>申请Github账号</h2><p>  首先需要有一个<a href="https://github.com/" target="_blank" rel="noopener">Github</a>的账号，使用Github Pages建站时域名必须与Github ID一致，所以记得取一个响亮的名字XD。</p>
<h2 id="生成SSH-key"><a href="#生成SSH-key" class="headerlink" title="生成SSH key"></a>生成SSH key</h2><p>  下面以macOS为例，其余系统的同学可以参照<a href="https://pages.github.com/" target="_blank" rel="noopener">这里</a>的说明。</p>
<h3 id="查看现有的ssh-keys"><a href="#查看现有的ssh-keys" class="headerlink" title="查看现有的ssh keys"></a>查看现有的ssh keys</h3><p>  macOS自带ssh工具，打开终端，输入<code>ls -al ~/.ssh</code>可以查看本机当前已有的SSH key。<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al ~/.ssh</span><br><span class="line"><span class="comment"># 列出 .ssh文件夹下所有的文件（如果存在）</span></span><br></pre></td></tr></table></figure></p>
<h3 id="创建新的ssh-key"><a href="#创建新的ssh-key" class="headerlink" title="创建新的ssh key"></a>创建新的ssh key</h3><ul>
<li>打开终端</li>
<li>输入如下指令，将指令中的邮箱地址替换为你的github邮箱，创建一个新的ssh key<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -b 4096 -C <span class="string">"your_email@example.com"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="保存ssh-key"><a href="#保存ssh-key" class="headerlink" title="保存ssh key"></a>保存ssh key</h3><p>当终端显示“Enter a file in which to save the key”，按下Enter键，将ssh key文件保存在默认位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]</span><br></pre></td></tr></table></figure></p>
<h3 id="输入密令"><a href="#输入密令" class="headerlink" title="输入密令"></a>输入密令</h3><p>密令由用户自己设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase): [Type a passphrase]</span><br><span class="line">Enter same passphrase again: [Type passphrase again]</span><br></pre></td></tr></table></figure></p>
<h2 id="把ssh-key添加到ssh-agent"><a href="#把ssh-key添加到ssh-agent" class="headerlink" title="把ssh key添加到ssh-agent"></a>把ssh key添加到ssh-agent</h2><h3 id="在后台启动ssh-agent"><a href="#在后台启动ssh-agent" class="headerlink" title="在后台启动ssh-agent"></a>在后台启动ssh-agent</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><br><span class="line"><span class="comment">#Agent pid 59566</span></span><br></pre></td></tr></table></figure>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>在macOS Sierra 10.12.2及之后的系统，需要修改ssh的配置文件。配置文件的位置在<code>/etc/ssh/ssh_config</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line"> AddKeysToAgent yes</span><br><span class="line"> UseKeychain yes</span><br><span class="line"> IdentityFile ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p>
<p> 在配置文件中添加如上三条语句。</p>
<h3 id="添加ssh私钥到ssh-agent"><a href="#添加ssh私钥到ssh-agent" class="headerlink" title="添加ssh私钥到ssh-agent"></a>添加ssh私钥到ssh-agent</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-add -K ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>
<p>如果ssh key的文件名不为id_rsa，则以上命令中对应的位置都要进行相应的替换。</p>
<h2 id="把ssh-key添加到Github账户"><a href="#把ssh-key添加到Github账户" class="headerlink" title="把ssh key添加到Github账户"></a>把ssh key添加到Github账户</h2><h3 id="复制ssh-key"><a href="#复制ssh-key" class="headerlink" title="复制ssh key"></a>复制ssh key</h3><p>执行以下命令，将ssh key的公钥复制到剪贴板<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pbcopy &lt; ~/.ssh/id_rsa.pub</span><br><span class="line"><span class="comment"># Copies the contents of the id_rsa.pub file to your clipboard</span></span><br></pre></td></tr></table></figure></p>
<h3 id="添加到Github账户"><a href="#添加到Github账户" class="headerlink" title="添加到Github账户"></a>添加到Github账户</h3><p>依次点击Settings-&gt;SSH and GPG keys-&gt;New SSH key<br><img src="https://raw.githubusercontent.com/sparkydogX/pictures/master/2017/0823/githubsshkey.png" alt="Github"><br>得到的网页如上图所示，在Title栏输入一个便于标识的名字，在key栏右击粘贴，然后点击‘Add SSH key’。</p>
<h2 id="测试ssh-key是否添加成功"><a href="#测试ssh-key是否添加成功" class="headerlink" title="测试ssh key是否添加成功"></a>测试ssh key是否添加成功</h2><p>打开终端，输入<code>ssh -vT git@github.com</code>，如果显示<code>Hi yourID! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>，则表明已经成功添加。</p>
<h2 id="创建一个repository"><a href="#创建一个repository" class="headerlink" title="创建一个repository"></a>创建一个repository</h2><p>点击Github页面上的’New respository’按钮，在Respository Name一栏填入<code>yourID.github.io</code>，把<code>yourID</code>替换成你的github<br>ID。</p>
<h1 id="Hexo的安装与配置"><a href="#Hexo的安装与配置" class="headerlink" title="Hexo的安装与配置"></a>Hexo的安装与配置</h1><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>是一个快速、简洁、高效的博客框架，并且有一份详尽的<a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">中文文档</a>。</p>
<h2 id="Hexo的安装"><a href="#Hexo的安装" class="headerlink" title="Hexo的安装"></a>Hexo的安装</h2><p>首先确保本机已经安装<a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a>和<a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a>，输入以下命令即可完成Hexo的安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><p>Hexo执行初始化必须使用一个空文件夹，执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>_config.yml是网站的配置信息，可以在此配置大部分的参数。themes文件夹下保存网站主题。scource文件夹下的_posts文件夹中存放博文，博文写作使用<a href="https://daringfireball.net/projects/markdown/syntax" target="_blank" rel="noopener">Markdown</a>语法。<a href="http://wowubuntu.com/markdown/" target="_blank" rel="noopener">这个网站</a>提供markdown语法的中文文档。</p>
<p>##配置<br>打开_config.yml文件，修改其中的<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">配置</a>。<br>参数名与参数值之间用冒号隔开，冒号的右侧需要加空格。<br>通常必须修改的是以下几项：title为网站的标题，subtitle为副标题，author为作者，language改为zh-Cn使网站使用中文。<br>如果想把网站部署到Github上，还必须在配置文件里进行如下改动：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourID/yourID.github.io.git</span><br></pre></td></tr></table></figure></p>
<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p>Hexo 3.0 把服务器独立成了个别模块，必须先安装 hexo-server 才能使用。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-server --save</span><br></pre></td></tr></table></figure></p>
<p>安装完成后，在hexo所在文件夹下执行<code>hexo s -g</code>，可以看到以下输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure></p>
<p>此时在浏览器中访问<a href="http://localhost:4000/，即可看到网站预览。" target="_blank" rel="noopener">http://localhost:4000/，即可看到网站预览。</a></p>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>配置完成后，输入命令’hexo d -g’</p>
<blockquote>
<p>我在部署时遇到过github访问被拒的情况，后来发现是因为我有两个ssh key同时在不同的github账号上使用。<br>我把其中一个账号的ssh key删除才使问题得以解决。我希望能够寻找到一种更妥善的方法来解决这个问题，<br>如果你有想法，欢迎在评论区留言。</p>
</blockquote>
<h2 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"article"</span></span><br></pre></td></tr></table></figure>
<p>这一指令可以创建一篇新的博文，在<code>/sources/_posts/</code>文件夹下可以找到新建的文件，后缀名为<code>.md</code>。<br>使用markdown语法即可在此文件上进行写作。</p>
<h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><p>Hexo提供许多模板供人使用，这些模板在node_models文件夹下，使用时需要将其复制到themes文件夹中。<br>在建站时我使用的是<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">next</a>主题。</p>
<h2 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h2><p><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">next</a>主题原生支持DuoShuo和<a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a>。<br>以Disqus举例，得到shortname后在主题下的配置文件中完成相应的修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">disqus:</span><br><span class="line">  enable: true</span><br><span class="line">  shortname: your-duoshuo-shortname</span><br></pre></td></tr></table></figure></p>
<p>运行<code>hexo s -g</code>即可在本地端口查看。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="sparkydogX">
            
              <p class="site-author-name" itemprop="name">sparkydogX</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">127</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">128</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/sparkydogX" title="GitHub &rarr; https://github.com/sparkydogX" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sparkydogX</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  



  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  

  

</body>
</html>
